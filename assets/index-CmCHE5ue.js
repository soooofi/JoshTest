function Ng(t,e){for(var r=0;r<e.length;r++){const o=e[r];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in t)){const h=Object.getOwnPropertyDescriptor(o,u);h&&Object.defineProperty(t,u,h.get?h:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=r(u);fetch(u.href,h)}})();var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(o){var u=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:function(){return t[o]}})}),r}var c1={exports:{}},Xa={},h1={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),kg=Symbol.for("react.portal"),Dg=Symbol.for("react.fragment"),Mg=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),Lg=Symbol.for("react.provider"),Bg=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),Ug=Symbol.for("react.suspense"),jg=Symbol.for("react.memo"),zg=Symbol.for("react.lazy"),Oh=Symbol.iterator;function Vg(t){return t===null||typeof t!="object"?null:(t=Oh&&t[Oh]||t["@@iterator"],typeof t=="function"?t:null)}var f1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d1=Object.assign,g1={};function ps(t,e,r){this.props=t,this.context=e,this.refs=g1,this.updater=r||f1}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function p1(){}p1.prototype=ps.prototype;function fc(t,e,r){this.props=t,this.context=e,this.refs=g1,this.updater=r||f1}var dc=fc.prototype=new p1;dc.constructor=fc;d1(dc,ps.prototype);dc.isPureReactComponent=!0;var Nh=Array.isArray,m1=Object.prototype.hasOwnProperty,gc={current:null},x1={key:!0,ref:!0,__self:!0,__source:!0};function w1(t,e,r){var o,u={},h=null,d=null;if(e!=null)for(o in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(h=""+e.key),e)m1.call(e,o)&&!x1.hasOwnProperty(o)&&(u[o]=e[o]);var w=arguments.length-2;if(w===1)u.children=r;else if(1<w){for(var p=Array(w),m=0;m<w;m++)p[m]=arguments[m+2];u.children=p}if(t&&t.defaultProps)for(o in w=t.defaultProps,w)u[o]===void 0&&(u[o]=w[o]);return{$$typeof:vo,type:t,key:h,ref:d,props:u,_owner:gc.current}}function Hg(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pc(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function Wg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Rh=/\/+/g;function Ml(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Wg(""+t.key):e.toString(36)}function sa(t,e,r,o,u){var h=typeof t;(h==="undefined"||h==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case vo:case kg:d=!0}}if(d)return d=t,u=u(d),t=o===""?"."+Ml(d,0):o,Nh(u)?(r="",t!=null&&(r=t.replace(Rh,"$&/")+"/"),sa(u,e,r,"",function(m){return m})):u!=null&&(pc(u)&&(u=Hg(u,r+(!u.key||d&&d.key===u.key?"":(""+u.key).replace(Rh,"$&/")+"/")+t)),e.push(u)),1;if(d=0,o=o===""?".":o+":",Nh(t))for(var w=0;w<t.length;w++){h=t[w];var p=o+Ml(h,w);d+=sa(h,e,r,p,u)}else if(p=Vg(t),typeof p=="function")for(t=p.call(t),w=0;!(h=t.next()).done;)h=h.value,p=o+Ml(h,w++),d+=sa(h,e,r,p,u);else if(h==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function Bo(t,e,r){if(t==null)return t;var o=[],u=0;return sa(t,o,"","",function(h){return e.call(r,h,u++)}),o}function Gg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},oa={transition:null},Xg={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:oa,ReactCurrentOwner:gc};function y1(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Bo,forEach:function(t,e,r){Bo(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Bo(t,function(){e++}),e},toArray:function(t){return Bo(t,function(e){return e})||[]},only:function(t){if(!pc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=ps;Me.Fragment=Dg;Me.Profiler=Pg;Me.PureComponent=fc;Me.StrictMode=Mg;Me.Suspense=Ug;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xg;Me.act=y1;Me.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=d1({},t.props),u=t.key,h=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(h=e.ref,d=gc.current),e.key!==void 0&&(u=""+e.key),t.type&&t.type.defaultProps)var w=t.type.defaultProps;for(p in e)m1.call(e,p)&&!x1.hasOwnProperty(p)&&(o[p]=e[p]===void 0&&w!==void 0?w[p]:e[p])}var p=arguments.length-2;if(p===1)o.children=r;else if(1<p){w=Array(p);for(var m=0;m<p;m++)w[m]=arguments[m+2];o.children=w}return{$$typeof:vo,type:t.type,key:u,ref:h,props:o,_owner:d}};Me.createContext=function(t){return t={$$typeof:Bg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lg,_context:t},t.Consumer=t};Me.createElement=w1;Me.createFactory=function(t){var e=w1.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:Fg,render:t}};Me.isValidElement=pc;Me.lazy=function(t){return{$$typeof:zg,_payload:{_status:-1,_result:t},_init:Gg}};Me.memo=function(t,e){return{$$typeof:jg,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=oa.transition;oa.transition={};try{t()}finally{oa.transition=e}};Me.unstable_act=y1;Me.useCallback=function(t,e){return sn.current.useCallback(t,e)};Me.useContext=function(t){return sn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return sn.current.useEffect(t,e)};Me.useId=function(){return sn.current.useId()};Me.useImperativeHandle=function(t,e,r){return sn.current.useImperativeHandle(t,e,r)};Me.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return sn.current.useMemo(t,e)};Me.useReducer=function(t,e,r){return sn.current.useReducer(t,e,r)};Me.useRef=function(t){return sn.current.useRef(t)};Me.useState=function(t){return sn.current.useState(t)};Me.useSyncExternalStore=function(t,e,r){return sn.current.useSyncExternalStore(t,e,r)};Me.useTransition=function(){return sn.current.useTransition()};Me.version="18.3.1";h1.exports=Me;var bt=h1.exports;const Fo=hc(bt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=bt,$g=Symbol.for("react.element"),Kg=Symbol.for("react.fragment"),Zg=Object.prototype.hasOwnProperty,Qg=Yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qg={key:!0,ref:!0,__self:!0,__source:!0};function E1(t,e,r){var o,u={},h=null,d=null;r!==void 0&&(h=""+r),e.key!==void 0&&(h=""+e.key),e.ref!==void 0&&(d=e.ref);for(o in e)Zg.call(e,o)&&!qg.hasOwnProperty(o)&&(u[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)u[o]===void 0&&(u[o]=e[o]);return{$$typeof:$g,type:t,key:h,ref:d,props:u,_owner:Qg.current}}Xa.Fragment=Kg;Xa.jsx=E1;Xa.jsxs=E1;c1.exports=Xa;var ce=c1.exports,v1={exports:{}},On={},C1={exports:{}},_1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,Q){var ge=re.length;re.push(Q);e:for(;0<ge;){var Se=ge-1>>>1,ee=re[Se];if(0<u(ee,Q))re[Se]=Q,re[ge]=ee,ge=Se;else break e}}function r(re){return re.length===0?null:re[0]}function o(re){if(re.length===0)return null;var Q=re[0],ge=re.pop();if(ge!==Q){re[0]=ge;e:for(var Se=0,ee=re.length,ke=ee>>>1;Se<ke;){var Ie=2*(Se+1)-1,Ye=re[Ie],le=Ie+1,Je=re[le];if(0>u(Ye,ge))le<ee&&0>u(Je,Ye)?(re[Se]=Je,re[le]=ge,Se=le):(re[Se]=Ye,re[Ie]=ge,Se=Ie);else if(le<ee&&0>u(Je,ge))re[Se]=Je,re[le]=ge,Se=le;else break e}}return Q}function u(re,Q){var ge=re.sortIndex-Q.sortIndex;return ge!==0?ge:re.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;t.unstable_now=function(){return h.now()}}else{var d=Date,w=d.now();t.unstable_now=function(){return d.now()-w}}var p=[],m=[],y=1,v=null,S=3,k=!1,B=!1,L=!1,X=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(re){for(var Q=r(m);Q!==null;){if(Q.callback===null)o(m);else if(Q.startTime<=re)o(m),Q.sortIndex=Q.expirationTime,e(p,Q);else break;Q=r(m)}}function U(re){if(L=!1,O(re),!B)if(r(p)!==null)B=!0,Ce(J);else{var Q=r(m);Q!==null&&K(U,Q.startTime-re)}}function J(re,Q){B=!1,L&&(L=!1,D(R),R=-1),k=!0;var ge=S;try{for(O(Q),v=r(p);v!==null&&(!(v.expirationTime>Q)||re&&!oe());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,S=v.priorityLevel;var ee=Se(v.expirationTime<=Q);Q=t.unstable_now(),typeof ee=="function"?v.callback=ee:v===r(p)&&o(p),O(Q)}else o(p);v=r(p)}if(v!==null)var ke=!0;else{var Ie=r(m);Ie!==null&&K(U,Ie.startTime-Q),ke=!1}return ke}finally{v=null,S=ge,k=!1}}var q=!1,F=null,R=-1,b=5,G=-1;function oe(){return!(t.unstable_now()-G<b)}function Y(){if(F!==null){var re=t.unstable_now();G=re;var Q=!0;try{Q=F(!0,re)}finally{Q?ae():(q=!1,F=null)}}else q=!1}var ae;if(typeof N=="function")ae=function(){N(Y)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,V=me.port2;me.port1.onmessage=Y,ae=function(){V.postMessage(null)}}else ae=function(){X(Y,0)};function Ce(re){F=re,q||(q=!0,ae())}function K(re,Q){R=X(function(){re(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){B||k||(B=!0,Ce(J))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return r(p)},t.unstable_next=function(re){switch(S){case 1:case 2:case 3:var Q=3;break;default:Q=S}var ge=S;S=Q;try{return re()}finally{S=ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,Q){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ge=S;S=re;try{return Q()}finally{S=ge}},t.unstable_scheduleCallback=function(re,Q,ge){var Se=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Se+ge:Se):ge=Se,re){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ge+ee,re={id:y++,callback:Q,priorityLevel:re,startTime:ge,expirationTime:ee,sortIndex:-1},ge>Se?(re.sortIndex=ge,e(m,re),r(p)===null&&re===r(m)&&(L?(D(R),R=-1):L=!0,K(U,ge-Se))):(re.sortIndex=ee,e(p,re),B||k||(B=!0,Ce(J))),re},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(re){var Q=S;return function(){var ge=S;S=Q;try{return re.apply(this,arguments)}finally{S=ge}}}})(_1);C1.exports=_1;var Jg=C1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=bt,bn=Jg;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1=new Set,no={};function Ci(t,e){os(t,e),os(t+"Capture",e)}function os(t,e){for(no[t]=e,t=0;t<e.length;t++)A1.add(e[t])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cu=Object.prototype.hasOwnProperty,t2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kh={},Dh={};function n2(t){return cu.call(Dh,t)?!0:cu.call(kh,t)?!1:t2.test(t)?Dh[t]=!0:(kh[t]=!0,!1)}function r2(t,e,r,o){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function i2(t,e,r,o){if(e===null||typeof e>"u"||r2(t,e,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,r,o,u,h,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=h,this.removeEmptyString=d}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var mc=/[\-:]([a-z])/g;function xc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mc,xc);Yt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mc,xc);Yt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mc,xc);Yt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function wc(t,e,r,o){var u=Yt.hasOwnProperty(e)?Yt[e]:null;(u!==null?u.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(i2(e,r,u,o)&&(r=null),o||u===null?n2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):u.mustUseProperty?t[u.propertyName]=r===null?u.type===3?!1:"":r:(e=u.attributeName,o=u.attributeNamespace,r===null?t.removeAttribute(e):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,o?t.setAttributeNS(o,e,r):t.setAttribute(e,r))))}var _r=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uo=Symbol.for("react.element"),ji=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),yc=Symbol.for("react.strict_mode"),hu=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),Ec=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),du=Symbol.for("react.suspense_list"),vc=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),T1=Symbol.for("react.offscreen"),Mh=Symbol.iterator;function Os(t){return t===null||typeof t!="object"?null:(t=Mh&&t[Mh]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Pl;function Us(t){if(Pl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Pl=e&&e[1]||""}return`
`+Pl+t}var Ll=!1;function Bl(t,e){if(!t||Ll)return"";Ll=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var o=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){o=m}t.call(e.prototype)}else{try{throw Error()}catch(m){o=m}t()}}catch(m){if(m&&o&&typeof m.stack=="string"){for(var u=m.stack.split(`
`),h=o.stack.split(`
`),d=u.length-1,w=h.length-1;1<=d&&0<=w&&u[d]!==h[w];)w--;for(;1<=d&&0<=w;d--,w--)if(u[d]!==h[w]){if(d!==1||w!==1)do if(d--,w--,0>w||u[d]!==h[w]){var p=`
`+u[d].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=d&&0<=w);break}}}finally{Ll=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Us(t):""}function s2(t){switch(t.tag){case 5:return Us(t.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return t=Bl(t.type,!1),t;case 11:return t=Bl(t.type.render,!1),t;case 1:return t=Bl(t.type,!0),t;default:return""}}function gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case ji:return"Portal";case hu:return"Profiler";case yc:return"StrictMode";case fu:return"Suspense";case du:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I1:return(t.displayName||"Context")+".Consumer";case S1:return(t._context.displayName||"Context")+".Provider";case Ec:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vc:return e=t.displayName||null,e!==null?e:gu(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return gu(t(e))}catch{}}return null}function o2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gu(e);case 8:return e===yc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a2(t){var e=b1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,h=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return u.call(this)},set:function(d){o=""+d,h.call(this,d)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jo(t){t._valueTracker||(t._valueTracker=a2(t))}function O1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),o="";return t&&(o=b1(t)?t.checked?"true":"false":t.value),t=o,t!==r?(e.setValue(t),!0):!1}function xa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pu(t,e){var r=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ph(t,e){var r=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;r=Kr(e.value!=null?e.value:r),t._wrapperState={initialChecked:o,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N1(t,e){e=e.checked,e!=null&&wc(t,"checked",e,!1)}function mu(t,e){N1(t,e);var r=Kr(e.value),o=e.type;if(r!=null)o==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xu(t,e.type,r):e.hasOwnProperty("defaultValue")&&xu(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lh(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xu(t,e,r){(e!=="number"||xa(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var js=Array.isArray;function Ji(t,e,r,o){if(t=t.options,e){e={};for(var u=0;u<r.length;u++)e["$"+r[u]]=!0;for(r=0;r<t.length;r++)u=e.hasOwnProperty("$"+t[r].value),t[r].selected!==u&&(t[r].selected=u),u&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Kr(r),e=null,u=0;u<t.length;u++){if(t[u].value===r){t[u].selected=!0,o&&(t[u].defaultSelected=!0);return}e!==null||t[u].disabled||(e=t[u])}e!==null&&(e.selected=!0)}}function wu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bh(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(js(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Kr(r)}}function R1(t,e){var r=Kr(e.value),o=Kr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),o!=null&&(t.defaultValue=""+o)}function Fh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zo,D1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,o,u){MSApp.execUnsafeLocalFunction(function(){return t(e,r,o,u)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zo=zo||document.createElement("div"),zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ro(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l2=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(t){l2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gs[e]=Gs[t]})});function M1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gs.hasOwnProperty(t)&&Gs[t]?(""+e).trim():e+"px"}function P1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var o=r.indexOf("--")===0,u=M1(r,e[r],o);r==="float"&&(r="cssFloat"),o?t.setProperty(r,u):t[r]=u}}var u2=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eu(t,e){if(e){if(u2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function vu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=null;function Cc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _u=null,es=null,ts=null;function Uh(t){if(t=Ao(t)){if(typeof _u!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Qa(e),_u(t.stateNode,t.type,e))}}function L1(t){es?ts?ts.push(t):ts=[t]:es=t}function B1(){if(es){var t=es,e=ts;if(ts=es=null,Uh(t),e)for(t=0;t<e.length;t++)Uh(e[t])}}function F1(t,e){return t(e)}function U1(){}var Fl=!1;function j1(t,e,r){if(Fl)return t(e,r);Fl=!0;try{return F1(t,e,r)}finally{Fl=!1,(es!==null||ts!==null)&&(U1(),B1())}}function io(t,e){var r=t.stateNode;if(r===null)return null;var o=Qa(r);if(o===null)return null;r=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var Au=!1;if(yr)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){Au=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{Au=!1}function c2(t,e,r,o,u,h,d,w,p){var m=Array.prototype.slice.call(arguments,3);try{e.apply(r,m)}catch(y){this.onError(y)}}var Xs=!1,wa=null,ya=!1,Su=null,h2={onError:function(t){Xs=!0,wa=t}};function f2(t,e,r,o,u,h,d,w,p){Xs=!1,wa=null,c2.apply(h2,arguments)}function d2(t,e,r,o,u,h,d,w,p){if(f2.apply(this,arguments),Xs){if(Xs){var m=wa;Xs=!1,wa=null}else throw Error(ne(198));ya||(ya=!0,Su=m)}}function _i(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function z1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jh(t){if(_i(t)!==t)throw Error(ne(188))}function g2(t){var e=t.alternate;if(!e){if(e=_i(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,o=e;;){var u=r.return;if(u===null)break;var h=u.alternate;if(h===null){if(o=u.return,o!==null){r=o;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===r)return jh(u),t;if(h===o)return jh(u),e;h=h.sibling}throw Error(ne(188))}if(r.return!==o.return)r=u,o=h;else{for(var d=!1,w=u.child;w;){if(w===r){d=!0,r=u,o=h;break}if(w===o){d=!0,o=u,r=h;break}w=w.sibling}if(!d){for(w=h.child;w;){if(w===r){d=!0,r=h,o=u;break}if(w===o){d=!0,o=h,r=u;break}w=w.sibling}if(!d)throw Error(ne(189))}}if(r.alternate!==o)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function V1(t){return t=g2(t),t!==null?H1(t):null}function H1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=H1(t);if(e!==null)return e;t=t.sibling}return null}var W1=bn.unstable_scheduleCallback,zh=bn.unstable_cancelCallback,p2=bn.unstable_shouldYield,m2=bn.unstable_requestPaint,Tt=bn.unstable_now,x2=bn.unstable_getCurrentPriorityLevel,_c=bn.unstable_ImmediatePriority,G1=bn.unstable_UserBlockingPriority,Ea=bn.unstable_NormalPriority,w2=bn.unstable_LowPriority,X1=bn.unstable_IdlePriority,Ya=null,ur=null;function y2(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(Ya,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:C2,E2=Math.log,v2=Math.LN2;function C2(t){return t>>>=0,t===0?32:31-(E2(t)/v2|0)|0}var Vo=64,Ho=4194304;function zs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function va(t,e){var r=t.pendingLanes;if(r===0)return 0;var o=0,u=t.suspendedLanes,h=t.pingedLanes,d=r&268435455;if(d!==0){var w=d&~u;w!==0?o=zs(w):(h&=d,h!==0&&(o=zs(h)))}else d=r&~u,d!==0?o=zs(d):h!==0&&(o=zs(h));if(o===0)return 0;if(e!==0&&e!==o&&!(e&u)&&(u=o&-o,h=e&-e,u>=h||u===16&&(h&4194240)!==0))return e;if(o&4&&(o|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)r=31-Zn(e),u=1<<r,o|=t[r],e&=~u;return o}function _2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A2(t,e){for(var r=t.suspendedLanes,o=t.pingedLanes,u=t.expirationTimes,h=t.pendingLanes;0<h;){var d=31-Zn(h),w=1<<d,p=u[d];p===-1?(!(w&r)||w&o)&&(u[d]=_2(w,e)):p<=e&&(t.expiredLanes|=w),h&=~w}}function Iu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Y1(){var t=Vo;return Vo<<=1,!(Vo&4194240)&&(Vo=64),t}function Ul(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Co(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=r}function S2(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<r;){var u=31-Zn(r),h=1<<u;e[u]=0,o[u]=-1,t[u]=-1,r&=~h}}function Ac(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var o=31-Zn(r),u=1<<o;u&e|t[o]&e&&(t[o]|=e),r&=~u}}var Ze=0;function $1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K1,Sc,Z1,Q1,q1,Tu=!1,Wo=[],zr=null,Vr=null,Hr=null,so=new Map,oo=new Map,Lr=[],I2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vh(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":so.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(e.pointerId)}}function Rs(t,e,r,o,u,h){return t===null||t.nativeEvent!==h?(t={blockedOn:e,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[u]},e!==null&&(e=Ao(e),e!==null&&Sc(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,u!==null&&e.indexOf(u)===-1&&e.push(u),t)}function T2(t,e,r,o,u){switch(e){case"focusin":return zr=Rs(zr,t,e,r,o,u),!0;case"dragenter":return Vr=Rs(Vr,t,e,r,o,u),!0;case"mouseover":return Hr=Rs(Hr,t,e,r,o,u),!0;case"pointerover":var h=u.pointerId;return so.set(h,Rs(so.get(h)||null,t,e,r,o,u)),!0;case"gotpointercapture":return h=u.pointerId,oo.set(h,Rs(oo.get(h)||null,t,e,r,o,u)),!0}return!1}function J1(t){var e=hi(t.target);if(e!==null){var r=_i(e);if(r!==null){if(e=r.tag,e===13){if(e=z1(r),e!==null){t.blockedOn=e,q1(t.priority,function(){Z1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function aa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=bu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Cu=o,r.target.dispatchEvent(o),Cu=null}else return e=Ao(r),e!==null&&Sc(e),t.blockedOn=r,!1;e.shift()}return!0}function Hh(t,e,r){aa(t)&&r.delete(e)}function b2(){Tu=!1,zr!==null&&aa(zr)&&(zr=null),Vr!==null&&aa(Vr)&&(Vr=null),Hr!==null&&aa(Hr)&&(Hr=null),so.forEach(Hh),oo.forEach(Hh)}function ks(t,e){t.blockedOn===e&&(t.blockedOn=null,Tu||(Tu=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,b2)))}function ao(t){function e(u){return ks(u,t)}if(0<Wo.length){ks(Wo[0],t);for(var r=1;r<Wo.length;r++){var o=Wo[r];o.blockedOn===t&&(o.blockedOn=null)}}for(zr!==null&&ks(zr,t),Vr!==null&&ks(Vr,t),Hr!==null&&ks(Hr,t),so.forEach(e),oo.forEach(e),r=0;r<Lr.length;r++)o=Lr[r],o.blockedOn===t&&(o.blockedOn=null);for(;0<Lr.length&&(r=Lr[0],r.blockedOn===null);)J1(r),r.blockedOn===null&&Lr.shift()}var ns=_r.ReactCurrentBatchConfig,Ca=!0;function O2(t,e,r,o){var u=Ze,h=ns.transition;ns.transition=null;try{Ze=1,Ic(t,e,r,o)}finally{Ze=u,ns.transition=h}}function N2(t,e,r,o){var u=Ze,h=ns.transition;ns.transition=null;try{Ze=4,Ic(t,e,r,o)}finally{Ze=u,ns.transition=h}}function Ic(t,e,r,o){if(Ca){var u=bu(t,e,r,o);if(u===null)Kl(t,e,o,_a,r),Vh(t,o);else if(T2(u,t,e,r,o))o.stopPropagation();else if(Vh(t,o),e&4&&-1<I2.indexOf(t)){for(;u!==null;){var h=Ao(u);if(h!==null&&K1(h),h=bu(t,e,r,o),h===null&&Kl(t,e,o,_a,r),h===u)break;u=h}u!==null&&o.stopPropagation()}else Kl(t,e,o,null,r)}}var _a=null;function bu(t,e,r,o){if(_a=null,t=Cc(o),t=hi(t),t!==null)if(e=_i(t),e===null)t=null;else if(r=e.tag,r===13){if(t=z1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _a=t,null}function ef(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x2()){case _c:return 1;case G1:return 4;case Ea:case w2:return 16;case X1:return 536870912;default:return 16}default:return 16}}var Ur=null,Tc=null,la=null;function tf(){if(la)return la;var t,e=Tc,r=e.length,o,u="value"in Ur?Ur.value:Ur.textContent,h=u.length;for(t=0;t<r&&e[t]===u[t];t++);var d=r-t;for(o=1;o<=d&&e[r-o]===u[h-o];o++);return la=u.slice(t,1<o?1-o:void 0)}function ua(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Go(){return!0}function Wh(){return!1}function Nn(t){function e(r,o,u,h,d){this._reactName=r,this._targetInst=u,this.type=o,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(r=t[w],this[w]=r?r(h):h[w]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Go:Wh,this.isPropagationStopped=Wh,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),e}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bc=Nn(ms),_o=yt({},ms,{view:0,detail:0}),R2=Nn(_o),jl,zl,Ds,$a=yt({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(jl=t.screenX-Ds.screenX,zl=t.screenY-Ds.screenY):zl=jl=0,Ds=t),jl)},movementY:function(t){return"movementY"in t?t.movementY:zl}}),Gh=Nn($a),k2=yt({},$a,{dataTransfer:0}),D2=Nn(k2),M2=yt({},_o,{relatedTarget:0}),Vl=Nn(M2),P2=yt({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),L2=Nn(P2),B2=yt({},ms,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),F2=Nn(B2),U2=yt({},ms,{data:0}),Xh=Nn(U2),j2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=V2[t])?!!e[t]:!1}function Oc(){return H2}var W2=yt({},_o,{key:function(t){if(t.key){var e=j2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ua(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(t){return t.type==="keypress"?ua(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ua(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),G2=Nn(W2),X2=yt({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=Nn(X2),Y2=yt({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),$2=Nn(Y2),K2=yt({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z2=Nn(K2),Q2=yt({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q2=Nn(Q2),J2=[9,13,27,32],Nc=yr&&"CompositionEvent"in window,Ys=null;yr&&"documentMode"in document&&(Ys=document.documentMode);var ep=yr&&"TextEvent"in window&&!Ys,nf=yr&&(!Nc||Ys&&8<Ys&&11>=Ys),$h=" ",Kh=!1;function rf(t,e){switch(t){case"keyup":return J2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function tp(t,e){switch(t){case"compositionend":return sf(e);case"keypress":return e.which!==32?null:(Kh=!0,$h);case"textInput":return t=e.data,t===$h&&Kh?null:t;default:return null}}function np(t,e){if(Vi)return t==="compositionend"||!Nc&&rf(t,e)?(t=tf(),la=Tc=Ur=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nf&&e.locale!=="ko"?null:e.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rp[t.type]:e==="textarea"}function of(t,e,r,o){L1(o),e=Aa(e,"onChange"),0<e.length&&(r=new bc("onChange","change",null,r,o),t.push({event:r,listeners:e}))}var $s=null,lo=null;function ip(t){xf(t,0)}function Ka(t){var e=Gi(t);if(O1(e))return t}function sp(t,e){if(t==="change")return e}var af=!1;if(yr){var Hl;if(yr){var Wl="oninput"in document;if(!Wl){var Qh=document.createElement("div");Qh.setAttribute("oninput","return;"),Wl=typeof Qh.oninput=="function"}Hl=Wl}else Hl=!1;af=Hl&&(!document.documentMode||9<document.documentMode)}function qh(){$s&&($s.detachEvent("onpropertychange",lf),lo=$s=null)}function lf(t){if(t.propertyName==="value"&&Ka(lo)){var e=[];of(e,lo,t,Cc(t)),j1(ip,e)}}function op(t,e,r){t==="focusin"?(qh(),$s=e,lo=r,$s.attachEvent("onpropertychange",lf)):t==="focusout"&&qh()}function ap(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ka(lo)}function lp(t,e){if(t==="click")return Ka(e)}function up(t,e){if(t==="input"||t==="change")return Ka(e)}function cp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:cp;function uo(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var u=r[o];if(!cu.call(e,u)||!qn(t[u],e[u]))return!1}return!0}function Jh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e0(t,e){var r=Jh(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=e&&o>=e)return{node:r,offset:e-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jh(r)}}function uf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cf(){for(var t=window,e=xa();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=xa(t.document)}return e}function Rc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hp(t){var e=cf(),r=t.focusedElem,o=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&uf(r.ownerDocument.documentElement,r)){if(o!==null&&Rc(r)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var u=r.textContent.length,h=Math.min(o.start,u);o=o.end===void 0?h:Math.min(o.end,u),!t.extend&&h>o&&(u=o,o=h,h=u),u=e0(r,h);var d=e0(r,o);u&&d&&(t.rangeCount!==1||t.anchorNode!==u.node||t.anchorOffset!==u.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(u.node,u.offset),t.removeAllRanges(),h>o?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fp=yr&&"documentMode"in document&&11>=document.documentMode,Hi=null,Ou=null,Ks=null,Nu=!1;function t0(t,e,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nu||Hi==null||Hi!==xa(o)||(o=Hi,"selectionStart"in o&&Rc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ks&&uo(Ks,o)||(Ks=o,o=Aa(Ou,"onSelect"),0<o.length&&(e=new bc("onSelect","select",null,e,r),t.push({event:e,listeners:o}),e.target=Hi)))}function Xo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Wi={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Gl={},hf={};yr&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function Za(t){if(Gl[t])return Gl[t];if(!Wi[t])return t;var e=Wi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hf)return Gl[t]=e[r];return t}var ff=Za("animationend"),df=Za("animationiteration"),gf=Za("animationstart"),pf=Za("transitionend"),mf=new Map,n0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){mf.set(t,e),Ci(e,[t])}for(var Xl=0;Xl<n0.length;Xl++){var Yl=n0[Xl],dp=Yl.toLowerCase(),gp=Yl[0].toUpperCase()+Yl.slice(1);Qr(dp,"on"+gp)}Qr(ff,"onAnimationEnd");Qr(df,"onAnimationIteration");Qr(gf,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(pf,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vs));function r0(t,e,r){var o=t.type||"unknown-event";t.currentTarget=r,d2(o,e,void 0,t),t.currentTarget=null}function xf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],u=o.event;o=o.listeners;e:{var h=void 0;if(e)for(var d=o.length-1;0<=d;d--){var w=o[d],p=w.instance,m=w.currentTarget;if(w=w.listener,p!==h&&u.isPropagationStopped())break e;r0(u,w,m),h=p}else for(d=0;d<o.length;d++){if(w=o[d],p=w.instance,m=w.currentTarget,w=w.listener,p!==h&&u.isPropagationStopped())break e;r0(u,w,m),h=p}}}if(ya)throw t=Su,ya=!1,Su=null,t}function at(t,e){var r=e[Pu];r===void 0&&(r=e[Pu]=new Set);var o=t+"__bubble";r.has(o)||(wf(e,t,2,!1),r.add(o))}function $l(t,e,r){var o=0;e&&(o|=4),wf(r,t,o,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function co(t){if(!t[Yo]){t[Yo]=!0,A1.forEach(function(r){r!=="selectionchange"&&(pp.has(r)||$l(r,!1,t),$l(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,$l("selectionchange",!1,e))}}function wf(t,e,r,o){switch(ef(e)){case 1:var u=O2;break;case 4:u=N2;break;default:u=Ic}r=u.bind(null,e,r,t),u=void 0,!Au||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(u=!0),o?u!==void 0?t.addEventListener(e,r,{capture:!0,passive:u}):t.addEventListener(e,r,!0):u!==void 0?t.addEventListener(e,r,{passive:u}):t.addEventListener(e,r,!1)}function Kl(t,e,r,o,u){var h=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var w=o.stateNode.containerInfo;if(w===u||w.nodeType===8&&w.parentNode===u)break;if(d===4)for(d=o.return;d!==null;){var p=d.tag;if((p===3||p===4)&&(p=d.stateNode.containerInfo,p===u||p.nodeType===8&&p.parentNode===u))return;d=d.return}for(;w!==null;){if(d=hi(w),d===null)return;if(p=d.tag,p===5||p===6){o=h=d;continue e}w=w.parentNode}}o=o.return}j1(function(){var m=h,y=Cc(r),v=[];e:{var S=mf.get(t);if(S!==void 0){var k=bc,B=t;switch(t){case"keypress":if(ua(r)===0)break e;case"keydown":case"keyup":k=G2;break;case"focusin":B="focus",k=Vl;break;case"focusout":B="blur",k=Vl;break;case"beforeblur":case"afterblur":k=Vl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=$2;break;case ff:case df:case gf:k=L2;break;case pf:k=Z2;break;case"scroll":k=R2;break;case"wheel":k=q2;break;case"copy":case"cut":case"paste":k=F2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Yh}var L=(e&4)!==0,X=!L&&t==="scroll",D=L?S!==null?S+"Capture":null:S;L=[];for(var N=m,O;N!==null;){O=N;var U=O.stateNode;if(O.tag===5&&U!==null&&(O=U,D!==null&&(U=io(N,D),U!=null&&L.push(ho(N,U,O)))),X)break;N=N.return}0<L.length&&(S=new k(S,B,null,r,y),v.push({event:S,listeners:L}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",S&&r!==Cu&&(B=r.relatedTarget||r.fromElement)&&(hi(B)||B[Er]))break e;if((k||S)&&(S=y.window===y?y:(S=y.ownerDocument)?S.defaultView||S.parentWindow:window,k?(B=r.relatedTarget||r.toElement,k=m,B=B?hi(B):null,B!==null&&(X=_i(B),B!==X||B.tag!==5&&B.tag!==6)&&(B=null)):(k=null,B=m),k!==B)){if(L=Gh,U="onMouseLeave",D="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(L=Yh,U="onPointerLeave",D="onPointerEnter",N="pointer"),X=k==null?S:Gi(k),O=B==null?S:Gi(B),S=new L(U,N+"leave",k,r,y),S.target=X,S.relatedTarget=O,U=null,hi(y)===m&&(L=new L(D,N+"enter",B,r,y),L.target=O,L.relatedTarget=X,U=L),X=U,k&&B)t:{for(L=k,D=B,N=0,O=L;O;O=Li(O))N++;for(O=0,U=D;U;U=Li(U))O++;for(;0<N-O;)L=Li(L),N--;for(;0<O-N;)D=Li(D),O--;for(;N--;){if(L===D||D!==null&&L===D.alternate)break t;L=Li(L),D=Li(D)}L=null}else L=null;k!==null&&i0(v,S,k,L,!1),B!==null&&X!==null&&i0(v,X,B,L,!0)}}e:{if(S=m?Gi(m):window,k=S.nodeName&&S.nodeName.toLowerCase(),k==="select"||k==="input"&&S.type==="file")var J=sp;else if(Zh(S))if(af)J=up;else{J=ap;var q=op}else(k=S.nodeName)&&k.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(J=lp);if(J&&(J=J(t,m))){of(v,J,r,y);break e}q&&q(t,S,m),t==="focusout"&&(q=S._wrapperState)&&q.controlled&&S.type==="number"&&xu(S,"number",S.value)}switch(q=m?Gi(m):window,t){case"focusin":(Zh(q)||q.contentEditable==="true")&&(Hi=q,Ou=m,Ks=null);break;case"focusout":Ks=Ou=Hi=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,t0(v,r,y);break;case"selectionchange":if(fp)break;case"keydown":case"keyup":t0(v,r,y)}var F;if(Nc)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Vi?rf(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(nf&&r.locale!=="ko"&&(Vi||R!=="onCompositionStart"?R==="onCompositionEnd"&&Vi&&(F=tf()):(Ur=y,Tc="value"in Ur?Ur.value:Ur.textContent,Vi=!0)),q=Aa(m,R),0<q.length&&(R=new Xh(R,t,null,r,y),v.push({event:R,listeners:q}),F?R.data=F:(F=sf(r),F!==null&&(R.data=F)))),(F=ep?tp(t,r):np(t,r))&&(m=Aa(m,"onBeforeInput"),0<m.length&&(y=new Xh("onBeforeInput","beforeinput",null,r,y),v.push({event:y,listeners:m}),y.data=F))}xf(v,e)})}function ho(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Aa(t,e){for(var r=e+"Capture",o=[];t!==null;){var u=t,h=u.stateNode;u.tag===5&&h!==null&&(u=h,h=io(t,r),h!=null&&o.unshift(ho(t,h,u)),h=io(t,e),h!=null&&o.push(ho(t,h,u))),t=t.return}return o}function Li(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i0(t,e,r,o,u){for(var h=e._reactName,d=[];r!==null&&r!==o;){var w=r,p=w.alternate,m=w.stateNode;if(p!==null&&p===o)break;w.tag===5&&m!==null&&(w=m,u?(p=io(r,h),p!=null&&d.unshift(ho(r,p,w))):u||(p=io(r,h),p!=null&&d.push(ho(r,p,w)))),r=r.return}d.length!==0&&t.push({event:e,listeners:d})}var mp=/\r\n?/g,xp=/\u0000|\uFFFD/g;function s0(t){return(typeof t=="string"?t:""+t).replace(mp,`
`).replace(xp,"")}function $o(t,e,r){if(e=s0(e),s0(t)!==e&&r)throw Error(ne(425))}function Sa(){}var Ru=null,ku=null;function Du(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,wp=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,yp=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(t){return o0.resolve(null).then(t).catch(Ep)}:Mu;function Ep(t){setTimeout(function(){throw t})}function Zl(t,e){var r=e,o=0;do{var u=r.nextSibling;if(t.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(o===0){t.removeChild(u),ao(e);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=u}while(r);ao(e)}function Wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var xs=Math.random().toString(36).slice(2),lr="__reactFiber$"+xs,fo="__reactProps$"+xs,Er="__reactContainer$"+xs,Pu="__reactEvents$"+xs,vp="__reactListeners$"+xs,Cp="__reactHandles$"+xs;function hi(t){var e=t[lr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Er]||r[lr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=a0(t);t!==null;){if(r=t[lr])return r;t=a0(t)}return e}t=r,r=t.parentNode}return null}function Ao(t){return t=t[lr]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Qa(t){return t[fo]||null}var Lu=[],Xi=-1;function qr(t){return{current:t}}function ut(t){0>Xi||(t.current=Lu[Xi],Lu[Xi]=null,Xi--)}function it(t,e){Xi++,Lu[Xi]=t.current,t.current=e}var Zr={},en=qr(Zr),wn=qr(!1),mi=Zr;function as(t,e){var r=t.type.contextTypes;if(!r)return Zr;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var u={},h;for(h in r)u[h]=e[h];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=u),u}function yn(t){return t=t.childContextTypes,t!=null}function Ia(){ut(wn),ut(en)}function l0(t,e,r){if(en.current!==Zr)throw Error(ne(168));it(en,e),it(wn,r)}function yf(t,e,r){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var u in o)if(!(u in e))throw Error(ne(108,o2(t)||"Unknown",u));return yt({},r,o)}function Ta(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,mi=en.current,it(en,t),it(wn,wn.current),!0}function u0(t,e,r){var o=t.stateNode;if(!o)throw Error(ne(169));r?(t=yf(t,e,mi),o.__reactInternalMemoizedMergedChildContext=t,ut(wn),ut(en),it(en,t)):ut(wn),it(wn,r)}var pr=null,qa=!1,Ql=!1;function Ef(t){pr===null?pr=[t]:pr.push(t)}function _p(t){qa=!0,Ef(t)}function Jr(){if(!Ql&&pr!==null){Ql=!0;var t=0,e=Ze;try{var r=pr;for(Ze=1;t<r.length;t++){var o=r[t];do o=o(!0);while(o!==null)}pr=null,qa=!1}catch(u){throw pr!==null&&(pr=pr.slice(t+1)),W1(_c,Jr),u}finally{Ze=e,Ql=!1}}return null}var Yi=[],$i=0,ba=null,Oa=0,Ln=[],Bn=0,xi=null,mr=1,xr="";function ai(t,e){Yi[$i++]=Oa,Yi[$i++]=ba,ba=t,Oa=e}function vf(t,e,r){Ln[Bn++]=mr,Ln[Bn++]=xr,Ln[Bn++]=xi,xi=t;var o=mr;t=xr;var u=32-Zn(o)-1;o&=~(1<<u),r+=1;var h=32-Zn(e)+u;if(30<h){var d=u-u%5;h=(o&(1<<d)-1).toString(32),o>>=d,u-=d,mr=1<<32-Zn(e)+u|r<<u|o,xr=h+t}else mr=1<<h|r<<u|o,xr=t}function kc(t){t.return!==null&&(ai(t,1),vf(t,1,0))}function Dc(t){for(;t===ba;)ba=Yi[--$i],Yi[$i]=null,Oa=Yi[--$i],Yi[$i]=null;for(;t===xi;)xi=Ln[--Bn],Ln[Bn]=null,xr=Ln[--Bn],Ln[Bn]=null,mr=Ln[--Bn],Ln[Bn]=null}var Tn=null,In=null,dt=!1,Kn=null;function Cf(t,e){var r=Fn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function c0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,In=Wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,In=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xi!==null?{id:mr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Tn=t,In=null,!0):!1;default:return!1}}function Bu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(dt){var e=In;if(e){var r=e;if(!c0(t,e)){if(Bu(t))throw Error(ne(418));e=Wr(r.nextSibling);var o=Tn;e&&c0(t,e)?Cf(o,r):(t.flags=t.flags&-4097|2,dt=!1,Tn=t)}}else{if(Bu(t))throw Error(ne(418));t.flags=t.flags&-4097|2,dt=!1,Tn=t}}}function h0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Ko(t){if(t!==Tn)return!1;if(!dt)return h0(t),dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Du(t.type,t.memoizedProps)),e&&(e=In)){if(Bu(t))throw _f(),Error(ne(418));for(;e;)Cf(t,e),e=Wr(e.nextSibling)}if(h0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){In=Wr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}In=null}}else In=Tn?Wr(t.stateNode.nextSibling):null;return!0}function _f(){for(var t=In;t;)t=Wr(t.nextSibling)}function ls(){In=Tn=null,dt=!1}function Mc(t){Kn===null?Kn=[t]:Kn.push(t)}var Ap=_r.ReactCurrentBatchConfig;function Ms(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var o=r.stateNode}if(!o)throw Error(ne(147,t));var u=o,h=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===h?e.ref:(e=function(d){var w=u.refs;d===null?delete w[h]:w[h]=d},e._stringRef=h,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Zo(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f0(t){var e=t._init;return e(t._payload)}function Af(t){function e(D,N){if(t){var O=D.deletions;O===null?(D.deletions=[N],D.flags|=16):O.push(N)}}function r(D,N){if(!t)return null;for(;N!==null;)e(D,N),N=N.sibling;return null}function o(D,N){for(D=new Map;N!==null;)N.key!==null?D.set(N.key,N):D.set(N.index,N),N=N.sibling;return D}function u(D,N){return D=$r(D,N),D.index=0,D.sibling=null,D}function h(D,N,O){return D.index=O,t?(O=D.alternate,O!==null?(O=O.index,O<N?(D.flags|=2,N):O):(D.flags|=2,N)):(D.flags|=1048576,N)}function d(D){return t&&D.alternate===null&&(D.flags|=2),D}function w(D,N,O,U){return N===null||N.tag!==6?(N=iu(O,D.mode,U),N.return=D,N):(N=u(N,O),N.return=D,N)}function p(D,N,O,U){var J=O.type;return J===zi?y(D,N,O.props.children,U,O.key):N!==null&&(N.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Dr&&f0(J)===N.type)?(U=u(N,O.props),U.ref=Ms(D,N,O),U.return=D,U):(U=ma(O.type,O.key,O.props,null,D.mode,U),U.ref=Ms(D,N,O),U.return=D,U)}function m(D,N,O,U){return N===null||N.tag!==4||N.stateNode.containerInfo!==O.containerInfo||N.stateNode.implementation!==O.implementation?(N=su(O,D.mode,U),N.return=D,N):(N=u(N,O.children||[]),N.return=D,N)}function y(D,N,O,U,J){return N===null||N.tag!==7?(N=pi(O,D.mode,U,J),N.return=D,N):(N=u(N,O),N.return=D,N)}function v(D,N,O){if(typeof N=="string"&&N!==""||typeof N=="number")return N=iu(""+N,D.mode,O),N.return=D,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Uo:return O=ma(N.type,N.key,N.props,null,D.mode,O),O.ref=Ms(D,null,N),O.return=D,O;case ji:return N=su(N,D.mode,O),N.return=D,N;case Dr:var U=N._init;return v(D,U(N._payload),O)}if(js(N)||Os(N))return N=pi(N,D.mode,O,null),N.return=D,N;Zo(D,N)}return null}function S(D,N,O,U){var J=N!==null?N.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return J!==null?null:w(D,N,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Uo:return O.key===J?p(D,N,O,U):null;case ji:return O.key===J?m(D,N,O,U):null;case Dr:return J=O._init,S(D,N,J(O._payload),U)}if(js(O)||Os(O))return J!==null?null:y(D,N,O,U,null);Zo(D,O)}return null}function k(D,N,O,U,J){if(typeof U=="string"&&U!==""||typeof U=="number")return D=D.get(O)||null,w(N,D,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Uo:return D=D.get(U.key===null?O:U.key)||null,p(N,D,U,J);case ji:return D=D.get(U.key===null?O:U.key)||null,m(N,D,U,J);case Dr:var q=U._init;return k(D,N,O,q(U._payload),J)}if(js(U)||Os(U))return D=D.get(O)||null,y(N,D,U,J,null);Zo(N,U)}return null}function B(D,N,O,U){for(var J=null,q=null,F=N,R=N=0,b=null;F!==null&&R<O.length;R++){F.index>R?(b=F,F=null):b=F.sibling;var G=S(D,F,O[R],U);if(G===null){F===null&&(F=b);break}t&&F&&G.alternate===null&&e(D,F),N=h(G,N,R),q===null?J=G:q.sibling=G,q=G,F=b}if(R===O.length)return r(D,F),dt&&ai(D,R),J;if(F===null){for(;R<O.length;R++)F=v(D,O[R],U),F!==null&&(N=h(F,N,R),q===null?J=F:q.sibling=F,q=F);return dt&&ai(D,R),J}for(F=o(D,F);R<O.length;R++)b=k(F,D,R,O[R],U),b!==null&&(t&&b.alternate!==null&&F.delete(b.key===null?R:b.key),N=h(b,N,R),q===null?J=b:q.sibling=b,q=b);return t&&F.forEach(function(oe){return e(D,oe)}),dt&&ai(D,R),J}function L(D,N,O,U){var J=Os(O);if(typeof J!="function")throw Error(ne(150));if(O=J.call(O),O==null)throw Error(ne(151));for(var q=J=null,F=N,R=N=0,b=null,G=O.next();F!==null&&!G.done;R++,G=O.next()){F.index>R?(b=F,F=null):b=F.sibling;var oe=S(D,F,G.value,U);if(oe===null){F===null&&(F=b);break}t&&F&&oe.alternate===null&&e(D,F),N=h(oe,N,R),q===null?J=oe:q.sibling=oe,q=oe,F=b}if(G.done)return r(D,F),dt&&ai(D,R),J;if(F===null){for(;!G.done;R++,G=O.next())G=v(D,G.value,U),G!==null&&(N=h(G,N,R),q===null?J=G:q.sibling=G,q=G);return dt&&ai(D,R),J}for(F=o(D,F);!G.done;R++,G=O.next())G=k(F,D,R,G.value,U),G!==null&&(t&&G.alternate!==null&&F.delete(G.key===null?R:G.key),N=h(G,N,R),q===null?J=G:q.sibling=G,q=G);return t&&F.forEach(function(Y){return e(D,Y)}),dt&&ai(D,R),J}function X(D,N,O,U){if(typeof O=="object"&&O!==null&&O.type===zi&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Uo:e:{for(var J=O.key,q=N;q!==null;){if(q.key===J){if(J=O.type,J===zi){if(q.tag===7){r(D,q.sibling),N=u(q,O.props.children),N.return=D,D=N;break e}}else if(q.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===Dr&&f0(J)===q.type){r(D,q.sibling),N=u(q,O.props),N.ref=Ms(D,q,O),N.return=D,D=N;break e}r(D,q);break}else e(D,q);q=q.sibling}O.type===zi?(N=pi(O.props.children,D.mode,U,O.key),N.return=D,D=N):(U=ma(O.type,O.key,O.props,null,D.mode,U),U.ref=Ms(D,N,O),U.return=D,D=U)}return d(D);case ji:e:{for(q=O.key;N!==null;){if(N.key===q)if(N.tag===4&&N.stateNode.containerInfo===O.containerInfo&&N.stateNode.implementation===O.implementation){r(D,N.sibling),N=u(N,O.children||[]),N.return=D,D=N;break e}else{r(D,N);break}else e(D,N);N=N.sibling}N=su(O,D.mode,U),N.return=D,D=N}return d(D);case Dr:return q=O._init,X(D,N,q(O._payload),U)}if(js(O))return B(D,N,O,U);if(Os(O))return L(D,N,O,U);Zo(D,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,N!==null&&N.tag===6?(r(D,N.sibling),N=u(N,O),N.return=D,D=N):(r(D,N),N=iu(O,D.mode,U),N.return=D,D=N),d(D)):r(D,N)}return X}var us=Af(!0),Sf=Af(!1),Na=qr(null),Ra=null,Ki=null,Pc=null;function Lc(){Pc=Ki=Ra=null}function Bc(t){var e=Na.current;ut(Na),t._currentValue=e}function Uu(t,e,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===r)break;t=t.return}}function rs(t,e){Ra=t,Pc=Ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(Pc!==t)if(t={context:t,memoizedValue:e,next:null},Ki===null){if(Ra===null)throw Error(ne(308));Ki=t,Ra.dependencies={lanes:0,firstContext:t}}else Ki=Ki.next=t;return e}var fi=null;function Fc(t){fi===null?fi=[t]:fi.push(t)}function If(t,e,r,o){var u=e.interleaved;return u===null?(r.next=r,Fc(e)):(r.next=u.next,u.next=r),e.interleaved=r,vr(t,o)}function vr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Mr=!1;function Uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,je&2){var u=o.pending;return u===null?e.next=e:(e.next=u.next,u.next=e),o.pending=e,vr(t,r)}return u=o.interleaved,u===null?(e.next=e,Fc(o)):(e.next=u.next,u.next=e),o.interleaved=e,vr(t,r)}function ca(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,Ac(t,r)}}function d0(t,e){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var u=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?u=h=d:h=h.next=d,r=r.next}while(r!==null);h===null?u=h=e:h=h.next=e}else u=h=e;r={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:o.shared,effects:o.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ka(t,e,r,o){var u=t.updateQueue;Mr=!1;var h=u.firstBaseUpdate,d=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var p=w,m=p.next;p.next=null,d===null?h=m:d.next=m,d=p;var y=t.alternate;y!==null&&(y=y.updateQueue,w=y.lastBaseUpdate,w!==d&&(w===null?y.firstBaseUpdate=m:w.next=m,y.lastBaseUpdate=p))}if(h!==null){var v=u.baseState;d=0,y=m=p=null,w=h;do{var S=w.lane,k=w.eventTime;if((o&S)===S){y!==null&&(y=y.next={eventTime:k,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var B=t,L=w;switch(S=e,k=r,L.tag){case 1:if(B=L.payload,typeof B=="function"){v=B.call(k,v,S);break e}v=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=L.payload,S=typeof B=="function"?B.call(k,v,S):B,S==null)break e;v=yt({},v,S);break e;case 2:Mr=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,S=u.effects,S===null?u.effects=[w]:S.push(w))}else k={eventTime:k,lane:S,tag:w.tag,payload:w.payload,callback:w.callback,next:null},y===null?(m=y=k,p=v):y=y.next=k,d|=S;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;S=w,w=S.next,S.next=null,u.lastBaseUpdate=S,u.shared.pending=null}}while(!0);if(y===null&&(p=v),u.baseState=p,u.firstBaseUpdate=m,u.lastBaseUpdate=y,e=u.shared.interleaved,e!==null){u=e;do d|=u.lane,u=u.next;while(u!==e)}else h===null&&(u.shared.lanes=0);yi|=d,t.lanes=d,t.memoizedState=v}}function g0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],u=o.callback;if(u!==null){if(o.callback=null,o=r,typeof u!="function")throw Error(ne(191,u));u.call(o)}}}var So={},cr=qr(So),go=qr(So),po=qr(So);function di(t){if(t===So)throw Error(ne(174));return t}function jc(t,e){switch(it(po,e),it(go,t),it(cr,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yu(e,t)}ut(cr),it(cr,e)}function cs(){ut(cr),ut(go),ut(po)}function bf(t){di(po.current);var e=di(cr.current),r=yu(e,t.type);e!==r&&(it(go,t),it(cr,r))}function zc(t){go.current===t&&(ut(cr),ut(go))}var xt=qr(0);function Da(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ql=[];function Vc(){for(var t=0;t<ql.length;t++)ql[t]._workInProgressVersionPrimary=null;ql.length=0}var ha=_r.ReactCurrentDispatcher,Jl=_r.ReactCurrentBatchConfig,wi=0,wt=null,kt=null,Ft=null,Ma=!1,Zs=!1,mo=0,Sp=0;function Qt(){throw Error(ne(321))}function Hc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!qn(t[r],e[r]))return!1;return!0}function Wc(t,e,r,o,u,h){if(wi=h,wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ha.current=t===null||t.memoizedState===null?Op:Np,t=r(o,u),Zs){h=0;do{if(Zs=!1,mo=0,25<=h)throw Error(ne(301));h+=1,Ft=kt=null,e.updateQueue=null,ha.current=Rp,t=r(o,u)}while(Zs)}if(ha.current=Pa,e=kt!==null&&kt.next!==null,wi=0,Ft=kt=wt=null,Ma=!1,e)throw Error(ne(300));return t}function Gc(){var t=mo!==0;return mo=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?wt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function zn(){if(kt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=Ft===null?wt.memoizedState:Ft.next;if(e!==null)Ft=e,kt=t;else{if(t===null)throw Error(ne(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ft===null?wt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function xo(t,e){return typeof e=="function"?e(t):e}function eu(t){var e=zn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var o=kt,u=o.baseQueue,h=r.pending;if(h!==null){if(u!==null){var d=u.next;u.next=h.next,h.next=d}o.baseQueue=u=h,r.pending=null}if(u!==null){h=u.next,o=o.baseState;var w=d=null,p=null,m=h;do{var y=m.lane;if((wi&y)===y)p!==null&&(p=p.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),o=m.hasEagerState?m.eagerState:t(o,m.action);else{var v={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};p===null?(w=p=v,d=o):p=p.next=v,wt.lanes|=y,yi|=y}m=m.next}while(m!==null&&m!==h);p===null?d=o:p.next=w,qn(o,e.memoizedState)||(xn=!0),e.memoizedState=o,e.baseState=d,e.baseQueue=p,r.lastRenderedState=o}if(t=r.interleaved,t!==null){u=t;do h=u.lane,wt.lanes|=h,yi|=h,u=u.next;while(u!==t)}else u===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function tu(t){var e=zn(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var o=r.dispatch,u=r.pending,h=e.memoizedState;if(u!==null){r.pending=null;var d=u=u.next;do h=t(h,d.action),d=d.next;while(d!==u);qn(h,e.memoizedState)||(xn=!0),e.memoizedState=h,e.baseQueue===null&&(e.baseState=h),r.lastRenderedState=h}return[h,o]}function Of(){}function Nf(t,e){var r=wt,o=zn(),u=e(),h=!qn(o.memoizedState,u);if(h&&(o.memoizedState=u,xn=!0),o=o.queue,Xc(Df.bind(null,r,o,t),[t]),o.getSnapshot!==e||h||Ft!==null&&Ft.memoizedState.tag&1){if(r.flags|=2048,wo(9,kf.bind(null,r,o,u,e),void 0,null),jt===null)throw Error(ne(349));wi&30||Rf(r,e,u)}return u}function Rf(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function kf(t,e,r,o){e.value=r,e.getSnapshot=o,Mf(e)&&Pf(t)}function Df(t,e,r){return r(function(){Mf(e)&&Pf(t)})}function Mf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!qn(t,r)}catch{return!0}}function Pf(t){var e=vr(t,1);e!==null&&Qn(e,t,1,-1)}function p0(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=bp.bind(null,wt,t),[e.memoizedState,t]}function wo(t,e,r,o){return t={tag:t,create:e,destroy:r,deps:o,next:null},e=wt.updateQueue,e===null?(e={lastEffect:null,stores:null},wt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,e.lastEffect=t)),t}function Lf(){return zn().memoizedState}function fa(t,e,r,o){var u=ar();wt.flags|=t,u.memoizedState=wo(1|e,r,void 0,o===void 0?null:o)}function Ja(t,e,r,o){var u=zn();o=o===void 0?null:o;var h=void 0;if(kt!==null){var d=kt.memoizedState;if(h=d.destroy,o!==null&&Hc(o,d.deps)){u.memoizedState=wo(e,r,h,o);return}}wt.flags|=t,u.memoizedState=wo(1|e,r,h,o)}function m0(t,e){return fa(8390656,8,t,e)}function Xc(t,e){return Ja(2048,8,t,e)}function Bf(t,e){return Ja(4,2,t,e)}function Ff(t,e){return Ja(4,4,t,e)}function Uf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jf(t,e,r){return r=r!=null?r.concat([t]):null,Ja(4,4,Uf.bind(null,e,t),r)}function Yc(){}function zf(t,e){var r=zn();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&Hc(e,o[1])?o[0]:(r.memoizedState=[t,e],t)}function Vf(t,e){var r=zn();e=e===void 0?null:e;var o=r.memoizedState;return o!==null&&e!==null&&Hc(e,o[1])?o[0]:(t=t(),r.memoizedState=[t,e],t)}function Hf(t,e,r){return wi&21?(qn(r,e)||(r=Y1(),wt.lanes|=r,yi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=r)}function Ip(t,e){var r=Ze;Ze=r!==0&&4>r?r:4,t(!0);var o=Jl.transition;Jl.transition={};try{t(!1),e()}finally{Ze=r,Jl.transition=o}}function Wf(){return zn().memoizedState}function Tp(t,e,r){var o=Yr(t);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},Gf(t))Xf(e,r);else if(r=If(t,e,r,o),r!==null){var u=rn();Qn(r,t,o,u),Yf(r,e,o)}}function bp(t,e,r){var o=Yr(t),u={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gf(t))Xf(e,u);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=e.lastRenderedReducer,h!==null))try{var d=e.lastRenderedState,w=h(d,r);if(u.hasEagerState=!0,u.eagerState=w,qn(w,d)){var p=e.interleaved;p===null?(u.next=u,Fc(e)):(u.next=p.next,p.next=u),e.interleaved=u;return}}catch{}finally{}r=If(t,e,u,o),r!==null&&(u=rn(),Qn(r,t,o,u),Yf(r,e,o))}}function Gf(t){var e=t.alternate;return t===wt||e!==null&&e===wt}function Xf(t,e){Zs=Ma=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Yf(t,e,r){if(r&4194240){var o=e.lanes;o&=t.pendingLanes,r|=o,e.lanes=r,Ac(t,r)}}var Pa={readContext:jn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},Op={readContext:jn,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:m0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,fa(4194308,4,Uf.bind(null,e,t),r)},useLayoutEffect:function(t,e){return fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return fa(4,2,t,e)},useMemo:function(t,e){var r=ar();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var o=ar();return e=r!==void 0?r(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=Tp.bind(null,wt,t),[o.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:p0,useDebugValue:Yc,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=p0(!1),e=t[0];return t=Ip.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var o=wt,u=ar();if(dt){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),jt===null)throw Error(ne(349));wi&30||Rf(o,e,r)}u.memoizedState=r;var h={value:r,getSnapshot:e};return u.queue=h,m0(Df.bind(null,o,h,t),[t]),o.flags|=2048,wo(9,kf.bind(null,o,h,r,e),void 0,null),r},useId:function(){var t=ar(),e=jt.identifierPrefix;if(dt){var r=xr,o=mr;r=(o&~(1<<32-Zn(o)-1)).toString(32)+r,e=":"+e+"R"+r,r=mo++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Sp++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Np={readContext:jn,useCallback:zf,useContext:jn,useEffect:Xc,useImperativeHandle:jf,useInsertionEffect:Bf,useLayoutEffect:Ff,useMemo:Vf,useReducer:eu,useRef:Lf,useState:function(){return eu(xo)},useDebugValue:Yc,useDeferredValue:function(t){var e=zn();return Hf(e,kt.memoizedState,t)},useTransition:function(){var t=eu(xo)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Of,useSyncExternalStore:Nf,useId:Wf,unstable_isNewReconciler:!1},Rp={readContext:jn,useCallback:zf,useContext:jn,useEffect:Xc,useImperativeHandle:jf,useInsertionEffect:Bf,useLayoutEffect:Ff,useMemo:Vf,useReducer:tu,useRef:Lf,useState:function(){return tu(xo)},useDebugValue:Yc,useDeferredValue:function(t){var e=zn();return kt===null?e.memoizedState=t:Hf(e,kt.memoizedState,t)},useTransition:function(){var t=tu(xo)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Of,useSyncExternalStore:Nf,useId:Wf,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ju(t,e,r,o){e=t.memoizedState,r=r(o,e),r=r==null?e:yt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var el={isMounted:function(t){return(t=t._reactInternals)?_i(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var o=rn(),u=Yr(t),h=wr(o,u);h.payload=e,r!=null&&(h.callback=r),e=Gr(t,h,u),e!==null&&(Qn(e,t,u,o),ca(e,t,u))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var o=rn(),u=Yr(t),h=wr(o,u);h.tag=1,h.payload=e,r!=null&&(h.callback=r),e=Gr(t,h,u),e!==null&&(Qn(e,t,u,o),ca(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rn(),o=Yr(t),u=wr(r,o);u.tag=2,e!=null&&(u.callback=e),e=Gr(t,u,o),e!==null&&(Qn(e,t,o,r),ca(e,t,o))}};function x0(t,e,r,o,u,h,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,d):e.prototype&&e.prototype.isPureReactComponent?!uo(r,o)||!uo(u,h):!0}function $f(t,e,r){var o=!1,u=Zr,h=e.contextType;return typeof h=="object"&&h!==null?h=jn(h):(u=yn(e)?mi:en.current,o=e.contextTypes,h=(o=o!=null)?as(t,u):Zr),e=new e(r,h),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=el,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=u,t.__reactInternalMemoizedMaskedChildContext=h),e}function w0(t,e,r,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,o),e.state!==t&&el.enqueueReplaceState(e,e.state,null)}function zu(t,e,r,o){var u=t.stateNode;u.props=r,u.state=t.memoizedState,u.refs={},Uc(t);var h=e.contextType;typeof h=="object"&&h!==null?u.context=jn(h):(h=yn(e)?mi:en.current,u.context=as(t,h)),u.state=t.memoizedState,h=e.getDerivedStateFromProps,typeof h=="function"&&(ju(t,e,h,r),u.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(e=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),e!==u.state&&el.enqueueReplaceState(u,u.state,null),ka(t,r,u,o),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308)}function hs(t,e){try{var r="",o=e;do r+=s2(o),o=o.return;while(o);var u=r}catch(h){u=`
Error generating stack: `+h.message+`
`+h.stack}return{value:t,source:e,stack:u,digest:null}}function nu(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Vu(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function Kf(t,e,r){r=wr(-1,r),r.tag=3,r.payload={element:null};var o=e.value;return r.callback=function(){Ba||(Ba=!0,qu=o),Vu(t,e)},r}function Zf(t,e,r){r=wr(-1,r),r.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var u=e.value;r.payload=function(){return o(u)},r.callback=function(){Vu(t,e)}}var h=t.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Vu(t,e),typeof o!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),r}function y0(t,e,r){var o=t.pingCache;if(o===null){o=t.pingCache=new kp;var u=new Set;o.set(e,u)}else u=o.get(e),u===void 0&&(u=new Set,o.set(e,u));u.has(r)||(u.add(r),t=Xp.bind(null,t,e,r),e.then(t,t))}function E0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v0(t,e,r,o,u){return t.mode&1?(t.flags|=65536,t.lanes=u,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wr(-1,1),e.tag=2,Gr(r,e,1))),r.lanes|=1),t)}var Dp=_r.ReactCurrentOwner,xn=!1;function nn(t,e,r,o){e.child=t===null?Sf(e,null,r,o):us(e,t.child,r,o)}function C0(t,e,r,o,u){r=r.render;var h=e.ref;return rs(e,u),o=Wc(t,e,r,o,h,u),r=Gc(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~u,Cr(t,e,u)):(dt&&r&&kc(e),e.flags|=1,nn(t,e,o,u),e.child)}function _0(t,e,r,o,u){if(t===null){var h=r.type;return typeof h=="function"&&!th(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=h,Qf(t,e,h,o,u)):(t=ma(r.type,null,o,e,e.mode,u),t.ref=e.ref,t.return=e,e.child=t)}if(h=t.child,!(t.lanes&u)){var d=h.memoizedProps;if(r=r.compare,r=r!==null?r:uo,r(d,o)&&t.ref===e.ref)return Cr(t,e,u)}return e.flags|=1,t=$r(h,o),t.ref=e.ref,t.return=e,e.child=t}function Qf(t,e,r,o,u){if(t!==null){var h=t.memoizedProps;if(uo(h,o)&&t.ref===e.ref)if(xn=!1,e.pendingProps=o=h,(t.lanes&u)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Cr(t,e,u)}return Hu(t,e,r,o,u)}function qf(t,e,r){var o=e.pendingProps,u=o.children,h=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Qi,Sn),Sn|=r;else{if(!(r&1073741824))return t=h!==null?h.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(Qi,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:r,it(Qi,Sn),Sn|=o}else h!==null?(o=h.baseLanes|r,e.memoizedState=null):o=r,it(Qi,Sn),Sn|=o;return nn(t,e,u,r),e.child}function Jf(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Hu(t,e,r,o,u){var h=yn(r)?mi:en.current;return h=as(e,h),rs(e,u),r=Wc(t,e,r,o,h,u),o=Gc(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~u,Cr(t,e,u)):(dt&&o&&kc(e),e.flags|=1,nn(t,e,r,u),e.child)}function A0(t,e,r,o,u){if(yn(r)){var h=!0;Ta(e)}else h=!1;if(rs(e,u),e.stateNode===null)da(t,e),$f(e,r,o),zu(e,r,o,u),o=!0;else if(t===null){var d=e.stateNode,w=e.memoizedProps;d.props=w;var p=d.context,m=r.contextType;typeof m=="object"&&m!==null?m=jn(m):(m=yn(r)?mi:en.current,m=as(e,m));var y=r.getDerivedStateFromProps,v=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function";v||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w!==o||p!==m)&&w0(e,d,o,m),Mr=!1;var S=e.memoizedState;d.state=S,ka(e,o,d,u),p=e.memoizedState,w!==o||S!==p||wn.current||Mr?(typeof y=="function"&&(ju(e,r,y,o),p=e.memoizedState),(w=Mr||x0(e,r,w,o,S,p,m))?(v||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=p),d.props=o,d.state=p,d.context=m,o=w):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{d=e.stateNode,Tf(t,e),w=e.memoizedProps,m=e.type===e.elementType?w:Xn(e.type,w),d.props=m,v=e.pendingProps,S=d.context,p=r.contextType,typeof p=="object"&&p!==null?p=jn(p):(p=yn(r)?mi:en.current,p=as(e,p));var k=r.getDerivedStateFromProps;(y=typeof k=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w!==v||S!==p)&&w0(e,d,o,p),Mr=!1,S=e.memoizedState,d.state=S,ka(e,o,d,u);var B=e.memoizedState;w!==v||S!==B||wn.current||Mr?(typeof k=="function"&&(ju(e,r,k,o),B=e.memoizedState),(m=Mr||x0(e,r,m,o,S,B,p)||!1)?(y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,B,p),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,B,p)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||w===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=B),d.props=o,d.state=B,d.context=p,o=m):(typeof d.componentDidUpdate!="function"||w===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),o=!1)}return Wu(t,e,r,o,h,u)}function Wu(t,e,r,o,u,h){Jf(t,e);var d=(e.flags&128)!==0;if(!o&&!d)return u&&u0(e,r,!1),Cr(t,e,h);o=e.stateNode,Dp.current=e;var w=d&&typeof r.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&d?(e.child=us(e,t.child,null,h),e.child=us(e,null,w,h)):nn(t,e,w,h),e.memoizedState=o.state,u&&u0(e,r,!0),e.child}function ed(t){var e=t.stateNode;e.pendingContext?l0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l0(t,e.context,!1),jc(t,e.containerInfo)}function S0(t,e,r,o,u){return ls(),Mc(u),e.flags|=256,nn(t,e,r,o),e.child}var Gu={dehydrated:null,treeContext:null,retryLane:0};function Xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function td(t,e,r){var o=e.pendingProps,u=xt.current,h=!1,d=(e.flags&128)!==0,w;if((w=d)||(w=t!==null&&t.memoizedState===null?!1:(u&2)!==0),w?(h=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(u|=1),it(xt,u&1),t===null)return Fu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=o.children,t=o.fallback,h?(o=e.mode,h=e.child,d={mode:"hidden",children:d},!(o&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=rl(d,o,0,null),t=pi(t,o,r,null),h.return=e,t.return=e,h.sibling=t,e.child=h,e.child.memoizedState=Xu(r),e.memoizedState=Gu,t):$c(e,d));if(u=t.memoizedState,u!==null&&(w=u.dehydrated,w!==null))return Mp(t,e,d,o,w,u,r);if(h){h=o.fallback,d=e.mode,u=t.child,w=u.sibling;var p={mode:"hidden",children:o.children};return!(d&1)&&e.child!==u?(o=e.child,o.childLanes=0,o.pendingProps=p,e.deletions=null):(o=$r(u,p),o.subtreeFlags=u.subtreeFlags&14680064),w!==null?h=$r(w,h):(h=pi(h,d,r,null),h.flags|=2),h.return=e,o.return=e,o.sibling=h,e.child=o,o=h,h=e.child,d=t.child.memoizedState,d=d===null?Xu(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=t.childLanes&~r,e.memoizedState=Gu,o}return h=t.child,t=h.sibling,o=$r(h,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=r),o.return=e,o.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=o,e.memoizedState=null,o}function $c(t,e){return e=rl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qo(t,e,r,o){return o!==null&&Mc(o),us(e,t.child,null,r),t=$c(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mp(t,e,r,o,u,h,d){if(r)return e.flags&256?(e.flags&=-257,o=nu(Error(ne(422))),Qo(t,e,d,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(h=o.fallback,u=e.mode,o=rl({mode:"visible",children:o.children},u,0,null),h=pi(h,u,d,null),h.flags|=2,o.return=e,h.return=e,o.sibling=h,e.child=o,e.mode&1&&us(e,t.child,null,d),e.child.memoizedState=Xu(d),e.memoizedState=Gu,h);if(!(e.mode&1))return Qo(t,e,d,null);if(u.data==="$!"){if(o=u.nextSibling&&u.nextSibling.dataset,o)var w=o.dgst;return o=w,h=Error(ne(419)),o=nu(h,o,void 0),Qo(t,e,d,o)}if(w=(d&t.childLanes)!==0,xn||w){if(o=jt,o!==null){switch(d&-d){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(o.suspendedLanes|d)?0:u,u!==0&&u!==h.retryLane&&(h.retryLane=u,vr(t,u),Qn(o,t,u,-1))}return eh(),o=nu(Error(ne(421))),Qo(t,e,d,o)}return u.data==="$?"?(e.flags|=128,e.child=t.child,e=Yp.bind(null,t),u._reactRetry=e,null):(t=h.treeContext,In=Wr(u.nextSibling),Tn=e,dt=!0,Kn=null,t!==null&&(Ln[Bn++]=mr,Ln[Bn++]=xr,Ln[Bn++]=xi,mr=t.id,xr=t.overflow,xi=e),e=$c(e,o.children),e.flags|=4096,e)}function I0(t,e,r){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Uu(t.return,e,r)}function ru(t,e,r,o,u){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:u}:(h.isBackwards=e,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=r,h.tailMode=u)}function nd(t,e,r){var o=e.pendingProps,u=o.revealOrder,h=o.tail;if(nn(t,e,o.children,r),o=xt.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I0(t,r,e);else if(t.tag===19)I0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(it(xt,o),!(e.mode&1))e.memoizedState=null;else switch(u){case"forwards":for(r=e.child,u=null;r!==null;)t=r.alternate,t!==null&&Da(t)===null&&(u=r),r=r.sibling;r=u,r===null?(u=e.child,e.child=null):(u=r.sibling,r.sibling=null),ru(e,!1,u,r,h);break;case"backwards":for(r=null,u=e.child,e.child=null;u!==null;){if(t=u.alternate,t!==null&&Da(t)===null){e.child=u;break}t=u.sibling,u.sibling=r,r=u,u=t}ru(e,!0,r,null,h);break;case"together":ru(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function da(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=$r(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=$r(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Pp(t,e,r){switch(e.tag){case 3:ed(e),ls();break;case 5:bf(e);break;case 1:yn(e.type)&&Ta(e);break;case 4:jc(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,u=e.memoizedProps.value;it(Na,o._currentValue),o._currentValue=u;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(it(xt,xt.current&1),e.flags|=128,null):r&e.child.childLanes?td(t,e,r):(it(xt,xt.current&1),t=Cr(t,e,r),t!==null?t.sibling:null);it(xt,xt.current&1);break;case 19:if(o=(r&e.childLanes)!==0,t.flags&128){if(o)return nd(t,e,r);e.flags|=128}if(u=e.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),it(xt,xt.current),o)break;return null;case 22:case 23:return e.lanes=0,qf(t,e,r)}return Cr(t,e,r)}var rd,Yu,id,sd;rd=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yu=function(){};id=function(t,e,r,o){var u=t.memoizedProps;if(u!==o){t=e.stateNode,di(cr.current);var h=null;switch(r){case"input":u=pu(t,u),o=pu(t,o),h=[];break;case"select":u=yt({},u,{value:void 0}),o=yt({},o,{value:void 0}),h=[];break;case"textarea":u=wu(t,u),o=wu(t,o),h=[];break;default:typeof u.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Sa)}Eu(r,o);var d;r=null;for(m in u)if(!o.hasOwnProperty(m)&&u.hasOwnProperty(m)&&u[m]!=null)if(m==="style"){var w=u[m];for(d in w)w.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(no.hasOwnProperty(m)?h||(h=[]):(h=h||[]).push(m,null));for(m in o){var p=o[m];if(w=u!=null?u[m]:void 0,o.hasOwnProperty(m)&&p!==w&&(p!=null||w!=null))if(m==="style")if(w){for(d in w)!w.hasOwnProperty(d)||p&&p.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in p)p.hasOwnProperty(d)&&w[d]!==p[d]&&(r||(r={}),r[d]=p[d])}else r||(h||(h=[]),h.push(m,r)),r=p;else m==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,w=w?w.__html:void 0,p!=null&&w!==p&&(h=h||[]).push(m,p)):m==="children"?typeof p!="string"&&typeof p!="number"||(h=h||[]).push(m,""+p):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(no.hasOwnProperty(m)?(p!=null&&m==="onScroll"&&at("scroll",t),h||w===p||(h=[])):(h=h||[]).push(m,p))}r&&(h=h||[]).push("style",r);var m=h;(e.updateQueue=m)&&(e.flags|=4)}};sd=function(t,e,r,o){r!==o&&(e.flags|=4)};function Ps(t,e){if(!dt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(e)for(var u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags&14680064,o|=u.flags&14680064,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)r|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=o,t.childLanes=r,e}function Lp(t,e,r){var o=e.pendingProps;switch(Dc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return yn(e.type)&&Ia(),qt(e),null;case 3:return o=e.stateNode,cs(),ut(wn),ut(en),Vc(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ko(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(tc(Kn),Kn=null))),Yu(t,e),qt(e),null;case 5:zc(e);var u=di(po.current);if(r=e.type,t!==null&&e.stateNode!=null)id(t,e,r,o,u),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(ne(166));return qt(e),null}if(t=di(cr.current),Ko(e)){o=e.stateNode,r=e.type;var h=e.memoizedProps;switch(o[lr]=e,o[fo]=h,t=(e.mode&1)!==0,r){case"dialog":at("cancel",o),at("close",o);break;case"iframe":case"object":case"embed":at("load",o);break;case"video":case"audio":for(u=0;u<Vs.length;u++)at(Vs[u],o);break;case"source":at("error",o);break;case"img":case"image":case"link":at("error",o),at("load",o);break;case"details":at("toggle",o);break;case"input":Ph(o,h),at("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},at("invalid",o);break;case"textarea":Bh(o,h),at("invalid",o)}Eu(r,h),u=null;for(var d in h)if(h.hasOwnProperty(d)){var w=h[d];d==="children"?typeof w=="string"?o.textContent!==w&&(h.suppressHydrationWarning!==!0&&$o(o.textContent,w,t),u=["children",w]):typeof w=="number"&&o.textContent!==""+w&&(h.suppressHydrationWarning!==!0&&$o(o.textContent,w,t),u=["children",""+w]):no.hasOwnProperty(d)&&w!=null&&d==="onScroll"&&at("scroll",o)}switch(r){case"input":jo(o),Lh(o,h,!0);break;case"textarea":jo(o),Fh(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Sa)}o=u,e.updateQueue=o,o!==null&&(e.flags|=4)}else{d=u.nodeType===9?u:u.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=d.createElement(r,{is:o.is}):(t=d.createElement(r),r==="select"&&(d=t,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):t=d.createElementNS(t,r),t[lr]=e,t[fo]=o,rd(t,e,!1,!1),e.stateNode=t;e:{switch(d=vu(r,o),r){case"dialog":at("cancel",t),at("close",t),u=o;break;case"iframe":case"object":case"embed":at("load",t),u=o;break;case"video":case"audio":for(u=0;u<Vs.length;u++)at(Vs[u],t);u=o;break;case"source":at("error",t),u=o;break;case"img":case"image":case"link":at("error",t),at("load",t),u=o;break;case"details":at("toggle",t),u=o;break;case"input":Ph(t,o),u=pu(t,o),at("invalid",t);break;case"option":u=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},u=yt({},o,{value:void 0}),at("invalid",t);break;case"textarea":Bh(t,o),u=wu(t,o),at("invalid",t);break;default:u=o}Eu(r,u),w=u;for(h in w)if(w.hasOwnProperty(h)){var p=w[h];h==="style"?P1(t,p):h==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&D1(t,p)):h==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&ro(t,p):typeof p=="number"&&ro(t,""+p):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(no.hasOwnProperty(h)?p!=null&&h==="onScroll"&&at("scroll",t):p!=null&&wc(t,h,p,d))}switch(r){case"input":jo(t),Lh(t,o,!1);break;case"textarea":jo(t),Fh(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Kr(o.value));break;case"select":t.multiple=!!o.multiple,h=o.value,h!=null?Ji(t,!!o.multiple,h,!1):o.defaultValue!=null&&Ji(t,!!o.multiple,o.defaultValue,!0);break;default:typeof u.onClick=="function"&&(t.onclick=Sa)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)sd(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(ne(166));if(r=di(po.current),di(cr.current),Ko(e)){if(o=e.stateNode,r=e.memoizedProps,o[lr]=e,(h=o.nodeValue!==r)&&(t=Tn,t!==null))switch(t.tag){case 3:$o(o.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$o(o.nodeValue,r,(t.mode&1)!==0)}h&&(e.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[lr]=e,e.stateNode=o}return qt(e),null;case 13:if(ut(xt),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dt&&In!==null&&e.mode&1&&!(e.flags&128))_f(),ls(),e.flags|=98560,h=!1;else if(h=Ko(e),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(ne(318));if(h=e.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(ne(317));h[lr]=e}else ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),h=!1}else Kn!==null&&(tc(Kn),Kn=null),h=!0;if(!h)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Dt===0&&(Dt=3):eh())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return cs(),Yu(t,e),t===null&&co(e.stateNode.containerInfo),qt(e),null;case 10:return Bc(e.type._context),qt(e),null;case 17:return yn(e.type)&&Ia(),qt(e),null;case 19:if(ut(xt),h=e.memoizedState,h===null)return qt(e),null;if(o=(e.flags&128)!==0,d=h.rendering,d===null)if(o)Ps(h,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=Da(t),d!==null){for(e.flags|=128,Ps(h,!1),o=d.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=r,r=e.child;r!==null;)h=r,t=o,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=t,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,t=d.dependencies,h.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return it(xt,xt.current&1|2),e.child}t=t.sibling}h.tail!==null&&Tt()>fs&&(e.flags|=128,o=!0,Ps(h,!1),e.lanes=4194304)}else{if(!o)if(t=Da(d),t!==null){if(e.flags|=128,o=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ps(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!dt)return qt(e),null}else 2*Tt()-h.renderingStartTime>fs&&r!==1073741824&&(e.flags|=128,o=!0,Ps(h,!1),e.lanes=4194304);h.isBackwards?(d.sibling=e.child,e.child=d):(r=h.last,r!==null?r.sibling=d:e.child=d,h.last=d)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Tt(),e.sibling=null,r=xt.current,it(xt,o?r&1|2:r&1),e):(qt(e),null);case 22:case 23:return Jc(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?Sn&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function Bp(t,e){switch(Dc(e),e.tag){case 1:return yn(e.type)&&Ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cs(),ut(wn),ut(en),Vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zc(e),null;case 13:if(ut(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(xt),null;case 4:return cs(),null;case 10:return Bc(e.type._context),null;case 22:case 23:return Jc(),null;case 24:return null;default:return null}}var qo=!1,Jt=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,de=null;function Zi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){St(t,e,o)}else r.current=null}function $u(t,e,r){try{r()}catch(o){St(t,e,o)}}var T0=!1;function Up(t,e){if(Ru=Ca,t=cf(),Rc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var u=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var d=0,w=-1,p=-1,m=0,y=0,v=t,S=null;t:for(;;){for(var k;v!==r||u!==0&&v.nodeType!==3||(w=d+u),v!==h||o!==0&&v.nodeType!==3||(p=d+o),v.nodeType===3&&(d+=v.nodeValue.length),(k=v.firstChild)!==null;)S=v,v=k;for(;;){if(v===t)break t;if(S===r&&++m===u&&(w=d),S===h&&++y===o&&(p=d),(k=v.nextSibling)!==null)break;v=S,S=v.parentNode}v=k}r=w===-1||p===-1?null:{start:w,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(ku={focusedElem:t,selectionRange:r},Ca=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var B=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var L=B.memoizedProps,X=B.memoizedState,D=e.stateNode,N=D.getSnapshotBeforeUpdate(e.elementType===e.type?L:Xn(e.type,L),X);D.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(U){St(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return B=T0,T0=!1,B}function Qs(t,e,r){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&t)===t){var h=u.destroy;u.destroy=void 0,h!==void 0&&$u(e,r,h)}u=u.next}while(u!==o)}}function tl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var o=r.create;r.destroy=o()}r=r.next}while(r!==e)}}function Ku(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function od(t){var e=t.alternate;e!==null&&(t.alternate=null,od(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[lr],delete e[fo],delete e[Pu],delete e[vp],delete e[Cp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ad(t){return t.tag===5||t.tag===3||t.tag===4}function b0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ad(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zu(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Sa));else if(o!==4&&(t=t.child,t!==null))for(Zu(t,e,r),t=t.sibling;t!==null;)Zu(t,e,r),t=t.sibling}function Qu(t,e,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Qu(t,e,r),t=t.sibling;t!==null;)Qu(t,e,r),t=t.sibling}var Gt=null,Yn=!1;function Nr(t,e,r){for(r=r.child;r!==null;)ld(t,e,r),r=r.sibling}function ld(t,e,r){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(Ya,r)}catch{}switch(r.tag){case 5:Jt||Zi(r,e);case 6:var o=Gt,u=Yn;Gt=null,Nr(t,e,r),Gt=o,Yn=u,Gt!==null&&(Yn?(t=Gt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Gt.removeChild(r.stateNode));break;case 18:Gt!==null&&(Yn?(t=Gt,r=r.stateNode,t.nodeType===8?Zl(t.parentNode,r):t.nodeType===1&&Zl(t,r),ao(t)):Zl(Gt,r.stateNode));break;case 4:o=Gt,u=Yn,Gt=r.stateNode.containerInfo,Yn=!0,Nr(t,e,r),Gt=o,Yn=u;break;case 0:case 11:case 14:case 15:if(!Jt&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){u=o=o.next;do{var h=u,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&$u(r,e,d),u=u.next}while(u!==o)}Nr(t,e,r);break;case 1:if(!Jt&&(Zi(r,e),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(w){St(r,e,w)}Nr(t,e,r);break;case 21:Nr(t,e,r);break;case 22:r.mode&1?(Jt=(o=Jt)||r.memoizedState!==null,Nr(t,e,r),Jt=o):Nr(t,e,r);break;default:Nr(t,e,r)}}function O0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Fp),e.forEach(function(o){var u=$p.bind(null,t,o);r.has(o)||(r.add(o),o.then(u,u))})}}function Gn(t,e){var r=e.deletions;if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];try{var h=t,d=e,w=d;e:for(;w!==null;){switch(w.tag){case 5:Gt=w.stateNode,Yn=!1;break e;case 3:Gt=w.stateNode.containerInfo,Yn=!0;break e;case 4:Gt=w.stateNode.containerInfo,Yn=!0;break e}w=w.return}if(Gt===null)throw Error(ne(160));ld(h,d,u),Gt=null,Yn=!1;var p=u.alternate;p!==null&&(p.return=null),u.return=null}catch(m){St(u,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ud(e,t),e=e.sibling}function ud(t,e){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),sr(t),o&4){try{Qs(3,t,t.return),tl(3,t)}catch(L){St(t,t.return,L)}try{Qs(5,t,t.return)}catch(L){St(t,t.return,L)}}break;case 1:Gn(e,t),sr(t),o&512&&r!==null&&Zi(r,r.return);break;case 5:if(Gn(e,t),sr(t),o&512&&r!==null&&Zi(r,r.return),t.flags&32){var u=t.stateNode;try{ro(u,"")}catch(L){St(t,t.return,L)}}if(o&4&&(u=t.stateNode,u!=null)){var h=t.memoizedProps,d=r!==null?r.memoizedProps:h,w=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{w==="input"&&h.type==="radio"&&h.name!=null&&N1(u,h),vu(w,d);var m=vu(w,h);for(d=0;d<p.length;d+=2){var y=p[d],v=p[d+1];y==="style"?P1(u,v):y==="dangerouslySetInnerHTML"?D1(u,v):y==="children"?ro(u,v):wc(u,y,v,m)}switch(w){case"input":mu(u,h);break;case"textarea":R1(u,h);break;case"select":var S=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!h.multiple;var k=h.value;k!=null?Ji(u,!!h.multiple,k,!1):S!==!!h.multiple&&(h.defaultValue!=null?Ji(u,!!h.multiple,h.defaultValue,!0):Ji(u,!!h.multiple,h.multiple?[]:"",!1))}u[fo]=h}catch(L){St(t,t.return,L)}}break;case 6:if(Gn(e,t),sr(t),o&4){if(t.stateNode===null)throw Error(ne(162));u=t.stateNode,h=t.memoizedProps;try{u.nodeValue=h}catch(L){St(t,t.return,L)}}break;case 3:if(Gn(e,t),sr(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{ao(e.containerInfo)}catch(L){St(t,t.return,L)}break;case 4:Gn(e,t),sr(t);break;case 13:Gn(e,t),sr(t),u=t.child,u.flags&8192&&(h=u.memoizedState!==null,u.stateNode.isHidden=h,!h||u.alternate!==null&&u.alternate.memoizedState!==null||(Qc=Tt())),o&4&&O0(t);break;case 22:if(y=r!==null&&r.memoizedState!==null,t.mode&1?(Jt=(m=Jt)||y,Gn(e,t),Jt=m):Gn(e,t),sr(t),o&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(de=t,y=t.child;y!==null;){for(v=de=y;de!==null;){switch(S=de,k=S.child,S.tag){case 0:case 11:case 14:case 15:Qs(4,S,S.return);break;case 1:Zi(S,S.return);var B=S.stateNode;if(typeof B.componentWillUnmount=="function"){o=S,r=S.return;try{e=o,B.props=e.memoizedProps,B.state=e.memoizedState,B.componentWillUnmount()}catch(L){St(o,r,L)}}break;case 5:Zi(S,S.return);break;case 22:if(S.memoizedState!==null){R0(v);continue}}k!==null?(k.return=S,de=k):R0(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{u=v.stateNode,m?(h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(w=v.stateNode,p=v.memoizedProps.style,d=p!=null&&p.hasOwnProperty("display")?p.display:null,w.style.display=M1("display",d))}catch(L){St(t,t.return,L)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(L){St(t,t.return,L)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Gn(e,t),sr(t),o&4&&O0(t);break;case 21:break;default:Gn(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ad(r)){var o=r;break e}r=r.return}throw Error(ne(160))}switch(o.tag){case 5:var u=o.stateNode;o.flags&32&&(ro(u,""),o.flags&=-33);var h=b0(t);Qu(t,h,u);break;case 3:case 4:var d=o.stateNode.containerInfo,w=b0(t);Zu(t,w,d);break;default:throw Error(ne(161))}}catch(p){St(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jp(t,e,r){de=t,cd(t)}function cd(t,e,r){for(var o=(t.mode&1)!==0;de!==null;){var u=de,h=u.child;if(u.tag===22&&o){var d=u.memoizedState!==null||qo;if(!d){var w=u.alternate,p=w!==null&&w.memoizedState!==null||Jt;w=qo;var m=Jt;if(qo=d,(Jt=p)&&!m)for(de=u;de!==null;)d=de,p=d.child,d.tag===22&&d.memoizedState!==null?k0(u):p!==null?(p.return=d,de=p):k0(u);for(;h!==null;)de=h,cd(h),h=h.sibling;de=u,qo=w,Jt=m}N0(t)}else u.subtreeFlags&8772&&h!==null?(h.return=u,de=h):N0(t)}}function N0(t){for(;de!==null;){var e=de;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||tl(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!Jt)if(r===null)o.componentDidMount();else{var u=e.elementType===e.type?r.memoizedProps:Xn(e.type,r.memoizedProps);o.componentDidUpdate(u,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=e.updateQueue;h!==null&&g0(e,h,o);break;case 3:var d=e.updateQueue;if(d!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}g0(e,d,r)}break;case 5:var w=e.stateNode;if(r===null&&e.flags&4){r=w;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&ao(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Jt||e.flags&512&&Ku(e)}catch(S){St(e,e.return,S)}}if(e===t){de=null;break}if(r=e.sibling,r!==null){r.return=e.return,de=r;break}de=e.return}}function R0(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var r=e.sibling;if(r!==null){r.return=e.return,de=r;break}de=e.return}}function k0(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{tl(4,e)}catch(p){St(e,r,p)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var u=e.return;try{o.componentDidMount()}catch(p){St(e,u,p)}}var h=e.return;try{Ku(e)}catch(p){St(e,h,p)}break;case 5:var d=e.return;try{Ku(e)}catch(p){St(e,d,p)}}}catch(p){St(e,e.return,p)}if(e===t){de=null;break}var w=e.sibling;if(w!==null){w.return=e.return,de=w;break}de=e.return}}var zp=Math.ceil,La=_r.ReactCurrentDispatcher,Kc=_r.ReactCurrentOwner,Un=_r.ReactCurrentBatchConfig,je=0,jt=null,Ot=null,Xt=0,Sn=0,Qi=qr(0),Dt=0,yo=null,yi=0,nl=0,Zc=0,qs=null,pn=null,Qc=0,fs=1/0,fr=null,Ba=!1,qu=null,Xr=null,Jo=!1,jr=null,Fa=0,Js=0,Ju=null,ga=-1,pa=0;function rn(){return je&6?Tt():ga!==-1?ga:ga=Tt()}function Yr(t){return t.mode&1?je&2&&Xt!==0?Xt&-Xt:Ap.transition!==null?(pa===0&&(pa=Y1()),pa):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:ef(t.type)),t):1}function Qn(t,e,r,o){if(50<Js)throw Js=0,Ju=null,Error(ne(185));Co(t,r,o),(!(je&2)||t!==jt)&&(t===jt&&(!(je&2)&&(nl|=r),Dt===4&&Br(t,Xt)),En(t,o),r===1&&je===0&&!(e.mode&1)&&(fs=Tt()+500,qa&&Jr()))}function En(t,e){var r=t.callbackNode;A2(t,e);var o=va(t,t===jt?Xt:0);if(o===0)r!==null&&zh(r),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(r!=null&&zh(r),e===1)t.tag===0?_p(D0.bind(null,t)):Ef(D0.bind(null,t)),yp(function(){!(je&6)&&Jr()}),r=null;else{switch($1(o)){case 1:r=_c;break;case 4:r=G1;break;case 16:r=Ea;break;case 536870912:r=X1;break;default:r=Ea}r=wd(r,hd.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function hd(t,e){if(ga=-1,pa=0,je&6)throw Error(ne(327));var r=t.callbackNode;if(is()&&t.callbackNode!==r)return null;var o=va(t,t===jt?Xt:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=Ua(t,o);else{e=o;var u=je;je|=2;var h=dd();(jt!==t||Xt!==e)&&(fr=null,fs=Tt()+500,gi(t,e));do try{Wp();break}catch(w){fd(t,w)}while(!0);Lc(),La.current=h,je=u,Ot!==null?e=0:(jt=null,Xt=0,e=Dt)}if(e!==0){if(e===2&&(u=Iu(t),u!==0&&(o=u,e=ec(t,u))),e===1)throw r=yo,gi(t,0),Br(t,o),En(t,Tt()),r;if(e===6)Br(t,o);else{if(u=t.current.alternate,!(o&30)&&!Vp(u)&&(e=Ua(t,o),e===2&&(h=Iu(t),h!==0&&(o=h,e=ec(t,h))),e===1))throw r=yo,gi(t,0),Br(t,o),En(t,Tt()),r;switch(t.finishedWork=u,t.finishedLanes=o,e){case 0:case 1:throw Error(ne(345));case 2:li(t,pn,fr);break;case 3:if(Br(t,o),(o&130023424)===o&&(e=Qc+500-Tt(),10<e)){if(va(t,0)!==0)break;if(u=t.suspendedLanes,(u&o)!==o){rn(),t.pingedLanes|=t.suspendedLanes&u;break}t.timeoutHandle=Mu(li.bind(null,t,pn,fr),e);break}li(t,pn,fr);break;case 4:if(Br(t,o),(o&4194240)===o)break;for(e=t.eventTimes,u=-1;0<o;){var d=31-Zn(o);h=1<<d,d=e[d],d>u&&(u=d),o&=~h}if(o=u,o=Tt()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*zp(o/1960))-o,10<o){t.timeoutHandle=Mu(li.bind(null,t,pn,fr),o);break}li(t,pn,fr);break;case 5:li(t,pn,fr);break;default:throw Error(ne(329))}}}return En(t,Tt()),t.callbackNode===r?hd.bind(null,t):null}function ec(t,e){var r=qs;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=Ua(t,e),t!==2&&(e=pn,pn=r,e!==null&&tc(e)),t}function tc(t){pn===null?pn=t:pn.push.apply(pn,t)}function Vp(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var u=r[o],h=u.getSnapshot;u=u.value;try{if(!qn(h(),u))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~Zc,e&=~nl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Zn(e),o=1<<r;t[r]=-1,e&=~o}}function D0(t){if(je&6)throw Error(ne(327));is();var e=va(t,0);if(!(e&1))return En(t,Tt()),null;var r=Ua(t,e);if(t.tag!==0&&r===2){var o=Iu(t);o!==0&&(e=o,r=ec(t,o))}if(r===1)throw r=yo,gi(t,0),Br(t,e),En(t,Tt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,pn,fr),En(t,Tt()),null}function qc(t,e){var r=je;je|=1;try{return t(e)}finally{je=r,je===0&&(fs=Tt()+500,qa&&Jr())}}function Ei(t){jr!==null&&jr.tag===0&&!(je&6)&&is();var e=je;je|=1;var r=Un.transition,o=Ze;try{if(Un.transition=null,Ze=1,t)return t()}finally{Ze=o,Un.transition=r,je=e,!(je&6)&&Jr()}}function Jc(){Sn=Qi.current,ut(Qi)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,wp(r)),Ot!==null)for(r=Ot.return;r!==null;){var o=r;switch(Dc(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ia();break;case 3:cs(),ut(wn),ut(en),Vc();break;case 5:zc(o);break;case 4:cs();break;case 13:ut(xt);break;case 19:ut(xt);break;case 10:Bc(o.type._context);break;case 22:case 23:Jc()}r=r.return}if(jt=t,Ot=t=$r(t.current,null),Xt=Sn=e,Dt=0,yo=null,Zc=nl=yi=0,pn=qs=null,fi!==null){for(e=0;e<fi.length;e++)if(r=fi[e],o=r.interleaved,o!==null){r.interleaved=null;var u=o.next,h=r.pending;if(h!==null){var d=h.next;h.next=u,o.next=d}r.pending=o}fi=null}return t}function fd(t,e){do{var r=Ot;try{if(Lc(),ha.current=Pa,Ma){for(var o=wt.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Ma=!1}if(wi=0,Ft=kt=wt=null,Zs=!1,mo=0,Kc.current=null,r===null||r.return===null){Dt=1,yo=e,Ot=null;break}e:{var h=t,d=r.return,w=r,p=e;if(e=Xt,w.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var m=p,y=w,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var S=y.alternate;S?(y.updateQueue=S.updateQueue,y.memoizedState=S.memoizedState,y.lanes=S.lanes):(y.updateQueue=null,y.memoizedState=null)}var k=E0(d);if(k!==null){k.flags&=-257,v0(k,d,w,h,e),k.mode&1&&y0(h,m,e),e=k,p=m;var B=e.updateQueue;if(B===null){var L=new Set;L.add(p),e.updateQueue=L}else B.add(p);break e}else{if(!(e&1)){y0(h,m,e),eh();break e}p=Error(ne(426))}}else if(dt&&w.mode&1){var X=E0(d);if(X!==null){!(X.flags&65536)&&(X.flags|=256),v0(X,d,w,h,e),Mc(hs(p,w));break e}}h=p=hs(p,w),Dt!==4&&(Dt=2),qs===null?qs=[h]:qs.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,e&=-e,h.lanes|=e;var D=Kf(h,p,e);d0(h,D);break e;case 1:w=p;var N=h.type,O=h.stateNode;if(!(h.flags&128)&&(typeof N.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Xr===null||!Xr.has(O)))){h.flags|=65536,e&=-e,h.lanes|=e;var U=Zf(h,w,e);d0(h,U);break e}}h=h.return}while(h!==null)}pd(r)}catch(J){e=J,Ot===r&&r!==null&&(Ot=r=r.return);continue}break}while(!0)}function dd(){var t=La.current;return La.current=Pa,t===null?Pa:t}function eh(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),jt===null||!(yi&268435455)&&!(nl&268435455)||Br(jt,Xt)}function Ua(t,e){var r=je;je|=2;var o=dd();(jt!==t||Xt!==e)&&(fr=null,gi(t,e));do try{Hp();break}catch(u){fd(t,u)}while(!0);if(Lc(),je=r,La.current=o,Ot!==null)throw Error(ne(261));return jt=null,Xt=0,Dt}function Hp(){for(;Ot!==null;)gd(Ot)}function Wp(){for(;Ot!==null&&!p2();)gd(Ot)}function gd(t){var e=xd(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?pd(t):Ot=e,Kc.current=null}function pd(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Bp(r,e),r!==null){r.flags&=32767,Ot=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,Ot=null;return}}else if(r=Lp(r,e,Sn),r!==null){Ot=r;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);Dt===0&&(Dt=5)}function li(t,e,r){var o=Ze,u=Un.transition;try{Un.transition=null,Ze=1,Gp(t,e,r,o)}finally{Un.transition=u,Ze=o}return null}function Gp(t,e,r,o){do is();while(jr!==null);if(je&6)throw Error(ne(327));r=t.finishedWork;var u=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var h=r.lanes|r.childLanes;if(S2(t,h),t===jt&&(Ot=jt=null,Xt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jo||(Jo=!0,wd(Ea,function(){return is(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=Un.transition,Un.transition=null;var d=Ze;Ze=1;var w=je;je|=4,Kc.current=null,Up(t,r),ud(r,t),hp(ku),Ca=!!Ru,ku=Ru=null,t.current=r,jp(r),m2(),je=w,Ze=d,Un.transition=h}else t.current=r;if(Jo&&(Jo=!1,jr=t,Fa=u),h=t.pendingLanes,h===0&&(Xr=null),y2(r.stateNode),En(t,Tt()),e!==null)for(o=t.onRecoverableError,r=0;r<e.length;r++)u=e[r],o(u.value,{componentStack:u.stack,digest:u.digest});if(Ba)throw Ba=!1,t=qu,qu=null,t;return Fa&1&&t.tag!==0&&is(),h=t.pendingLanes,h&1?t===Ju?Js++:(Js=0,Ju=t):Js=0,Jr(),null}function is(){if(jr!==null){var t=$1(Fa),e=Un.transition,r=Ze;try{if(Un.transition=null,Ze=16>t?16:t,jr===null)var o=!1;else{if(t=jr,jr=null,Fa=0,je&6)throw Error(ne(331));var u=je;for(je|=4,de=t.current;de!==null;){var h=de,d=h.child;if(de.flags&16){var w=h.deletions;if(w!==null){for(var p=0;p<w.length;p++){var m=w[p];for(de=m;de!==null;){var y=de;switch(y.tag){case 0:case 11:case 15:Qs(8,y,h)}var v=y.child;if(v!==null)v.return=y,de=v;else for(;de!==null;){y=de;var S=y.sibling,k=y.return;if(od(y),y===m){de=null;break}if(S!==null){S.return=k,de=S;break}de=k}}}var B=h.alternate;if(B!==null){var L=B.child;if(L!==null){B.child=null;do{var X=L.sibling;L.sibling=null,L=X}while(L!==null)}}de=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,de=d;else e:for(;de!==null;){if(h=de,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Qs(9,h,h.return)}var D=h.sibling;if(D!==null){D.return=h.return,de=D;break e}de=h.return}}var N=t.current;for(de=N;de!==null;){d=de;var O=d.child;if(d.subtreeFlags&2064&&O!==null)O.return=d,de=O;else e:for(d=N;de!==null;){if(w=de,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:tl(9,w)}}catch(J){St(w,w.return,J)}if(w===d){de=null;break e}var U=w.sibling;if(U!==null){U.return=w.return,de=U;break e}de=w.return}}if(je=u,Jr(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(Ya,t)}catch{}o=!0}return o}finally{Ze=r,Un.transition=e}}return!1}function M0(t,e,r){e=hs(r,e),e=Kf(t,e,1),t=Gr(t,e,1),e=rn(),t!==null&&(Co(t,1,e),En(t,e))}function St(t,e,r){if(t.tag===3)M0(t,t,r);else for(;e!==null;){if(e.tag===3){M0(e,t,r);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Xr===null||!Xr.has(o))){t=hs(r,t),t=Zf(e,t,1),e=Gr(e,t,1),t=rn(),e!==null&&(Co(e,1,t),En(e,t));break}}e=e.return}}function Xp(t,e,r){var o=t.pingCache;o!==null&&o.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&r,jt===t&&(Xt&r)===r&&(Dt===4||Dt===3&&(Xt&130023424)===Xt&&500>Tt()-Qc?gi(t,0):Zc|=r),En(t,e)}function md(t,e){e===0&&(t.mode&1?(e=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):e=1);var r=rn();t=vr(t,e),t!==null&&(Co(t,e,r),En(t,r))}function Yp(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),md(t,r)}function $p(t,e){var r=0;switch(t.tag){case 13:var o=t.stateNode,u=t.memoizedState;u!==null&&(r=u.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(ne(314))}o!==null&&o.delete(e),md(t,r)}var xd;xd=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)xn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return xn=!1,Pp(t,e,r);xn=!!(t.flags&131072)}else xn=!1,dt&&e.flags&1048576&&vf(e,Oa,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;da(t,e),t=e.pendingProps;var u=as(e,en.current);rs(e,r),u=Wc(null,e,o,t,u,r);var h=Gc();return e.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(o)?(h=!0,Ta(e)):h=!1,e.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Uc(e),u.updater=el,e.stateNode=u,u._reactInternals=e,zu(e,o,t,r),e=Wu(null,e,o,!0,h,r)):(e.tag=0,dt&&h&&kc(e),nn(null,e,u,r),e=e.child),e;case 16:o=e.elementType;e:{switch(da(t,e),t=e.pendingProps,u=o._init,o=u(o._payload),e.type=o,u=e.tag=Zp(o),t=Xn(o,t),u){case 0:e=Hu(null,e,o,t,r);break e;case 1:e=A0(null,e,o,t,r);break e;case 11:e=C0(null,e,o,t,r);break e;case 14:e=_0(null,e,o,Xn(o.type,t),r);break e}throw Error(ne(306,o,""))}return e;case 0:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:Xn(o,u),Hu(t,e,o,u,r);case 1:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:Xn(o,u),A0(t,e,o,u,r);case 3:e:{if(ed(e),t===null)throw Error(ne(387));o=e.pendingProps,h=e.memoizedState,u=h.element,Tf(t,e),ka(e,o,null,r);var d=e.memoizedState;if(o=d.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=h,e.memoizedState=h,e.flags&256){u=hs(Error(ne(423)),e),e=S0(t,e,o,r,u);break e}else if(o!==u){u=hs(Error(ne(424)),e),e=S0(t,e,o,r,u);break e}else for(In=Wr(e.stateNode.containerInfo.firstChild),Tn=e,dt=!0,Kn=null,r=Sf(e,null,o,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ls(),o===u){e=Cr(t,e,r);break e}nn(t,e,o,r)}e=e.child}return e;case 5:return bf(e),t===null&&Fu(e),o=e.type,u=e.pendingProps,h=t!==null?t.memoizedProps:null,d=u.children,Du(o,u)?d=null:h!==null&&Du(o,h)&&(e.flags|=32),Jf(t,e),nn(t,e,d,r),e.child;case 6:return t===null&&Fu(e),null;case 13:return td(t,e,r);case 4:return jc(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=us(e,null,o,r):nn(t,e,o,r),e.child;case 11:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:Xn(o,u),C0(t,e,o,u,r);case 7:return nn(t,e,e.pendingProps,r),e.child;case 8:return nn(t,e,e.pendingProps.children,r),e.child;case 12:return nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(o=e.type._context,u=e.pendingProps,h=e.memoizedProps,d=u.value,it(Na,o._currentValue),o._currentValue=d,h!==null)if(qn(h.value,d)){if(h.children===u.children&&!wn.current){e=Cr(t,e,r);break e}}else for(h=e.child,h!==null&&(h.return=e);h!==null;){var w=h.dependencies;if(w!==null){d=h.child;for(var p=w.firstContext;p!==null;){if(p.context===o){if(h.tag===1){p=wr(-1,r&-r),p.tag=2;var m=h.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?p.next=p:(p.next=y.next,y.next=p),m.pending=p}}h.lanes|=r,p=h.alternate,p!==null&&(p.lanes|=r),Uu(h.return,r,e),w.lanes|=r;break}p=p.next}}else if(h.tag===10)d=h.type===e.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(ne(341));d.lanes|=r,w=d.alternate,w!==null&&(w.lanes|=r),Uu(d,r,e),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===e){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}nn(t,e,u.children,r),e=e.child}return e;case 9:return u=e.type,o=e.pendingProps.children,rs(e,r),u=jn(u),o=o(u),e.flags|=1,nn(t,e,o,r),e.child;case 14:return o=e.type,u=Xn(o,e.pendingProps),u=Xn(o.type,u),_0(t,e,o,u,r);case 15:return Qf(t,e,e.type,e.pendingProps,r);case 17:return o=e.type,u=e.pendingProps,u=e.elementType===o?u:Xn(o,u),da(t,e),e.tag=1,yn(o)?(t=!0,Ta(e)):t=!1,rs(e,r),$f(e,o,u),zu(e,o,u,r),Wu(null,e,o,!0,t,r);case 19:return nd(t,e,r);case 22:return qf(t,e,r)}throw Error(ne(156,e.tag))};function wd(t,e){return W1(t,e)}function Kp(t,e,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,r,o){return new Kp(t,e,r,o)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zp(t){if(typeof t=="function")return th(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ec)return 11;if(t===vc)return 14}return 2}function $r(t,e){var r=t.alternate;return r===null?(r=Fn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ma(t,e,r,o,u,h){var d=2;if(o=t,typeof t=="function")th(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case zi:return pi(r.children,u,h,e);case yc:d=8,u|=8;break;case hu:return t=Fn(12,r,e,u|2),t.elementType=hu,t.lanes=h,t;case fu:return t=Fn(13,r,e,u),t.elementType=fu,t.lanes=h,t;case du:return t=Fn(19,r,e,u),t.elementType=du,t.lanes=h,t;case T1:return rl(r,u,h,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S1:d=10;break e;case I1:d=9;break e;case Ec:d=11;break e;case vc:d=14;break e;case Dr:d=16,o=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Fn(d,r,e,u),e.elementType=t,e.type=o,e.lanes=h,e}function pi(t,e,r,o){return t=Fn(7,t,o,e),t.lanes=r,t}function rl(t,e,r,o){return t=Fn(22,t,o,e),t.elementType=T1,t.lanes=r,t.stateNode={isHidden:!1},t}function iu(t,e,r){return t=Fn(6,t,null,e),t.lanes=r,t}function su(t,e,r){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qp(t,e,r,o,u){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ul(0),this.expirationTimes=Ul(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ul(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function nh(t,e,r,o,u,h,d,w,p){return t=new Qp(t,e,r,w,p),e===1?(e=1,h===!0&&(e|=8)):e=0,h=Fn(3,null,null,e),t.current=h,h.stateNode=t,h.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(h),t}function qp(t,e,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:o==null?null:""+o,children:t,containerInfo:e,implementation:r}}function yd(t){if(!t)return Zr;t=t._reactInternals;e:{if(_i(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(yn(r))return yf(t,r,e)}return e}function Ed(t,e,r,o,u,h,d,w,p){return t=nh(r,o,!0,t,u,h,d,w,p),t.context=yd(null),r=t.current,o=rn(),u=Yr(r),h=wr(o,u),h.callback=e??null,Gr(r,h,u),t.current.lanes=u,Co(t,u,o),En(t,o),t}function il(t,e,r,o){var u=e.current,h=rn(),d=Yr(u);return r=yd(r),e.context===null?e.context=r:e.pendingContext=r,e=wr(h,d),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=Gr(u,e,d),t!==null&&(Qn(t,u,d,h),ca(t,u,d)),d}function ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function rh(t,e){P0(t,e),(t=t.alternate)&&P0(t,e)}function Jp(){return null}var vd=typeof reportError=="function"?reportError:function(t){console.error(t)};function ih(t){this._internalRoot=t}sl.prototype.render=ih.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));il(t,e,null,null)};sl.prototype.unmount=ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ei(function(){il(null,t,null,null)}),e[Er]=null}};function sl(t){this._internalRoot=t}sl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Lr.length&&e!==0&&e<Lr[r].priority;r++);Lr.splice(r,0,t),r===0&&J1(t)}};function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L0(){}function em(t,e,r,o,u){if(u){if(typeof o=="function"){var h=o;o=function(){var m=ja(d);h.call(m)}}var d=Ed(e,o,t,0,null,!1,!1,"",L0);return t._reactRootContainer=d,t[Er]=d.current,co(t.nodeType===8?t.parentNode:t),Ei(),d}for(;u=t.lastChild;)t.removeChild(u);if(typeof o=="function"){var w=o;o=function(){var m=ja(p);w.call(m)}}var p=nh(t,0,!1,null,null,!1,!1,"",L0);return t._reactRootContainer=p,t[Er]=p.current,co(t.nodeType===8?t.parentNode:t),Ei(function(){il(e,p,r,o)}),p}function al(t,e,r,o,u){var h=r._reactRootContainer;if(h){var d=h;if(typeof u=="function"){var w=u;u=function(){var p=ja(d);w.call(p)}}il(e,d,t,u)}else d=em(r,e,t,u,o);return ja(d)}K1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=zs(e.pendingLanes);r!==0&&(Ac(e,r|1),En(e,Tt()),!(je&6)&&(fs=Tt()+500,Jr()))}break;case 13:Ei(function(){var o=vr(t,1);if(o!==null){var u=rn();Qn(o,t,1,u)}}),rh(t,1)}};Sc=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var r=rn();Qn(e,t,134217728,r)}rh(t,134217728)}};Z1=function(t){if(t.tag===13){var e=Yr(t),r=vr(t,e);if(r!==null){var o=rn();Qn(r,t,e,o)}rh(t,e)}};Q1=function(){return Ze};q1=function(t,e){var r=Ze;try{return Ze=t,e()}finally{Ze=r}};_u=function(t,e,r){switch(e){case"input":if(mu(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var o=r[e];if(o!==t&&o.form===t.form){var u=Qa(o);if(!u)throw Error(ne(90));O1(o),mu(o,u)}}}break;case"textarea":R1(t,r);break;case"select":e=r.value,e!=null&&Ji(t,!!r.multiple,e,!1)}};F1=qc;U1=Ei;var tm={usingClientEntryPoint:!1,Events:[Ao,Gi,Qa,L1,B1,qc]},Ls={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nm={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||Jp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Ya=ea.inject(nm),ur=ea}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tm;On.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sh(e))throw Error(ne(200));return qp(t,e,null,r)};On.createRoot=function(t,e){if(!sh(t))throw Error(ne(299));var r=!1,o="",u=vd;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(u=e.onRecoverableError)),e=nh(t,1,!1,null,null,r,!1,o,u),t[Er]=e.current,co(t.nodeType===8?t.parentNode:t),new ih(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=V1(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return Ei(t)};On.hydrate=function(t,e,r){if(!ol(e))throw Error(ne(200));return al(null,t,e,!0,r)};On.hydrateRoot=function(t,e,r){if(!sh(t))throw Error(ne(405));var o=r!=null&&r.hydratedSources||null,u=!1,h="",d=vd;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),e=Ed(e,null,t,1,r??null,u,!1,h,d),t[Er]=e.current,co(t),o)for(t=0;t<o.length;t++)r=o[t],u=r._getVersion,u=u(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,u]:e.mutableSourceEagerHydrationData.push(r,u);return new sl(e)};On.render=function(t,e,r){if(!ol(e))throw Error(ne(200));return al(null,t,e,!1,r)};On.unmountComponentAtNode=function(t){if(!ol(t))throw Error(ne(40));return t._reactRootContainer?(Ei(function(){al(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};On.unstable_batchedUpdates=qc;On.unstable_renderSubtreeIntoContainer=function(t,e,r,o){if(!ol(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return al(t,e,r,!1,o)};On.version="18.3.1-next-f1338f8080-20240426";function Cd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cd)}catch(t){console.error(t)}}Cd(),v1.exports=On;var rm=v1.exports,_d,B0=rm;_d=B0.createRoot,B0.hydrateRoot;var im=Object.defineProperty,za=Object.getOwnPropertySymbols,Ad=Object.prototype.hasOwnProperty,Sd=Object.prototype.propertyIsEnumerable,F0=(t,e,r)=>e in t?im(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sm=(t,e)=>{for(var r in e||(e={}))Ad.call(e,r)&&F0(t,r,e[r]);if(za)for(var r of za(e))Sd.call(e,r)&&F0(t,r,e[r]);return t},om=(t,e)=>{var r={};for(var o in t)Ad.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&za)for(var o of za(t))e.indexOf(o)<0&&Sd.call(t,o)&&(r[o]=t[o]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var vi;(t=>{const e=class{constructor(p,m,y,v){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let S=[];for(let B=0;B<this.size;B++)S.push(!1);for(let B=0;B<this.size;B++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(y);if(this.drawCodewords(k),v==-1){let B=1e9;for(let L=0;L<8;L++){this.applyMask(L),this.drawFormatBits(L);const X=this.getPenaltyScore();X<B&&(v=L,B=X),this.applyMask(L)}}h(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(p,m){const y=t.QrSegment.makeSegments(p);return e.encodeSegments(y,m)}static encodeBinary(p,m){const y=t.QrSegment.makeBytes(p);return e.encodeSegments([y],m)}static encodeSegments(p,m,y=1,v=40,S=-1,k=!0){if(!(e.MIN_VERSION<=y&&y<=v&&v<=e.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let B,L;for(B=y;;B++){const O=e.getNumDataCodewords(B,m)*8,U=w.getTotalBits(p,B);if(U<=O){L=U;break}if(B>=v)throw new RangeError("Data too long")}for(const O of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])k&&L<=e.getNumDataCodewords(B,O)*8&&(m=O);let X=[];for(const O of p){o(O.mode.modeBits,4,X),o(O.numChars,O.mode.numCharCountBits(B),X);for(const U of O.getData())X.push(U)}h(X.length==L);const D=e.getNumDataCodewords(B,m)*8;h(X.length<=D),o(0,Math.min(4,D-X.length),X),o(0,(8-X.length%8)%8,X),h(X.length%8==0);for(let O=236;X.length<D;O^=253)o(O,8,X);let N=[];for(;N.length*8<X.length;)N.push(0);return X.forEach((O,U)=>N[U>>>3]|=O<<7-(U&7)),new e(B,m,N,S)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let y=0;y<m;y++)for(let v=0;v<m;v++)y==0&&v==0||y==0&&v==m-1||y==m-1&&v==0||this.drawAlignmentPattern(p[y],p[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let y=m;for(let S=0;S<10;S++)y=y<<1^(y>>>9)*1335;const v=(m<<10|y)^21522;h(v>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,u(v,S));this.setFunctionModule(8,7,u(v,6)),this.setFunctionModule(8,8,u(v,7)),this.setFunctionModule(7,8,u(v,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,u(v,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,u(v,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,u(v,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;h(m>>>18==0);for(let y=0;y<18;y++){const v=u(m,y),S=this.size-11+y%3,k=Math.floor(y/3);this.setFunctionModule(S,k,v),this.setFunctionModule(k,S,v)}}drawFinderPattern(p,m){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const S=Math.max(Math.abs(v),Math.abs(y)),k=p+v,B=m+y;0<=k&&k<this.size&&0<=B&&B<this.size&&this.setFunctionModule(k,B,S!=2&&S!=4)}}drawAlignmentPattern(p,m){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(p+v,m+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(p,m,y){this.modules[m][p]=y,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,y=this.errorCorrectionLevel;if(p.length!=e.getNumDataCodewords(m,y))throw new RangeError("Invalid argument");const v=e.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][m],S=e.ECC_CODEWORDS_PER_BLOCK[y.ordinal][m],k=Math.floor(e.getNumRawDataModules(m)/8),B=v-k%v,L=Math.floor(k/v);let X=[];const D=e.reedSolomonComputeDivisor(S);for(let O=0,U=0;O<v;O++){let J=p.slice(U,U+L-S+(O<B?0:1));U+=J.length;const q=e.reedSolomonComputeRemainder(J,D);O<B&&J.push(0),X.push(J.concat(q))}let N=[];for(let O=0;O<X[0].length;O++)X.forEach((U,J)=>{(O!=L-S||J>=B)&&N.push(U[O])});return h(N.length==k),N}drawCodewords(p){if(p.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let S=0;S<2;S++){const k=y-S,L=(y+1&2)==0?this.size-1-v:v;!this.isFunction[L][k]&&m<p.length*8&&(this.modules[L][k]=u(p[m>>>3],7-(m&7)),m++)}}h(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let y=0;y<this.size;y++){let v;switch(p){case 0:v=(y+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+m)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(m/2))%2==0;break;case 5:v=y*m%2+y*m%3==0;break;case 6:v=(y*m%2+y*m%3)%2==0;break;case 7:v=((y+m)%2+y*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][y]&&v&&(this.modules[m][y]=!this.modules[m][y])}}getPenaltyScore(){let p=0;for(let S=0;S<this.size;S++){let k=!1,B=0,L=[0,0,0,0,0,0,0];for(let X=0;X<this.size;X++)this.modules[S][X]==k?(B++,B==5?p+=e.PENALTY_N1:B>5&&p++):(this.finderPenaltyAddHistory(B,L),k||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),k=this.modules[S][X],B=1);p+=this.finderPenaltyTerminateAndCount(k,B,L)*e.PENALTY_N3}for(let S=0;S<this.size;S++){let k=!1,B=0,L=[0,0,0,0,0,0,0];for(let X=0;X<this.size;X++)this.modules[X][S]==k?(B++,B==5?p+=e.PENALTY_N1:B>5&&p++):(this.finderPenaltyAddHistory(B,L),k||(p+=this.finderPenaltyCountPatterns(L)*e.PENALTY_N3),k=this.modules[X][S],B=1);p+=this.finderPenaltyTerminateAndCount(k,B,L)*e.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let k=0;k<this.size-1;k++){const B=this.modules[S][k];B==this.modules[S][k+1]&&B==this.modules[S+1][k]&&B==this.modules[S+1][k+1]&&(p+=e.PENALTY_N2)}let m=0;for(const S of this.modules)m=S.reduce((k,B)=>k+(B?1:0),m);const y=this.size*this.size,v=Math.ceil(Math.abs(m*20-y*10)/y)-1;return h(0<=v&&v<=9),p+=v*e.PENALTY_N4,h(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let v=this.size-7;y.length<p;v-=m)y.splice(1,0,v);return y}}static getNumRawDataModules(p){if(p<e.MIN_VERSION||p>e.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;m-=(25*y-10)*y-55,p>=7&&(m-=36)}return h(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(e.getNumRawDataModules(p)/8)-e.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*e.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<p-1;v++)m.push(0);m.push(1);let y=1;for(let v=0;v<p;v++){for(let S=0;S<m.length;S++)m[S]=e.reedSolomonMultiply(m[S],y),S+1<m.length&&(m[S]^=m[S+1]);y=e.reedSolomonMultiply(y,2)}return m}static reedSolomonComputeRemainder(p,m){let y=m.map(v=>0);for(const v of p){const S=v^y.shift();y.push(0),m.forEach((k,B)=>y[B]^=e.reedSolomonMultiply(k,S))}return y}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(m>>>v&1)*p;return h(y>>>8==0),y}finderPenaltyCountPatterns(p){const m=p[1];h(m<=this.size*3);const y=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(y&&p[0]>=m*4&&p[6]>=m?1:0)+(y&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,y){return p&&(this.finderPenaltyAddHistory(m,y),m=0),m+=this.size,this.finderPenaltyAddHistory(m,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function o(p,m,y){if(m<0||m>31||p>>>m)throw new RangeError("Value out of range");for(let v=m-1;v>=0;v--)y.push(p>>>v&1)}function u(p,m){return(p>>>m&1)!=0}function h(p){if(!p)throw new Error("Assertion error")}const d=class{constructor(p,m,y){if(this.mode=p,this.numChars=m,this.bitData=y,m<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let m=[];for(const y of p)o(y,8,m);return new d(d.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!d.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let y=0;y<p.length;){const v=Math.min(p.length-y,3);o(parseInt(p.substr(y,v),10),v*3+1,m),y+=v}return new d(d.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!d.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],y;for(y=0;y+2<=p.length;y+=2){let v=d.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;v+=d.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),o(v,11,m)}return y<p.length&&o(d.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,m),new d(d.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:d.isNumeric(p)?[d.makeNumeric(p)]:d.isAlphanumeric(p)?[d.makeAlphanumeric(p)]:[d.makeBytes(d.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)o(p,8,m);else if(p<16384)o(2,2,m),o(p,14,m);else if(p<1e6)o(6,3,m),o(p,21,m);else throw new RangeError("ECI assignment value out of range");return new d(d.Mode.ECI,0,m)}static isNumeric(p){return d.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return d.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let y=0;for(const v of p){const S=v.mode.numCharCountBits(m);if(v.numChars>=1<<S)return 1/0;y+=4+S+v.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?m.push(p.charCodeAt(y)):(m.push(parseInt(p.substr(y+1,2),16)),y+=2);return m}};let w=d;w.NUMERIC_REGEX=/^[0-9]*$/,w.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,w.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=w})(vi||(vi={}));(t=>{(e=>{const r=class{constructor(u,h){this.ordinal=u,this.formatBits=h}};let o=r;o.LOW=new r(0,1),o.MEDIUM=new r(1,0),o.QUARTILE=new r(2,3),o.HIGH=new r(3,2),e.Ecc=o})(t.QrCode||(t.QrCode={}))})(vi||(vi={}));(t=>{(e=>{const r=class{constructor(u,h){this.modeBits=u,this.numBitsCharCount=h}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};let o=r;o.NUMERIC=new r(1,[10,12,14]),o.ALPHANUMERIC=new r(2,[9,11,13]),o.BYTE=new r(4,[8,16,16]),o.KANJI=new r(8,[8,10,12]),o.ECI=new r(7,[0,0,0]),e.Mode=o})(t.QrSegment||(t.QrSegment={}))})(vi||(vi={}));var Hs=vi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var am={L:Hs.QrCode.Ecc.LOW,M:Hs.QrCode.Ecc.MEDIUM,Q:Hs.QrCode.Ecc.QUARTILE,H:Hs.QrCode.Ecc.HIGH},lm=128,um="L",cm="#FFFFFF",hm="#000000",fm=!1,Id=4,dm=.1;function gm(t,e=0){const r=[];return t.forEach(function(o,u){let h=null;o.forEach(function(d,w){if(!d&&h!==null){r.push(`M${h+e} ${u+e}h${w-h}v1H${h+e}z`),h=null;return}if(w===o.length-1){if(!d)return;h===null?r.push(`M${w+e},${u+e} h1v1H${w+e}z`):r.push(`M${h+e},${u+e} h${w+1-h}v1H${h+e}z`);return}d&&h===null&&(h=w)})}),r.join("")}function pm(t,e){return t.slice().map((r,o)=>o<e.y||o>=e.y+e.h?r:r.map((u,h)=>h<e.x||h>=e.x+e.w?u:!1))}function mm(t,e,r,o){if(o==null)return null;const u=r?Id:0,h=t.length+u*2,d=Math.floor(e*dm),w=h/e,p=(o.width||d)*w,m=(o.height||d)*w,y=o.x==null?t.length/2-p/2:o.x*w,v=o.y==null?t.length/2-m/2:o.y*w;let S=null;if(o.excavate){let k=Math.floor(y),B=Math.floor(v),L=Math.ceil(p+y-k),X=Math.ceil(m+v-B);S={x:k,y:B,w:L,h:X}}return{x:y,y:v,h:m,w:p,excavation:S}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function xm(t){const e=t,{value:r,size:o=lm,level:u=um,bgColor:h=cm,fgColor:d=hm,includeMargin:w=fm,imageSettings:p}=e,m=om(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let y=Hs.QrCode.encodeText(r,am[u]).getModules();const v=w?Id:0,S=y.length+v*2,k=mm(y,o,w,p);let B=null;p!=null&&k!=null&&(k.excavation!=null&&(y=pm(y,k.excavation)),B=Fo.createElement("image",{xlinkHref:p.src,height:k.h,width:k.w,x:k.x+v,y:k.y+v,preserveAspectRatio:"none"}));const L=gm(y,v);return Fo.createElement("svg",sm({height:o,width:o,viewBox:`0 0 ${S} ${S}`},m),Fo.createElement("path",{fill:h,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),Fo.createElement("path",{fill:d,d:L,shapeRendering:"crispEdges"}),B)}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ai=(t,e)=>{const r=bt.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:h=2,absoluteStrokeWidth:d,className:w="",children:p,...m},y)=>bt.createElement("svg",{ref:y,...wm,width:u,height:u,stroke:o,strokeWidth:d?Number(h)*24/Number(u):h,className:["lucide",`lucide-${ym(t)}`,w].join(" "),...m},[...e.map(([v,S])=>bt.createElement(v,S)),...Array.isArray(p)?p:[p]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Ai("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Ai("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Ai("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Ai("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Ai("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Ai("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Ai("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function Tm({onSubmit:t}){const[e,r]=bt.useState({name:"",email:""}),o=u=>{u.preventDefault();const h={name:e.name,email:e.email,count:2,remainingScans:2};t(h),r({name:"",email:""})};return ce.jsxs("form",{onSubmit:o,className:"space-y-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),ce.jsx("input",{type:"text",id:"name",value:e.name,onChange:u=>r({...e,name:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),ce.jsx("input",{type:"email",id:"email",value:e.email,onChange:u=>r({...e,email:u.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),ce.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Add Employee"})]})}var fe;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var U0=new Map([[fe.QR_CODE,"QR_CODE"],[fe.AZTEC,"AZTEC"],[fe.CODABAR,"CODABAR"],[fe.CODE_39,"CODE_39"],[fe.CODE_93,"CODE_93"],[fe.CODE_128,"CODE_128"],[fe.DATA_MATRIX,"DATA_MATRIX"],[fe.MAXICODE,"MAXICODE"],[fe.ITF,"ITF"],[fe.EAN_13,"EAN_13"],[fe.EAN_8,"EAN_8"],[fe.PDF_417,"PDF_417"],[fe.RSS_14,"RSS_14"],[fe.RSS_EXPANDED,"RSS_EXPANDED"],[fe.UPC_A,"UPC_A"],[fe.UPC_E,"UPC_E"],[fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),j0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(j0||(j0={}));function bm(t){return Object.values(fe).includes(t)}var Va;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Va||(Va={}));var Om=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Va.SCAN_TYPE_CAMERA,Va.SCAN_TYPE_FILE],t}(),Td=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!U0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,U0.get(e))},t}(),z0=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),nc;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(nc||(nc={}));var Nm=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:nc.UNKWOWN_ERROR}},t}(),Rm=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function hr(t){return typeof t>"u"||t===null}var qi=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),bd=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var o=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(u),d=Object.keys(e),w=0,p=d;w<p.length;w++){var m=p[w];if(h.has(m))return r.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),rc={exports:{}};(function(t,e){(function(r,o){o(e)})(Ut,function(r){function o(C){return C==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,n){C.__proto__=n}||function(C,n){for(var i in n)n.hasOwnProperty(i)&&(C[i]=n[i])};function h(C,n){u(C,n);function i(){this.constructor=C}C.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function d(C,n){var i=Object.setPrototypeOf;i?i(C,n):C.__proto__=n}function w(C,n){n===void 0&&(n=C.constructor);var i=Error.captureStackTrace;i&&i(C,n)}var p=function(C){h(n,C);function n(i){var s=this.constructor,a=C.call(this,i)||this;return Object.defineProperty(a,"name",{value:s.name,enumerable:!1}),d(a,s.prototype),w(a),a}return n}(Error);class m extends p{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}m.kind="Exception";class y extends m{}y.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class S{constructor(n){if(this.binarizer=n,n===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,i){return this.binarizer.getBlackRow(n,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,i,s,a){const l=this.binarizer.getLuminanceSource().crop(n,i,s,a);return new S(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends m{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class B{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(n,i,s,a,l){for(;l--;)s[a++]=n[i++]}static currentTimeMillis(){return Date.now()}}class X extends m{}X.kind="IndexOutOfBoundsException";class D extends X{constructor(n=void 0,i=void 0){super(i),this.index=n,this.message=i}}D.kind="ArrayIndexOutOfBoundsException";class N{static fill(n,i){for(let s=0,a=n.length;s<a;s++)n[s]=i}static fillWithin(n,i,s,a){N.rangeCheck(n.length,i,s);for(let l=i;l<s;l++)n[l]=a}static rangeCheck(n,i,s){if(i>s)throw new v("fromIndex("+i+") > toIndex("+s+")");if(i<0)throw new D(i);if(s>n)throw new D(s)}static asList(...n){return n}static create(n,i,s){return Array.from({length:n}).map(l=>Array.from({length:i}).fill(s))}static createInt32Array(n,i,s){return Array.from({length:n}).map(l=>Int32Array.from({length:i}).fill(s))}static equals(n,i){if(!n||!i||!n.length||!i.length||n.length!==i.length)return!1;for(let s=0,a=n.length;s<a;s++)if(n[s]!==i[s])return!1;return!0}static hashCode(n){if(n===null)return 0;let i=1;for(const s of n)i=31*i+s;return i}static fillUint8Array(n,i){for(let s=0;s!==n.length;s++)n[s]=i}static copyOf(n,i){return n.slice(0,i)}static copyOfUint8Array(n,i){if(n.length<=i){const s=new Uint8Array(i);return s.set(n),s}return n.slice(0,i)}static copyOfRange(n,i,s){const a=s-i,l=new Int32Array(a);return L.arraycopy(n,i,l,0,a),l}static binarySearch(n,i,s){s===void 0&&(s=N.numberComparator);let a=0,l=n.length-1;for(;a<=l;){const c=l+a>>1,f=s(i,n[c]);if(f>0)a=c+1;else if(f<0)l=c-1;else return c}return-a-1}static numberComparator(n,i){return n-i}}class O{static numberOfTrailingZeros(n){let i;if(n===0)return 32;let s=31;return i=n<<16,i!==0&&(s-=16,n=i),i=n<<8,i!==0&&(s-=8,n=i),i=n<<4,i!==0&&(s-=4,n=i),i=n<<2,i!==0&&(s-=2,n=i),s-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let i=1;return n>>>16||(i+=16,n<<=16),n>>>24||(i+=8,n<<=8),n>>>28||(i+=4,n<<=4),n>>>30||(i+=2,n<<=2),i-=n>>>31,i}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,i){return Math.trunc(n/i)}static parseInt(n,i=void 0){return parseInt(n,i)}}O.MIN_VALUE_32_BITS=-2147483648,O.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(n,i){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,i==null?this.bits=U.makeArray(n):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const i=U.makeArray(n);L.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=s[a];l&=~((1<<(n&31))-1);const c=s.length;for(;l===0;){if(++a===c)return i;l=s[a]}const f=a*32+O.numberOfTrailingZeros(l);return f>i?i:f}getNextUnset(n){const i=this.size;if(n>=i)return i;const s=this.bits;let a=Math.floor(n/32),l=~s[a];l&=~((1<<(n&31))-1);const c=s.length;for(;l===0;){if(++a===c)return i;l=~s[a]}const f=a*32+O.numberOfTrailingZeros(l);return f>i?i:f}setBulk(n,i){this.bits[Math.floor(n/32)]=i}setRange(n,i){if(i<n||n<0||i>this.size)throw new v;if(i===n)return;i--;const s=Math.floor(n/32),a=Math.floor(i/32),l=this.bits;for(let c=s;c<=a;c++){const f=c>s?0:n&31,x=(2<<(c<a?31:i&31))-(1<<f);l[c]|=x}}clear(){const n=this.bits.length,i=this.bits;for(let s=0;s<n;s++)i[s]=0}isRange(n,i,s){if(i<n||n<0||i>this.size)throw new v;if(i===n)return!0;i--;const a=Math.floor(n/32),l=Math.floor(i/32),c=this.bits;for(let f=a;f<=l;f++){const g=f>a?0:n&31,E=(2<<(f<l?31:i&31))-(1<<g)&4294967295;if((c[f]&E)!==(s?E:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,i){if(i<0||i>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let s=i;s>0;s--)this.appendBit((n>>s-1&1)===1)}appendBitArray(n){const i=n.size;this.ensureCapacity(this.size+i);for(let s=0;s<i;s++)this.appendBit(n.get(s))}xor(n){if(this.size!==n.size)throw new v("Sizes don't match");const i=this.bits;for(let s=0,a=i.length;s<a;s++)i[s]^=n.bits[s]}toBytes(n,i,s,a){for(let l=0;l<a;l++){let c=0;for(let f=0;f<8;f++)this.get(n)&&(c|=1<<7-f),n++;i[s+l]=c}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),s=i+1,a=this.bits;for(let l=0;l<s;l++){let c=a[l];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,n[i-l]=c}if(this.size!==s*32){const l=s*32-this.size;let c=n[0]>>>l;for(let f=1;f<s;f++){const g=n[f];c|=g<<32-l,n[f-1]=c,c=g>>>l}n[s-1]=c}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof U))return!1;const i=n;return this.size===i.size&&N.equals(this.bits,i.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let n="";for(let i=0,s=this.size;i<s;i++)i&7||(n+=" "),n+=this.get(i)?"X":".";return n}clone(){return new U(this.size,this.bits.slice())}}var J;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(J||(J={}));var q=J;class F extends m{static getFormatInstance(){return new F}}F.kind="FormatException";var R;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(R||(R={}));class b{constructor(n,i,s,...a){this.valueIdentifier=n,this.name=s,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=a,b.VALUE_IDENTIFIER_TO_ECI.set(n,this),b.NAME_TO_ECI.set(s,this);const l=this.values;for(let c=0,f=l.length;c!==f;c++){const g=l[c];b.VALUES_TO_ECI.set(g,this)}for(const c of a)b.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new F("incorect value");const i=b.VALUES_TO_ECI.get(n);if(i===void 0)throw new F("incorect value");return i}static getCharacterSetECIByName(n){const i=b.NAME_TO_ECI.get(n);if(i===void 0)throw new F("incorect value");return i}equals(n){if(!(n instanceof b))return!1;const i=n;return this.getName()===i.getName()}}b.VALUE_IDENTIFIER_TO_ECI=new Map,b.VALUES_TO_ECI=new Map,b.NAME_TO_ECI=new Map,b.Cp437=new b(R.Cp437,Int32Array.from([0,2]),"Cp437"),b.ISO8859_1=new b(R.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),b.ISO8859_2=new b(R.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),b.ISO8859_3=new b(R.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),b.ISO8859_4=new b(R.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),b.ISO8859_5=new b(R.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),b.ISO8859_6=new b(R.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),b.ISO8859_7=new b(R.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),b.ISO8859_8=new b(R.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),b.ISO8859_9=new b(R.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),b.ISO8859_10=new b(R.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),b.ISO8859_11=new b(R.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),b.ISO8859_13=new b(R.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),b.ISO8859_14=new b(R.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),b.ISO8859_15=new b(R.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),b.ISO8859_16=new b(R.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),b.SJIS=new b(R.SJIS,20,"SJIS","Shift_JIS"),b.Cp1250=new b(R.Cp1250,21,"Cp1250","windows-1250"),b.Cp1251=new b(R.Cp1251,22,"Cp1251","windows-1251"),b.Cp1252=new b(R.Cp1252,23,"Cp1252","windows-1252"),b.Cp1256=new b(R.Cp1256,24,"Cp1256","windows-1256"),b.UnicodeBigUnmarked=new b(R.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),b.UTF8=new b(R.UTF8,26,"UTF8","UTF-8"),b.ASCII=new b(R.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),b.Big5=new b(R.Big5,28,"Big5"),b.GB18030=new b(R.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),b.EUC_KR=new b(R.EUC_KR,30,"EUC_KR","EUC-KR");class G extends m{}G.kind="UnsupportedOperationException";class oe{static decode(n,i){const s=this.encodingName(i);return this.customDecoder?this.customDecoder(n,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(n,s):new TextDecoder(s).decode(n)}static shouldDecodeOnFallback(n){return!oe.isBrowser()&&n==="ISO-8859-1"}static encode(n,i){const s=this.encodingName(i);return this.customEncoder?this.customEncoder(n,s):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof b?n:b.getCharacterSetECIByName(n)}static decodeFallback(n,i){const s=this.encodingCharacterSet(i);if(oe.isDecodeFallbackSupported(s)){let a="";for(let l=0,c=n.length;l<c;l++){let f=n[l].toString(16);f.length<2&&(f="0"+f),a+="%"+f}return decodeURIComponent(a)}if(s.equals(b.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new G(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(b.UTF8)||n.equals(b.ISO8859_1)||n.equals(b.ASCII)}static encodeFallback(n){const s=btoa(unescape(encodeURIComponent(n))).split(""),a=[];for(let l=0;l<s.length;l++)a.push(s[l].charCodeAt(0));return new Uint8Array(a)}}class Y{static castAsNonUtf8Char(n,i=null){const s=i?i.getName():this.ISO88591;return oe.decode(new Uint8Array([n]),s)}static guessEncoding(n,i){if(i!=null&&i.get(q.CHARACTER_SET)!==void 0)return i.get(q.CHARACTER_SET).toString();const s=n.length;let a=!0,l=!0,c=!0,f=0,g=0,x=0,E=0,_=0,A=0,T=0,M=0,P=0,j=0,W=0;const ie=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let se=0;se<s&&(a||l||c);se++){const Z=n[se]&255;c&&(f>0?Z&128?f--:c=!1:Z&128&&(Z&64?(f++,Z&32?(f++,Z&16?(f++,Z&8?c=!1:E++):x++):g++):c=!1)),a&&(Z>127&&Z<160?a=!1:Z>159&&(Z<192||Z===215||Z===247)&&W++),l&&(_>0?Z<64||Z===127||Z>252?l=!1:_--:Z===128||Z===160||Z>239?l=!1:Z>160&&Z<224?(A++,M=0,T++,T>P&&(P=T)):Z>127?(_++,T=0,M++,M>j&&(j=M)):(T=0,M=0))}return c&&f>0&&(c=!1),l&&_>0&&(l=!1),c&&(ie||g+x+E>0)?Y.UTF8:l&&(Y.ASSUME_SHIFT_JIS||P>=3||j>=3)?Y.SHIFT_JIS:a&&l?P===2&&A===2||W*10>=s?Y.SHIFT_JIS:Y.ISO88591:a?Y.ISO88591:l?Y.SHIFT_JIS:c?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(n,...i){let s=-1;function a(c,f,g,x,E,_){if(c==="%%")return"%";if(i[++s]===void 0)return;c=x?parseInt(x.substr(1)):void 0;let A=E?parseInt(E.substr(1)):void 0,T;switch(_){case"s":T=i[s];break;case"c":T=i[s][0];break;case"f":T=parseFloat(i[s]).toFixed(c);break;case"p":T=parseFloat(i[s]).toPrecision(c);break;case"e":T=parseFloat(i[s]).toExponential(c);break;case"x":T=parseInt(i[s]).toString(A||16);break;case"d":T=parseFloat(parseInt(i[s],A||10).toPrecision(c)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let M=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<M;)T=f!==void 0?T+P:P+T;return T}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}static getBytes(n,i){return oe.encode(n,i)}static getCharCode(n,i=0){return n.charCodeAt(i)}static getCharAt(n){return String.fromCharCode(n)}}Y.SHIFT_JIS=b.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=b.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=b.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class ae{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,i,s){for(let a=i;i<i+s;a++)this.append(n[a]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+1)}substring(n,i){return this.value.substring(n,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,i){this.value=this.value.substr(0,n)+i+this.value.substr(n+i.length)}}class me{constructor(n,i,s,a){if(this.width=n,this.height=i,this.rowSize=s,this.bits=a,i==null&&(i=n),this.height=i,n<1||i<1)throw new v("Both dimensions must be greater than 0");s==null&&(s=Math.floor((n+31)/32)),this.rowSize=s,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const i=n.length,s=n[0].length,a=new me(s,i);for(let l=0;l<i;l++){const c=n[l];for(let f=0;f<s;f++)c[f]&&a.set(f,l)}return a}static parseFromString(n,i,s){if(n===null)throw new v("stringRepresentation cannot be null");const a=new Array(n.length);let l=0,c=0,f=-1,g=0,x=0;for(;x<n.length;)if(n.charAt(x)===`
`||n.charAt(x)==="\r"){if(l>c){if(f===-1)f=l-c;else if(l-c!==f)throw new v("row lengths do not match");c=l,g++}x++}else if(n.substring(x,x+i.length)===i)x+=i.length,a[l]=!0,l++;else if(n.substring(x,x+s.length)===s)x+=s.length,a[l]=!1,l++;else throw new v("illegal character encountered: "+n.substring(x));if(l>c){if(f===-1)f=l-c;else if(l-c!==f)throw new v("row lengths do not match");g++}const E=new me(f,g);for(let _=0;_<l;_++)a[_]&&E.set(Math.floor(_%f),Math.floor(_/f));return E}get(n,i){const s=i*this.rowSize+Math.floor(n/32);return(this.bits[s]>>>(n&31)&1)!==0}set(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]|=1<<(n&31)&4294967295}unset(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]&=~(1<<(n&31)&4294967295)}flip(n,i){const s=i*this.rowSize+Math.floor(n/32);this.bits[s]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new v("input matrix dimensions do not match");const i=new U(Math.floor(this.width/32)+1),s=this.rowSize,a=this.bits;for(let l=0,c=this.height;l<c;l++){const f=l*s,g=n.getRow(l,i).getBitArray();for(let x=0;x<s;x++)a[f+x]^=g[x]}}clear(){const n=this.bits,i=n.length;for(let s=0;s<i;s++)n[s]=0}setRegion(n,i,s,a){if(i<0||n<0)throw new v("Left and top must be nonnegative");if(a<1||s<1)throw new v("Height and width must be at least 1");const l=n+s,c=i+a;if(c>this.height||l>this.width)throw new v("The region must fit inside the matrix");const f=this.rowSize,g=this.bits;for(let x=i;x<c;x++){const E=x*f;for(let _=n;_<l;_++)g[E+Math.floor(_/32)]|=1<<(_&31)&4294967295}}getRow(n,i){i==null||i.getSize()<this.width?i=new U(this.width):i.clear();const s=this.rowSize,a=this.bits,l=n*s;for(let c=0;c<s;c++)i.setBulk(c*32,a[l+c]);return i}setRow(n,i){L.arraycopy(i.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),i=this.getHeight();let s=new U(n),a=new U(n);for(let l=0,c=Math.floor((i+1)/2);l<c;l++)s=this.getRow(l,s),a=this.getRow(i-1-l,a),s.reverse(),a.reverse(),this.setRow(l,a),this.setRow(i-1-l,s)}getEnclosingRectangle(){const n=this.width,i=this.height,s=this.rowSize,a=this.bits;let l=n,c=i,f=-1,g=-1;for(let x=0;x<i;x++)for(let E=0;E<s;E++){const _=a[x*s+E];if(_!==0){if(x<c&&(c=x),x>g&&(g=x),E*32<l){let A=0;for(;!(_<<31-A&4294967295);)A++;E*32+A<l&&(l=E*32+A)}if(E*32+31>f){let A=31;for(;!(_>>>A);)A--;E*32+A>f&&(f=E*32+A)}}}return f<l||g<c?null:Int32Array.from([l,c,f-l+1,g-c+1])}getTopLeftOnBit(){const n=this.rowSize,i=this.bits;let s=0;for(;s<i.length&&i[s]===0;)s++;if(s===i.length)return null;const a=s/n;let l=s%n*32;const c=i[s];let f=0;for(;!(c<<31-f&4294967295);)f++;return l+=f,Int32Array.from([l,a])}getBottomRightOnBit(){const n=this.rowSize,i=this.bits;let s=i.length-1;for(;s>=0&&i[s]===0;)s--;if(s<0)return null;const a=Math.floor(s/n);let l=Math.floor(s%n)*32;const c=i[s];let f=31;for(;!(c>>>f);)f--;return l+=f,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof me))return!1;const i=n;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&N.equals(this.bits,i.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+N.hashCode(this.bits),n}toString(n="X ",i="  ",s=`
`){return this.buildToString(n,i,s)}buildToString(n,i,s){let a=new ae;for(let l=0,c=this.height;l<c;l++){for(let f=0,g=this.width;f<g;f++)a.append(this.get(f,l)?n:i);a.append(s)}return a.toString()}clone(){return new me(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends m{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class Ce extends B{constructor(n){super(n),this.luminances=Ce.EMPTY,this.buckets=new Int32Array(Ce.LUMINANCE_BUCKETS)}getBlackRow(n,i){const s=this.getLuminanceSource(),a=s.getWidth();i==null||i.getSize()<a?i=new U(a):i.clear(),this.initArrays(a);const l=s.getRow(n,this.luminances),c=this.buckets;for(let g=0;g<a;g++)c[(l[g]&255)>>Ce.LUMINANCE_SHIFT]++;const f=Ce.estimateBlackPoint(c);if(a<3)for(let g=0;g<a;g++)(l[g]&255)<f&&i.set(g);else{let g=l[0]&255,x=l[1]&255;for(let E=1;E<a-1;E++){const _=l[E+1]&255;(x*4-g-_)/2<f&&i.set(E),g=x,x=_}}return i}getBlackMatrix(){const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight(),a=new me(i,s);this.initArrays(i);const l=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(s*g/5),E=n.getRow(x,this.luminances),_=Math.floor(i*4/5);for(let A=Math.floor(i/5);A<_;A++){const T=E[A]&255;l[T>>Ce.LUMINANCE_SHIFT]++}}const c=Ce.estimateBlackPoint(l),f=n.getMatrix();for(let g=0;g<s;g++){const x=g*i;for(let E=0;E<i;E++)(f[x+E]&255)<c&&a.set(E,g)}return a}createBinarizer(n){return new Ce(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const i=this.buckets;for(let s=0;s<Ce.LUMINANCE_BUCKETS;s++)i[s]=0}static estimateBlackPoint(n){const i=n.length;let s=0,a=0,l=0;for(let E=0;E<i;E++)n[E]>l&&(a=E,l=n[E]),n[E]>s&&(s=n[E]);let c=0,f=0;for(let E=0;E<i;E++){const _=E-a,A=n[E]*_*_;A>f&&(c=E,f=A)}if(a>c){const E=a;a=c,c=E}if(c-a<=i/16)throw new V;let g=c-1,x=-1;for(let E=c-1;E>a;E--){const _=E-a,A=_*_*(c-E)*(s-n[E]);A>x&&(g=E,x=A)}return g<<Ce.LUMINANCE_SHIFT}}Ce.LUMINANCE_BITS=5,Ce.LUMINANCE_SHIFT=8-Ce.LUMINANCE_BITS,Ce.LUMINANCE_BUCKETS=1<<Ce.LUMINANCE_BITS,Ce.EMPTY=Uint8ClampedArray.from([0]);class K extends Ce{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),i=n.getWidth(),s=n.getHeight();if(i>=K.MINIMUM_DIMENSION&&s>=K.MINIMUM_DIMENSION){const a=n.getMatrix();let l=i>>K.BLOCK_SIZE_POWER;i&K.BLOCK_SIZE_MASK&&l++;let c=s>>K.BLOCK_SIZE_POWER;s&K.BLOCK_SIZE_MASK&&c++;const f=K.calculateBlackPoints(a,l,c,i,s),g=new me(i,s);K.calculateThresholdForBlock(a,l,c,i,s,f,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new K(n)}static calculateThresholdForBlock(n,i,s,a,l,c,f){const g=l-K.BLOCK_SIZE,x=a-K.BLOCK_SIZE;for(let E=0;E<s;E++){let _=E<<K.BLOCK_SIZE_POWER;_>g&&(_=g);const A=K.cap(E,2,s-3);for(let T=0;T<i;T++){let M=T<<K.BLOCK_SIZE_POWER;M>x&&(M=x);const P=K.cap(T,2,i-3);let j=0;for(let ie=-2;ie<=2;ie++){const se=c[A+ie];j+=se[P-2]+se[P-1]+se[P]+se[P+1]+se[P+2]}const W=j/25;K.thresholdBlock(n,M,_,W,a,f)}}}static cap(n,i,s){return n<i?i:n>s?s:n}static thresholdBlock(n,i,s,a,l,c){for(let f=0,g=s*l+i;f<K.BLOCK_SIZE;f++,g+=l)for(let x=0;x<K.BLOCK_SIZE;x++)(n[g+x]&255)<=a&&c.set(i+x,s+f)}static calculateBlackPoints(n,i,s,a,l){const c=l-K.BLOCK_SIZE,f=a-K.BLOCK_SIZE,g=new Array(s);for(let x=0;x<s;x++){g[x]=new Int32Array(i);let E=x<<K.BLOCK_SIZE_POWER;E>c&&(E=c);for(let _=0;_<i;_++){let A=_<<K.BLOCK_SIZE_POWER;A>f&&(A=f);let T=0,M=255,P=0;for(let W=0,ie=E*a+A;W<K.BLOCK_SIZE;W++,ie+=a){for(let se=0;se<K.BLOCK_SIZE;se++){const Z=n[ie+se]&255;T+=Z,Z<M&&(M=Z),Z>P&&(P=Z)}if(P-M>K.MIN_DYNAMIC_RANGE)for(W++,ie+=a;W<K.BLOCK_SIZE;W++,ie+=a)for(let se=0;se<K.BLOCK_SIZE;se++)T+=n[ie+se]&255}let j=T>>K.BLOCK_SIZE_POWER*2;if(P-M<=K.MIN_DYNAMIC_RANGE&&(j=M/2,x>0&&_>0)){const W=(g[x-1][_]+2*g[x][_-1]+g[x-1][_-1])/4;M<W&&(j=W)}g[x][_]=j}}return g}}K.BLOCK_SIZE_POWER=3,K.BLOCK_SIZE=1<<K.BLOCK_SIZE_POWER,K.BLOCK_SIZE_MASK=K.BLOCK_SIZE-1,K.MINIMUM_DIMENSION=K.BLOCK_SIZE*5,K.MIN_DYNAMIC_RANGE=24;class re{constructor(n,i){this.width=n,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,i,s,a){throw new G("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new G("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new G("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let i=new ae;for(let s=0;s<this.height;s++){const a=this.getRow(s,n);for(let l=0;l<this.width;l++){const c=a[l]&255;let f;c<64?f="#":c<128?f="+":c<192?f=".":f=" ",i.append(f)}i.append(`
`)}return i.toString()}}class Q extends re{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,i){const s=this.delegate.getRow(n,i),a=this.getWidth();for(let l=0;l<a;l++)s[l]=255-(s[l]&255);return s}getMatrix(){const n=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),s=new Uint8ClampedArray(i);for(let a=0;a<i;a++)s[a]=255-(n[a]&255);return s}isCropSupported(){return this.delegate.isCropSupported()}crop(n,i,s,a){return new Q(this.delegate.crop(n,i,s,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Q(this.delegate.rotateCounterClockwise45())}}class ge extends re{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ge.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const i=n.getContext("2d").getImageData(0,0,n.width,n.height);return ge.toGrayscaleBuffer(i.data,n.width,n.height)}static toGrayscaleBuffer(n,i,s){const a=new Uint8ClampedArray(i*s);for(let l=0,c=0,f=n.length;l<f;l+=4,c++){let g;if(n[l+3]===0)g=255;else{const E=n[l],_=n[l+1],A=n[l+2];g=306*E+601*_+117*A+512>>10}a[c]=g}return a}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const s=this.getWidth(),a=n*s;return i===null?i=this.buffer.slice(a,a+s):(i.length<s&&(i=new Uint8ClampedArray(s)),i.set(this.buffer.slice(a,a+s))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,i,s,a){return super.crop(n,i,s,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const i=this.getTempCanvasElement(),s=i.getContext("2d"),a=n*ge.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*c),g=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*c);return i.width=f,i.height=g,s.translate(f/2,g/2),s.rotate(a),s.drawImage(this.canvas,l/-2,c/-2),this.buffer=ge.makeBufferFromCanvasImageData(i),this}invert(){return new Q(this)}}ge.DEGREE_TO_RADIANS=Math.PI/180;class Se{constructor(n,i,s){this.deviceId=n,this.label=i,this.kind="videoinput",this.groupId=s||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ee=(globalThis||Ut||self||window||void 0)&&(globalThis||Ut||self||window||void 0).__awaiter||function(C,n,i,s){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(E){try{x(s.next(E))}catch(_){c(_)}}function g(E){try{x(s.throw(E))}catch(_){c(_)}}function x(E){E.done?l(E.value):a(E.value).then(f,g)}x((s=s.apply(C,n||[])).next())})};class ke{constructor(n,i=500,s){this.reader=n,this.timeBetweenScansMillis=i,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ee(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const s of n){const a=s.kind==="video"?"videoinput":s.kind;if(a!=="videoinput")continue;const l=s.deviceId||s.id,c=s.label||`Video device ${i.length+1}`,f=s.groupId,g={deviceId:l,label:c,kind:a,groupId:f};i.push(g)}return i})}getVideoInputDevices(){return ee(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new Se(i.deviceId,i.label))})}findDeviceById(n){return ee(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(s=>s.deviceId===n):null})}decodeFromInputVideoDevice(n,i){return ee(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,i)})}decodeOnceFromVideoDevice(n,i){return ee(this,void 0,void 0,function*(){this.reset();let s;n?s={deviceId:{exact:n}}:s={facingMode:"environment"};const a={video:s};return yield this.decodeOnceFromConstraints(a,i)})}decodeOnceFromConstraints(n,i){return ee(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(s,i)})}decodeOnceFromStream(n,i){return ee(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(n,i);return yield this.decodeOnce(s)})}decodeFromInputVideoDeviceContinuously(n,i,s){return ee(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,i,s)})}decodeFromVideoDevice(n,i,s){return ee(this,void 0,void 0,function*(){let a;n?a={deviceId:{exact:n}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,i,s)})}decodeFromConstraints(n,i,s){return ee(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(a,i,s)})}decodeFromStream(n,i,s){return ee(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(n,i);return yield this.decodeContinuously(a,s)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,i){return ee(this,void 0,void 0,function*(){const s=this.prepareVideoElement(i);return this.addVideoSource(s,n),this.videoElement=s,this.stream=n,yield this.playVideoOnLoadAsync(s),s})}playVideoOnLoadAsync(n){return new Promise((i,s)=>this.playVideoOnLoad(n,()=>i()))}playVideoOnLoad(n,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",i),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ee(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,i){const s=document.getElementById(n);if(!s)throw new y(`element with id '${n}' not found`);if(s.nodeName.toLowerCase()!==i.toLowerCase())throw new y(`element with id '${n}' must be an ${i} element`);return s}decodeFromImage(n,i){if(!n&&!i)throw new y("either imageElement with a src set or an url must be provided");return i&&!n?this.decodeFromImageUrl(i):this.decodeFromImageElement(n)}decodeFromVideo(n,i){if(!n&&!i)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,i,s){if(n===void 0&&i===void 0)throw new y("Either an element with a src set or an URL must be provided");return i&&!n?this.decodeFromVideoUrlContinuously(i,s):this.decodeFromVideoElementContinuously(n,s)}decodeFromImageElement(n){if(!n)throw new y("An image element must be provided.");this.reset();const i=this.prepareImageElement(n);this.imageElement=i;let s;return this.isImageLoaded(i)?s=this.decodeOnce(i,!1,!0):s=this._decodeOnLoadImage(i),s}decodeFromVideoElement(n){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(n,i){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(s,i)}_decodeFromVideoElementSetup(n){if(!n)throw new y("A video element must be provided.");this.reset();const i=this.prepareVideoElement(n);return this.videoElement=i,i}decodeFromImageUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const s=this._decodeOnLoadImage(i);return i.src=n,s}decodeFromVideoUrl(n){if(!n)throw new y("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElement(i);return i.src=n,s}decodeFromVideoUrlContinuously(n,i){if(!n)throw new y("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(s,i);return s.src=n,a}_decodeOnLoadImage(n){return new Promise((i,s)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(i,s),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ee(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,i){return ee(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,i)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let i;return typeof n>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(i=n),i}prepareVideoElement(n){let i;return!n&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof n=="string"&&(i=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(i=n),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(n,i=!0,s=!0){this._stopAsyncDecode=!1;const a=(l,c)=>{if(this._stopAsyncDecode){c(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(n);l(f)}catch(f){const g=i&&f instanceof V,E=(f instanceof k||f instanceof F)&&s;if(g||E)return setTimeout(a,this._timeBetweenDecodingAttempts,l,c);c(f)}};return new Promise((l,c)=>a(l,c))}decodeContinuously(n,i){this._stopContinuousDecode=!1;const s=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(n);i(a,null),setTimeout(s,this.timeBetweenScansMillis)}catch(a){i(null,a);const l=a instanceof k||a instanceof F,c=a instanceof V;(l||c)&&setTimeout(s,this._timeBetweenDecodingAttempts)}};s()}decode(n){const i=this.createBinaryBitmap(n);return this.decodeBitmap(i)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,i,s){i||(i={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(n,i,s=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),s||(s=this.captureCanvasContext),s.drawImage(n,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const i=this.getCaptureCanvas(n),s=new ge(i),a=new K(s);return new S(a)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const s=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=s}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const i=this.createCaptureCanvas(n);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let s,a;return typeof n<"u"&&(n instanceof HTMLVideoElement?(s=n.videoWidth,a=n.videoHeight):n instanceof HTMLImageElement&&(s=n.naturalWidth||n.width,a=n.naturalHeight||n.height)),i.style.width=s+"px",i.style.height=a+"px",i.width=s,i.height=a,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,i){try{n.srcObject=i}catch{n.src=URL.createObjectURL(i)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class Ie{constructor(n,i,s=i==null?0:8*i.length,a,l,c=L.currentTimeMillis()){this.text=n,this.rawBytes=i,this.numBits=s,this.resultPoints=a,this.format=l,this.timestamp=c,this.text=n,this.rawBytes=i,s==null?this.numBits=i==null?0:8*i.length:this.numBits=s,this.resultPoints=a,this.format=l,this.resultMetadata=null,c==null?this.timestamp=L.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,i)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const i=this.resultPoints;if(i===null)this.resultPoints=n;else if(n!==null&&n.length>0){const s=new Array(i.length+n.length);L.arraycopy(i,0,s,0,i.length),L.arraycopy(n,0,s,i.length,n.length),this.resultPoints=s}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ye;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var le=Ye,Je;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Je||(Je={}));var De=Je;class xe{constructor(n,i,s,a,l=-1,c=-1){this.rawBytes=n,this.text=i,this.byteSegments=s,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=c,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}static addOrSubtract(n,i){return n^i}}class Re{constructor(n,i){if(i.length===0)throw new v;this.field=n;const s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-a),L.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const i=this.coefficients;let s;if(n===1){s=0;for(let c=0,f=i.length;c!==f;c++){const g=i[c];s=Le.addOrSubtract(s,g)}return s}s=i[0];const a=i.length,l=this.field;for(let c=1;c<a;c++)s=Le.addOrSubtract(l.multiply(n,s),i[c]);return s}addOrSubtract(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){const c=i;i=s,s=c}let a=new Int32Array(s.length);const l=s.length-i.length;L.arraycopy(s,0,a,0,l);for(let c=l;c<s.length;c++)a[c]=Le.addOrSubtract(i[c-l],s[c]);return new Re(this.field,a)}multiply(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,c=new Int32Array(s+l-1),f=this.field;for(let g=0;g<s;g++){const x=i[g];for(let E=0;E<l;E++)c[g+E]=Le.addOrSubtract(c[g+E],f.multiply(x,a[E]))}return new Re(f,c)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const i=this.coefficients.length,s=this.field,a=new Int32Array(i),l=this.coefficients;for(let c=0;c<i;c++)a[c]=s.multiply(l[c],n);return new Re(s,a)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return this.field.getZero();const s=this.coefficients,a=s.length,l=new Int32Array(a+n),c=this.field;for(let f=0;f<a;f++)l[f]=c.multiply(s[f],i);return new Re(c,l)}divide(n){if(!this.field.equals(n.field))throw new v("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new v("Divide by 0");const i=this.field;let s=i.getZero(),a=this;const l=n.getCoefficient(n.getDegree()),c=i.inverse(l);for(;a.getDegree()>=n.getDegree()&&!a.isZero();){const f=a.getDegree()-n.getDegree(),g=i.multiply(a.getCoefficient(a.getDegree()),c),x=n.multiplyByMonomial(f,g),E=i.buildMonomial(f,g);s=s.addOrSubtract(E),a=a.addOrSubtract(x)}return[s,a]}toString(){let n="";for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);if(s!==0){if(s<0?(n+=" - ",s=-s):n.length>0&&(n+=" + "),i===0||s!==1){const a=this.field.log(s);a===0?n+="1":a===1?n+="a":(n+="a^",n+=a)}i!==0&&(i===1?n+="x":(n+="x^",n+=i))}}return n}}class ct extends m{}ct.kind="ArithmeticException";class pe extends Le{constructor(n,i,s){super(),this.primitive=n,this.size=i,this.generatorBase=s;const a=new Int32Array(i);let l=1;for(let f=0;f<i;f++)a[f]=l,l*=2,l>=i&&(l^=n,l&=i-1);this.expTable=a;const c=new Int32Array(i);for(let f=0;f<i-1;f++)c[a[f]]=f;this.logTable=c,this.zero=new Re(this,Int32Array.from([0])),this.one=new Re(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;const s=new Int32Array(n+1);return s[0]=i,new Re(this,s)}inverse(n){if(n===0)throw new ct;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+O.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class gt extends m{}gt.kind="ReedSolomonException";class ze extends m{}ze.kind="IllegalStateException";class Ve{constructor(n){this.field=n}decode(n,i){const s=this.field,a=new Re(s,n),l=new Int32Array(i);let c=!0;for(let T=0;T<i;T++){const M=a.evaluateAt(s.exp(T+s.getGeneratorBase()));l[l.length-1-T]=M,M!==0&&(c=!1)}if(c)return;const f=new Re(s,l),g=this.runEuclideanAlgorithm(s.buildMonomial(i,1),f,i),x=g[0],E=g[1],_=this.findErrorLocations(x),A=this.findErrorMagnitudes(E,_);for(let T=0;T<_.length;T++){const M=n.length-1-s.log(_[T]);if(M<0)throw new gt("Bad error location");n[M]=pe.addOrSubtract(n[M],A[T])}}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){const T=n;n=i,i=T}const a=this.field;let l=n,c=i,f=a.getZero(),g=a.getOne();for(;c.getDegree()>=(s/2|0);){let T=l,M=f;if(l=c,f=g,l.isZero())throw new gt("r_{i-1} was zero");c=T;let P=a.getZero();const j=l.getCoefficient(l.getDegree()),W=a.inverse(j);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){const ie=c.getDegree()-l.getDegree(),se=a.multiply(c.getCoefficient(c.getDegree()),W);P=P.addOrSubtract(a.buildMonomial(ie,se)),c=c.addOrSubtract(l.multiplyByMonomial(ie,se))}if(g=P.multiply(f).addOrSubtract(M),c.getDegree()>=l.getDegree())throw new ze("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(x===0)throw new gt("sigmaTilde(0) was zero");const E=a.inverse(x),_=g.multiplyScalar(E),A=c.multiplyScalar(E);return[_,A]}findErrorLocations(n){const i=n.getDegree();if(i===1)return Int32Array.from([n.getCoefficient(1)]);const s=new Int32Array(i);let a=0;const l=this.field;for(let c=1;c<l.getSize()&&a<i;c++)n.evaluateAt(c)===0&&(s[a]=l.inverse(c),a++);if(a!==i)throw new gt("Error locator degree does not match number of roots");return s}findErrorMagnitudes(n,i){const s=i.length,a=new Int32Array(s),l=this.field;for(let c=0;c<s;c++){const f=l.inverse(i[c]);let g=1;for(let x=0;x<s;x++)if(c!==x){const E=l.multiply(i[x],f),_=E&1?E&-2:E|1;g=l.multiply(g,_)}a[c]=l.multiply(n.evaluateAt(f),l.inverse(g)),l.getGeneratorBase()!==0&&(a[c]=l.multiply(a[c],f))}return a}}var Ke;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Ke||(Ke={}));class Oe{decode(n){this.ddata=n;let i=n.getBits(),s=this.extractBits(i),a=this.correctBits(s),l=Oe.convertBoolArrayToByteArray(a),c=Oe.getEncodedData(a),f=new xe(l,c,null,null);return f.setNumBits(a.length),f}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let i=n.length,s=Ke.UPPER,a=Ke.UPPER,l="",c=0;for(;c<i;)if(a===Ke.BINARY){if(i-c<5)break;let f=Oe.readCode(n,c,5);if(c+=5,f===0){if(i-c<11)break;f=Oe.readCode(n,c,11)+31,c+=11}for(let g=0;g<f;g++){if(i-c<8){c=i;break}const x=Oe.readCode(n,c,8);l+=Y.castAsNonUtf8Char(x),c+=8}a=s}else{let f=a===Ke.DIGIT?4:5;if(i-c<f)break;let g=Oe.readCode(n,c,f);c+=f;let x=Oe.getCharacter(a,g);x.startsWith("CTRL_")?(s=a,a=Oe.getTable(x.charAt(5)),x.charAt(6)==="L"&&(s=a)):(l+=x,a=s)}return l}static getTable(n){switch(n){case"L":return Ke.LOWER;case"P":return Ke.PUNCT;case"M":return Ke.MIXED;case"D":return Ke.DIGIT;case"B":return Ke.BINARY;case"U":default:return Ke.UPPER}}static getCharacter(n,i){switch(n){case Ke.UPPER:return Oe.UPPER_TABLE[i];case Ke.LOWER:return Oe.LOWER_TABLE[i];case Ke.MIXED:return Oe.MIXED_TABLE[i];case Ke.PUNCT:return Oe.PUNCT_TABLE[i];case Ke.DIGIT:return Oe.DIGIT_TABLE[i];default:throw new ze("Bad table")}}correctBits(n){let i,s;this.ddata.getNbLayers()<=2?(s=6,i=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,i=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,i=pe.AZTEC_DATA_10):(s=12,i=pe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=n.length/s;if(l<a)throw new F;let c=n.length%s,f=new Int32Array(l);for(let A=0;A<l;A++,c+=s)f[A]=Oe.readCode(n,c,s);try{new Ve(i).decode(f,l-a)}catch(A){throw new F(A)}let g=(1<<s)-1,x=0;for(let A=0;A<a;A++){let T=f[A];if(T===0||T===g)throw new F;(T===1||T===g-1)&&x++}let E=new Array(a*s-x),_=0;for(let A=0;A<a;A++){let T=f[A];if(T===1||T===g-1)E.fill(T>1,_,_+s-1),_+=s-1;else for(let M=s-1;M>=0;--M)E[_++]=(T&1<<M)!==0}return E}extractBits(n){let i=this.ddata.isCompact(),s=this.ddata.getNbLayers(),a=(i?11:14)+s*4,l=new Int32Array(a),c=new Array(this.totalBitsInLayer(s,i));if(i)for(let f=0;f<l.length;f++)l[f]=f;else{let f=a+1+2*O.truncDivision(O.truncDivision(a,2)-1,15),g=a/2,x=O.truncDivision(f,2);for(let E=0;E<g;E++){let _=E+O.truncDivision(E,15);l[g-E-1]=x-_-1,l[g+E]=x+_+1}}for(let f=0,g=0;f<s;f++){let x=(s-f)*4+(i?9:12),E=f*2,_=a-1-E;for(let A=0;A<x;A++){let T=A*2;for(let M=0;M<2;M++)c[g+T+M]=n.get(l[E+M],l[E+A]),c[g+2*x+T+M]=n.get(l[E+A],l[_-M]),c[g+4*x+T+M]=n.get(l[_-M],l[_-A]),c[g+6*x+T+M]=n.get(l[_-A],l[E+M])}g+=x*8}return c}static readCode(n,i,s){let a=0;for(let l=i;l<i+s;l++)a<<=1,n[l]&&(a|=1);return a}static readByte(n,i){let s=n.length-i;return s>=8?Oe.readCode(n,i,8):Oe.readCode(n,i,s)<<8-s}static convertBoolArrayToByteArray(n){let i=new Uint8Array((n.length+7)/8);for(let s=0;s<i.length;s++)i[s]=Oe.readByte(n,8*s);return i}totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Oe.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Oe.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Oe.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Oe.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Oe.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _e{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,i,s,a){const l=n-s,c=i-a;return Math.sqrt(l*l+c*c)}static sum(n){let i=0;for(let s=0,a=n.length;s!==a;s++){const l=n[s];i+=l}return i}}class an{static floatToIntBits(n){return n}}an.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(n,i){this.x=n,this.y=i}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof ue){const i=n;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*an.floatToIntBits(this.x)+an.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const i=this.distance(n[0],n[1]),s=this.distance(n[1],n[2]),a=this.distance(n[0],n[2]);let l,c,f;if(s>=i&&s>=a?(c=n[0],l=n[1],f=n[2]):a>=s&&a>=i?(c=n[1],l=n[0],f=n[2]):(c=n[2],l=n[0],f=n[1]),this.crossProductZ(l,c,f)<0){const g=l;l=f,f=g}n[0]=l,n[1]=c,n[2]=f}static distance(n,i){return _e.distance(n.x,n.y,i.x,i.y)}static crossProductZ(n,i,s){const a=i.x,l=i.y;return(s.x-a)*(n.y-l)-(s.y-l)*(n.x-a)}}class Qe{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class pt extends Qe{constructor(n,i,s,a,l){super(n,i),this.compact=s,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class zt{constructor(n,i,s,a){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),i==null&&(i=zt.INIT_SIZE),s==null&&(s=n.getWidth()/2|0),a==null&&(a=n.getHeight()/2|0);const l=i/2|0;if(this.leftInit=s-l,this.rightInit=s+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let n=this.leftInit,i=this.rightInit,s=this.upInit,a=this.downInit,l=!1,c=!0,f=!1,g=!1,x=!1,E=!1,_=!1;const A=this.width,T=this.height;for(;c;){c=!1;let M=!0;for(;(M||!g)&&i<A;)M=this.containsBlackPoint(s,a,i,!1),M?(i++,c=!0,g=!0):g||i++;if(i>=A){l=!0;break}let P=!0;for(;(P||!x)&&a<T;)P=this.containsBlackPoint(n,i,a,!0),P?(a++,c=!0,x=!0):x||a++;if(a>=T){l=!0;break}let j=!0;for(;(j||!E)&&n>=0;)j=this.containsBlackPoint(s,a,n,!1),j?(n--,c=!0,E=!0):E||n--;if(n<0){l=!0;break}let W=!0;for(;(W||!_)&&s>=0;)W=this.containsBlackPoint(n,i,s,!0),W?(s--,c=!0,_=!0):_||s--;if(s<0){l=!0;break}c&&(f=!0)}if(!l&&f){const M=i-n;let P=null;for(let se=1;P===null&&se<M;se++)P=this.getBlackPointOnSegment(n,a-se,n+se,a);if(P==null)throw new V;let j=null;for(let se=1;j===null&&se<M;se++)j=this.getBlackPointOnSegment(n,s+se,n+se,s);if(j==null)throw new V;let W=null;for(let se=1;W===null&&se<M;se++)W=this.getBlackPointOnSegment(i,s+se,i-se,s);if(W==null)throw new V;let ie=null;for(let se=1;ie===null&&se<M;se++)ie=this.getBlackPointOnSegment(i,a-se,i-se,a);if(ie==null)throw new V;return this.centerEdges(ie,P,W,j)}else throw new V}getBlackPointOnSegment(n,i,s,a){const l=_e.round(_e.distance(n,i,s,a)),c=(s-n)/l,f=(a-i)/l,g=this.image;for(let x=0;x<l;x++){const E=_e.round(n+x*c),_=_e.round(i+x*f);if(g.get(E,_))return new ue(E,_)}return null}centerEdges(n,i,s,a){const l=n.getX(),c=n.getY(),f=i.getX(),g=i.getY(),x=s.getX(),E=s.getY(),_=a.getX(),A=a.getY(),T=zt.CORR;return l<this.width/2?[new ue(_-T,A+T),new ue(f+T,g+T),new ue(x-T,E-T),new ue(l+T,c-T)]:[new ue(_+T,A+T),new ue(f+T,g-T),new ue(x-T,E+T),new ue(l-T,c-T)]}containsBlackPoint(n,i,s,a){const l=this.image;if(a){for(let c=n;c<=i;c++)if(l.get(c,s))return!0}else for(let c=n;c<=i;c++)if(l.get(s,c))return!0;return!1}}zt.INIT_SIZE=10,zt.CORR=1;class He{static checkAndNudgePoints(n,i){const s=n.getWidth(),a=n.getHeight();let l=!0;for(let c=0;c<i.length&&l;c+=2){const f=Math.floor(i[c]),g=Math.floor(i[c+1]);if(f<-1||f>s||g<-1||g>a)throw new V;l=!1,f===-1?(i[c]=0,l=!0):f===s&&(i[c]=s-1,l=!0),g===-1?(i[c+1]=0,l=!0):g===a&&(i[c+1]=a-1,l=!0)}l=!0;for(let c=i.length-2;c>=0&&l;c-=2){const f=Math.floor(i[c]),g=Math.floor(i[c+1]);if(f<-1||f>s||g<-1||g>a)throw new V;l=!1,f===-1?(i[c]=0,l=!0):f===s&&(i[c]=s-1,l=!0),g===-1?(i[c+1]=0,l=!0):g===a&&(i[c+1]=a-1,l=!0)}}}class Mt{constructor(n,i,s,a,l,c,f,g,x){this.a11=n,this.a21=i,this.a31=s,this.a12=a,this.a22=l,this.a32=c,this.a13=f,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(n,i,s,a,l,c,f,g,x,E,_,A,T,M,P,j){const W=Mt.quadrilateralToSquare(n,i,s,a,l,c,f,g);return Mt.squareToQuadrilateral(x,E,_,A,T,M,P,j).times(W)}transformPoints(n){const i=n.length,s=this.a11,a=this.a12,l=this.a13,c=this.a21,f=this.a22,g=this.a23,x=this.a31,E=this.a32,_=this.a33;for(let A=0;A<i;A+=2){const T=n[A],M=n[A+1],P=l*T+g*M+_;n[A]=(s*T+c*M+x)/P,n[A+1]=(a*T+f*M+E)/P}}transformPointsWithValues(n,i){const s=this.a11,a=this.a12,l=this.a13,c=this.a21,f=this.a22,g=this.a23,x=this.a31,E=this.a32,_=this.a33,A=n.length;for(let T=0;T<A;T++){const M=n[T],P=i[T],j=l*M+g*P+_;n[T]=(s*M+c*P+x)/j,i[T]=(a*M+f*P+E)/j}}static squareToQuadrilateral(n,i,s,a,l,c,f,g){const x=n-s+l-f,E=i-a+c-g;if(x===0&&E===0)return new Mt(s-n,l-s,n,a-i,c-a,i,0,0,1);{const _=s-l,A=f-l,T=a-c,M=g-c,P=_*M-A*T,j=(x*M-A*E)/P,W=(_*E-x*T)/P;return new Mt(s-n+j*s,f-n+W*f,n,a-i+j*a,g-i+W*g,i,j,W,1)}}static quadrilateralToSquare(n,i,s,a,l,c,f,g){return Mt.squareToQuadrilateral(n,i,s,a,l,c,f,g).buildAdjoint()}buildAdjoint(){return new Mt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Mt(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Rn extends He{sampleGrid(n,i,s,a,l,c,f,g,x,E,_,A,T,M,P,j,W,ie,se){const Z=Mt.quadrilateralToQuadrilateral(a,l,c,f,g,x,E,_,A,T,M,P,j,W,ie,se);return this.sampleGridWithTransform(n,i,s,Z)}sampleGridWithTransform(n,i,s,a){if(i<=0||s<=0)throw new V;const l=new me(i,s),c=new Float32Array(2*i);for(let f=0;f<s;f++){const g=c.length,x=f+.5;for(let E=0;E<g;E+=2)c[E]=E/2+.5,c[E+1]=x;a.transformPoints(c),He.checkAndNudgePoints(n,c);try{for(let E=0;E<g;E+=2)n.get(Math.floor(c[E]),Math.floor(c[E+1]))&&l.set(E/2,f)}catch{throw new V}}return l}}class $t{static setGridSampler(n){$t.gridSampler=n}static getInstance(){return $t.gridSampler}}$t.gridSampler=new Rn;class ht{constructor(n,i){this.x=n,this.y=i}toResultPoint(){return new ue(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Vn{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let i=this.getMatrixCenter(),s=this.getBullsEyeCorners(i);if(n){let c=s[0];s[0]=s[2],s[2]=c}this.extractParameters(s);let a=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),l=this.getMatrixCornerPoints(s);return new pt(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new V;let i=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(n[0],n[1],i),this.sampleLine(n[1],n[2],i),this.sampleLine(n[2],n[3],i),this.sampleLine(n[3],n[0],i)]);this.shift=this.getRotation(s,i);let a=0;for(let c=0;c<4;c++){let f=s[(this.shift+c)%4];this.compact?(a<<=7,a+=f>>1&127):(a<<=10,a+=(f>>2&992)+(f>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(n,i){let s=0;n.forEach((a,l,c)=>{let f=(a>>i-2<<1)+(a&1);s=(s<<3)+f}),s=((s&1)<<11)+(s>>1);for(let a=0;a<4;a++)if(O.bitCount(s^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new V}getCorrectedParameterData(n,i){let s,a;i?(s=7,a=2):(s=10,a=4);let l=s-a,c=new Int32Array(s);for(let g=s-1;g>=0;--g)c[g]=n&15,n>>=4;try{new Ve(pe.AZTEC_PARAM).decode(c,l)}catch{throw new V}let f=0;for(let g=0;g<a;g++)f=(f<<4)+c[g];return f}getBullsEyeCorners(n){let i=n,s=n,a=n,l=n,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let _=this.getFirstDifferent(i,c,1,-1),A=this.getFirstDifferent(s,c,1,1),T=this.getFirstDifferent(a,c,-1,1),M=this.getFirstDifferent(l,c,-1,-1);if(this.nbCenterLayers>2){let P=this.distancePoint(M,_)*this.nbCenterLayers/(this.distancePoint(l,i)*(this.nbCenterLayers+2));if(P<.75||P>1.25||!this.isWhiteOrBlackRectangle(_,A,T,M))break}i=_,s=A,a=T,l=M,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let f=new ue(i.getX()+.5,i.getY()-.5),g=new ue(s.getX()+.5,s.getY()+.5),x=new ue(a.getX()-.5,a.getY()+.5),E=new ue(l.getX()-.5,l.getY()-.5);return this.expandSquare([f,g,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,i,s,a;try{let f=new zt(this.image).detect();n=f[0],i=f[1],s=f[2],a=f[3]}catch{let g=this.image.getWidth()/2,x=this.image.getHeight()/2;n=this.getFirstDifferent(new ht(g+7,x-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new ht(g+7,x+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ht(g-7,x+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ht(g-7,x-7),!1,-1,-1).toResultPoint()}let l=_e.round((n.getX()+a.getX()+i.getX()+s.getX())/4),c=_e.round((n.getY()+a.getY()+i.getY()+s.getY())/4);try{let f=new zt(this.image,15,l,c).detect();n=f[0],i=f[1],s=f[2],a=f[3]}catch{n=this.getFirstDifferent(new ht(l+7,c-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new ht(l+7,c+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new ht(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ht(l-7,c-7),!1,-1,-1).toResultPoint()}return l=_e.round((n.getX()+a.getX()+i.getX()+s.getX())/4),c=_e.round((n.getY()+a.getY()+i.getY()+s.getY())/4),new ht(l,c)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,i,s,a,l){let c=$t.getInstance(),f=this.getDimension(),g=f/2-this.nbCenterLayers,x=f/2+this.nbCenterLayers;return c.sampleGrid(n,f,f,g,g,x,g,x,x,g,x,i.getX(),i.getY(),s.getX(),s.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(n,i,s){let a=0,l=this.distanceResultPoint(n,i),c=l/s,f=n.getX(),g=n.getY(),x=c*(i.getX()-n.getX())/l,E=c*(i.getY()-n.getY())/l;for(let _=0;_<s;_++)this.image.get(_e.round(f+_*x),_e.round(g+_*E))&&(a|=1<<s-_-1);return a}isWhiteOrBlackRectangle(n,i,s,a){let l=3;n=new ht(n.getX()-l,n.getY()+l),i=new ht(i.getX()-l,i.getY()-l),s=new ht(s.getX()+l,s.getY()-l),a=new ht(a.getX()+l,a.getY()+l);let c=this.getColor(a,n);if(c===0)return!1;let f=this.getColor(n,i);return f!==c||(f=this.getColor(i,s),f!==c)?!1:(f=this.getColor(s,a),f===c)}getColor(n,i){let s=this.distancePoint(n,i),a=(i.getX()-n.getX())/s,l=(i.getY()-n.getY())/s,c=0,f=n.getX(),g=n.getY(),x=this.image.get(n.getX(),n.getY()),E=Math.ceil(s);for(let A=0;A<E;A++)f+=a,g+=l,this.image.get(_e.round(f),_e.round(g))!==x&&c++;let _=c/s;return _>.1&&_<.9?0:_<=.1===x?1:-1}getFirstDifferent(n,i,s,a){let l=n.getX()+s,c=n.getY()+a;for(;this.isValid(l,c)&&this.image.get(l,c)===i;)l+=s,c+=a;for(l-=s,c-=a;this.isValid(l,c)&&this.image.get(l,c)===i;)l+=s;for(l-=s;this.isValid(l,c)&&this.image.get(l,c)===i;)c+=a;return c-=a,new ht(l,c)}expandSquare(n,i,s){let a=s/(2*i),l=n[0].getX()-n[2].getX(),c=n[0].getY()-n[2].getY(),f=(n[0].getX()+n[2].getX())/2,g=(n[0].getY()+n[2].getY())/2,x=new ue(f+a*l,g+a*c),E=new ue(f-a*l,g-a*c);l=n[1].getX()-n[3].getX(),c=n[1].getY()-n[3].getY(),f=(n[1].getX()+n[3].getX())/2,g=(n[1].getY()+n[3].getY())/2;let _=new ue(f+a*l,g+a*c),A=new ue(f-a*l,g-a*c);return[x,_,E,A]}isValid(n,i){return n>=0&&n<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(n){let i=_e.round(n.getX()),s=_e.round(n.getY());return this.isValid(i,s)}distancePoint(n,i){return _e.distance(n.getX(),n.getY(),i.getX(),i.getY())}distanceResultPoint(n,i){return _e.distance(n.getX(),n.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(O.truncDivision(this.nbLayers-4,8)+1)+15}}class vn{decode(n,i=null){let s=null,a=new Vn(n.getBlackMatrix()),l=null,c=null;try{let E=a.detectMirror(!1);l=E.getPoints(),this.reportFoundResultPoints(i,l),c=new Oe().decode(E)}catch(E){s=E}if(c==null)try{let E=a.detectMirror(!0);l=E.getPoints(),this.reportFoundResultPoints(i,l),c=new Oe().decode(E)}catch(E){throw s??E}let f=new Ie(c.getText(),c.getRawBytes(),c.getNumBits(),l,le.AZTEC,L.currentTimeMillis()),g=c.getByteSegments();g!=null&&f.putMetadata(De.BYTE_SEGMENTS,g);let x=c.getECLevel();return x!=null&&f.putMetadata(De.ERROR_CORRECTION_LEVEL,x),f}reportFoundResultPoints(n,i){if(n!=null){let s=n.get(q.NEED_RESULT_POINT_CALLBACK);s!=null&&i.forEach((a,l,c)=>{s.foundPossibleResultPoint(a)})}}reset(){}}class ln extends ke{constructor(n=500){super(new vn,n)}}class st{decode(n,i){try{return this.doDecode(n,i)}catch{if(i&&i.get(q.TRY_HARDER)===!0&&n.isRotateSupported()){const l=n.rotateCounterClockwise(),c=this.doDecode(l,i),f=c.getResultMetadata();let g=270;f!==null&&f.get(De.ORIENTATION)===!0&&(g=g+f.get(De.ORIENTATION)%360),c.putMetadata(De.ORIENTATION,g);const x=c.getResultPoints();if(x!==null){const E=l.getHeight();for(let _=0;_<x.length;_++)x[_]=new ue(E-x[_].getY()-1,x[_].getX())}return c}else throw new V}}reset(){}doDecode(n,i){const s=n.getWidth(),a=n.getHeight();let l=new U(s);const c=i&&i.get(q.TRY_HARDER)===!0,f=Math.max(1,a>>(c?8:5));let g;c?g=a:g=15;const x=Math.trunc(a/2);for(let E=0;E<g;E++){const _=Math.trunc((E+1)/2),A=(E&1)===0,T=x+f*(A?_:-_);if(T<0||T>=a)break;try{l=n.getBlackRow(T,l)}catch{continue}for(let M=0;M<2;M++){if(M===1&&(l.reverse(),i&&i.get(q.NEED_RESULT_POINT_CALLBACK)===!0)){const P=new Map;i.forEach((j,W)=>P.set(W,j)),P.delete(q.NEED_RESULT_POINT_CALLBACK),i=P}try{const P=this.decodeRow(T,l,i);if(M===1){P.putMetadata(De.ORIENTATION,180);const j=P.getResultPoints();j!==null&&(j[0]=new ue(s-j[0].getX()-1,j[0].getY()),j[1]=new ue(s-j[1].getX()-1,j[1].getY()))}return P}catch{}}}throw new V}static recordPattern(n,i,s){const a=s.length;for(let x=0;x<a;x++)s[x]=0;const l=n.getSize();if(i>=l)throw new V;let c=!n.get(i),f=0,g=i;for(;g<l;){if(n.get(g)!==c)s[f]++;else{if(++f===a)break;s[f]=1,c=!c}g++}if(!(f===a||f===a-1&&g===l))throw new V}static recordPatternInReverse(n,i,s){let a=s.length,l=n.get(i);for(;i>0&&a>=0;)n.get(--i)!==l&&(a--,l=!l);if(a>=0)throw new V;st.recordPattern(n,i+1,s)}static patternMatchVariance(n,i,s){const a=n.length;let l=0,c=0;for(let x=0;x<a;x++)l+=n[x],c+=i[x];if(l<c)return Number.POSITIVE_INFINITY;const f=l/c;s*=f;let g=0;for(let x=0;x<a;x++){const E=n[x],_=i[x]*f,A=E>_?E-_:_-E;if(A>s)return Number.POSITIVE_INFINITY;g+=A}return g/l}}class te extends st{static findStartPattern(n){const i=n.getSize(),s=n.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),c=s,f=!1;const g=6;for(let x=s;x<i;x++)if(n.get(x)!==f)l[a]++;else{if(a===g-1){let E=te.MAX_AVG_VARIANCE,_=-1;for(let A=te.CODE_START_A;A<=te.CODE_START_C;A++){const T=st.patternMatchVariance(l,te.CODE_PATTERNS[A],te.MAX_INDIVIDUAL_VARIANCE);T<E&&(E=T,_=A)}if(_>=0&&n.isRange(Math.max(0,c-(x-c)/2),c,!1))return Int32Array.from([c,x,_]);c+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,f=!f}throw new V}static decodeCode(n,i,s){st.recordPattern(n,s,i);let a=te.MAX_AVG_VARIANCE,l=-1;for(let c=0;c<te.CODE_PATTERNS.length;c++){const f=te.CODE_PATTERNS[c],g=this.patternMatchVariance(i,f,te.MAX_INDIVIDUAL_VARIANCE);g<a&&(a=g,l=c)}if(l>=0)return l;throw new V}decodeRow(n,i,s){const a=s&&s.get(q.ASSUME_GS1)===!0,l=te.findStartPattern(i),c=l[2];let f=0;const g=new Uint8Array(20);g[f++]=c;let x;switch(c){case te.CODE_START_A:x=te.CODE_CODE_A;break;case te.CODE_START_B:x=te.CODE_CODE_B;break;case te.CODE_START_C:x=te.CODE_CODE_C;break;default:throw new F}let E=!1,_=!1,A="",T=l[0],M=l[1];const P=Int32Array.from([0,0,0,0,0,0]);let j=0,W=0,ie=c,se=0,Z=!0,Pe=!1,Ae=!1;for(;!E;){const Pi=_;switch(_=!1,j=W,W=te.decodeCode(i,P,M),g[f++]=W,W!==te.CODE_STOP&&(Z=!0),W!==te.CODE_STOP&&(se++,ie+=se*W),T=M,M+=P.reduce((bg,Og)=>bg+Og,0),W){case te.CODE_START_A:case te.CODE_START_B:case te.CODE_START_C:throw new F}switch(x){case te.CODE_CODE_A:if(W<64)Ae===Pe?A+=String.fromCharCode(32+W):A+=String.fromCharCode(32+W+128),Ae=!1;else if(W<96)Ae===Pe?A+=String.fromCharCode(W-64):A+=String.fromCharCode(W+64),Ae=!1;else switch(W!==te.CODE_STOP&&(Z=!1),W){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_A:!Pe&&Ae?(Pe=!0,Ae=!1):Pe&&Ae?(Pe=!1,Ae=!1):Ae=!0;break;case te.CODE_SHIFT:_=!0,x=te.CODE_CODE_B;break;case te.CODE_CODE_B:x=te.CODE_CODE_B;break;case te.CODE_CODE_C:x=te.CODE_CODE_C;break;case te.CODE_STOP:E=!0;break}break;case te.CODE_CODE_B:if(W<96)Ae===Pe?A+=String.fromCharCode(32+W):A+=String.fromCharCode(32+W+128),Ae=!1;else switch(W!==te.CODE_STOP&&(Z=!1),W){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_FNC_2:case te.CODE_FNC_3:break;case te.CODE_FNC_4_B:!Pe&&Ae?(Pe=!0,Ae=!1):Pe&&Ae?(Pe=!1,Ae=!1):Ae=!0;break;case te.CODE_SHIFT:_=!0,x=te.CODE_CODE_A;break;case te.CODE_CODE_A:x=te.CODE_CODE_A;break;case te.CODE_CODE_C:x=te.CODE_CODE_C;break;case te.CODE_STOP:E=!0;break}break;case te.CODE_CODE_C:if(W<100)W<10&&(A+="0"),A+=W;else switch(W!==te.CODE_STOP&&(Z=!1),W){case te.CODE_FNC_1:a&&(A.length===0?A+="]C1":A+="");break;case te.CODE_CODE_A:x=te.CODE_CODE_A;break;case te.CODE_CODE_B:x=te.CODE_CODE_B;break;case te.CODE_STOP:E=!0;break}break}Pi&&(x=x===te.CODE_CODE_A?te.CODE_CODE_B:te.CODE_CODE_A)}const fn=M-T;if(M=i.getNextUnset(M),!i.isRange(M,Math.min(i.getSize(),M+(M-T)/2),!1))throw new V;if(ie-=se*j,ie%103!==j)throw new k;const Wn=A.length;if(Wn===0)throw new V;Wn>0&&Z&&(x===te.CODE_CODE_C?A=A.substring(0,Wn-2):A=A.substring(0,Wn-1));const dn=(l[1]+l[0])/2,tt=T+fn/2,Wt=g.length,Cn=new Uint8Array(Wt);for(let Pi=0;Pi<Wt;Pi++)Cn[Pi]=g[Pi];const Mi=[new ue(dn,n),new ue(tt,n)];return new Ie(A,Cn,0,Mi,le.CODE_128,new Date().getTime())}}te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],te.MAX_AVG_VARIANCE=.25,te.MAX_INDIVIDUAL_VARIANCE=.7,te.CODE_SHIFT=98,te.CODE_CODE_C=99,te.CODE_CODE_B=100,te.CODE_CODE_A=101,te.CODE_FNC_1=102,te.CODE_FNC_2=97,te.CODE_FNC_3=96,te.CODE_FNC_4_A=101,te.CODE_FNC_4_B=100,te.CODE_START_A=103,te.CODE_START_B=104,te.CODE_START_C=105,te.CODE_STOP=106;class Et extends st{constructor(n=!1,i=!1){super(),this.usingCheckDigit=n,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,i,s){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=Et.findAsteriskPattern(i,a),c=i.getNextSet(l[1]),f=i.getSize(),g,x;do{Et.recordPattern(i,c,a);let P=Et.toNarrowWidePattern(a);if(P<0)throw new V;g=Et.patternToChar(P),this.decodeRowResult+=g,x=c;for(let j of a)c+=j;c=i.getNextSet(c)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let P of a)E+=P;let _=c-x-E;if(c!==f&&_*2<E)throw new V;if(this.usingCheckDigit){let P=this.decodeRowResult.length-1,j=0;for(let W=0;W<P;W++)j+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(W));if(this.decodeRowResult.charAt(P)!==Et.ALPHABET_STRING.charAt(j%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,P)}if(this.decodeRowResult.length===0)throw new V;let A;this.extendedMode?A=Et.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let T=(l[1]+l[0])/2,M=x+E/2;return new Ie(A,null,0,[new ue(T,n),new ue(M,n)],le.CODE_39,new Date().getTime())}static findAsteriskPattern(n,i){let s=n.getSize(),a=n.getNextSet(0),l=0,c=a,f=!1,g=i.length;for(let x=a;x<s;x++)if(n.get(x)!==f)i[l]++;else{if(l===g-1){if(this.toNarrowWidePattern(i)===Et.ASTERISK_ENCODING&&n.isRange(Math.max(0,c-Math.floor((x-c)/2)),c,!1))return[c,x];c+=i[0]+i[1],i.copyWithin(0,2,2+l-1),i[l-1]=0,i[l]=0,l--}else l++;i[l]=1,f=!f}throw new V}static toNarrowWidePattern(n){let i=n.length,s=0,a;do{let l=2147483647;for(let g of n)g<l&&g>s&&(l=g);s=l,a=0;let c=0,f=0;for(let g=0;g<i;g++){let x=n[g];x>s&&(f|=1<<i-1-g,a++,c+=x)}if(a===3){for(let g=0;g<i&&a>0;g++){let x=n[g];if(x>s&&(a--,x*2>=c))return-1}return f}}while(a>3);return-1}static patternToChar(n){for(let i=0;i<Et.CHARACTER_ENCODINGS.length;i++)if(Et.CHARACTER_ENCODINGS[i]===n)return Et.ALPHABET_STRING.charAt(i);if(n===Et.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(n){let i=n.length,s="";for(let a=0;a<i;a++){let l=n.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let c=n.charAt(a+1),f="\0";switch(l){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new F;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new F;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new F;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new F;break}s+=f,a++}else s+=l}return s}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class We extends st{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,i,s){let a=this.decodeStart(i),l=this.decodeEnd(i),c=new ae;We.decodeMiddle(i,a[1],l[0],c);let f=c.toString(),g=null;s!=null&&(g=s.get(q.ALLOWED_LENGTHS)),g==null&&(g=We.DEFAULT_ALLOWED_LENGTHS);let x=f.length,E=!1,_=0;for(let M of g){if(x===M){E=!0;break}M>_&&(_=M)}if(!E&&x>_&&(E=!0),!E)throw new F;const A=[new ue(a[1],n),new ue(l[0],n)];return new Ie(f,null,0,A,le.ITF,new Date().getTime())}static decodeMiddle(n,i,s,a){let l=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(l.fill(0),c.fill(0),f.fill(0);i<s;){st.recordPattern(n,i,l);for(let x=0;x<5;x++){let E=2*x;c[x]=l[E],f[x]=l[E+1]}let g=We.decodeDigit(c);a.append(g.toString()),g=this.decodeDigit(f),a.append(g.toString()),l.forEach(function(x){i+=x})}}decodeStart(n){let i=We.skipWhiteSpace(n),s=We.findGuardPattern(n,i,We.START_PATTERN);return this.narrowLineWidth=(s[1]-s[0])/4,this.validateQuietZone(n,s[0]),s}validateQuietZone(n,i){let s=this.narrowLineWidth*10;s=s<i?s:i;for(let a=i-1;s>0&&a>=0&&!n.get(a);a--)s--;if(s!==0)throw new V}static skipWhiteSpace(n){const i=n.getSize(),s=n.getNextSet(0);if(s===i)throw new V;return s}decodeEnd(n){n.reverse();try{let i=We.skipWhiteSpace(n),s;try{s=We.findGuardPattern(n,i,We.END_PATTERN_REVERSED[0])}catch(l){l instanceof V&&(s=We.findGuardPattern(n,i,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,s[0]);let a=s[0];return s[0]=n.getSize()-s[1],s[1]=n.getSize()-a,s}finally{n.reverse()}}static findGuardPattern(n,i,s){let a=s.length,l=new Int32Array(a),c=n.getSize(),f=!1,g=0,x=i;l.fill(0);for(let E=i;E<c;E++)if(n.get(E)!==f)l[g]++;else{if(g===a-1){if(st.patternMatchVariance(l,s,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[x,E];x+=l[0]+l[1],L.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,f=!f}throw new V}static decodeDigit(n){let i=We.MAX_AVG_VARIANCE,s=-1,a=We.PATTERNS.length;for(let l=0;l<a;l++){let c=We.PATTERNS[l],f=st.patternMatchVariance(n,c,We.MAX_INDIVIDUAL_VARIANCE);f<i?(i=f,s=l):f===i&&(s=-1)}if(s>=0)return s%10;throw new V}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends st{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let i=!1,s,a=0,l=Int32Array.from([0,0,0]);for(;!i;){l=Int32Array.from([0,0,0]),s=vt.findGuardPattern(n,a,!1,this.START_END_PATTERN,l);let c=s[0];a=s[1];let f=c-(a-c);f>=0&&(i=n.isRange(f,c,!1))}return s}static checkChecksum(n){return vt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return vt.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new F;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new F;s+=l}return(1e3-s)%10}static decodeEnd(n,i){return vt.findGuardPattern(n,i,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,i,s,a){return this.findGuardPattern(n,i,s,a,new Int32Array(a.length))}static findGuardPattern(n,i,s,a,l){let c=n.getSize();i=s?n.getNextUnset(i):n.getNextSet(i);let f=0,g=i,x=a.length,E=s;for(let _=i;_<c;_++)if(n.get(_)!==E)l[f]++;else{if(f===x-1){if(st.patternMatchVariance(l,a,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([g,_]);g+=l[0]+l[1];let A=l.slice(2,l.length-1);for(let T=0;T<f-1;T++)l[T]=A[T];l[f-1]=0,l[f]=0,f--}else f++;l[f]=1,E=!E}throw new V}static decodeDigit(n,i,s,a){this.recordPattern(n,s,i);let l=this.MAX_AVG_VARIANCE,c=-1,f=a.length;for(let g=0;g<f;g++){let x=a[g],E=st.patternMatchVariance(i,x,vt.MAX_INDIVIDUAL_VARIANCE);E<l&&(l=E,c=g)}if(c>=0)return c;throw new V}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Es{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),c=a.toString(),f=Es.parseExtensionString(c),g=[new ue((s[0]+s[1])/2,n),new ue(l,n)],x=new Ie(c,null,0,g,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],f=0;for(let x=0;x<5&&c<l;x++){let E=vt.decodeDigit(n,a,c,vt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let _ of a)c+=_;E>=10&&(f|=1<<4-x),x!==4&&(c=n.getNextSet(c),c=n.getNextUnset(c))}if(s.length!==5)throw new V;let g=this.determineCheckDigit(f);if(Es.extensionChecksum(s.toString())!==g)throw new V;return c}static extensionChecksum(n){let i=n.length,s=0;for(let a=i-2;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;s*=3;for(let a=i-1;a>=0;a-=2)s+=n.charAt(a).charCodeAt(0)-48;return s*=3,s%10}determineCheckDigit(n){for(let i=0;i<10;i++)if(n===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new V}static parseExtensionString(n){if(n.length!==5)return null;let i=Es.parseExtension5String(n);return i==null?null:new Map([[De.SUGGESTED_PRICE,i]])}static parseExtension5String(n){let i;switch(n.charAt(0)){case"0":i="£";break;case"5":i="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let s=parseInt(n.substring(1)),a=(s/100).toString(),l=s%100,c=l<10?"0"+l:l.toString();return i+a+"."+c}}class pl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,i,s){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(i,s,a),c=a.toString(),f=pl.parseExtensionString(c),g=[new ue((s[0]+s[1])/2,n),new ue(l,n)],x=new Ie(c,null,0,g,le.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],f=0;for(let g=0;g<2&&c<l;g++){let x=vt.decodeDigit(n,a,c,vt.L_AND_G_PATTERNS);s+=String.fromCharCode(48+x%10);for(let E of a)c+=E;x>=10&&(f|=1<<1-g),g!==1&&(c=n.getNextSet(c),c=n.getNextUnset(c))}if(s.length!==2)throw new V;if(parseInt(s.toString())%4!==f)throw new V;return c}static parseExtensionString(n){return n.length!==2?null:new Map([[De.ISSUE_NUMBER,parseInt(n)]])}}class fh{static decodeRow(n,i,s){let a=vt.findGuardPattern(i,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Es().decodeRow(n,i,a)}catch{return new pl().decodeRow(n,i,a)}}}fh.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ge extends vt{constructor(){super(),this.decodeRowStringBuffer="",Ge.L_AND_G_PATTERNS=Ge.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let i=Ge.L_PATTERNS[n-10],s=new Int32Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[i.length-a-1];Ge.L_AND_G_PATTERNS[n]=s}}decodeRow(n,i,s){let a=Ge.findStartGuardPattern(i),l=s==null?null:s.get(q.NEED_RESULT_POINT_CALLBACK);if(l!=null){const Z=new ue((a[0]+a[1])/2,n);l.foundPossibleResultPoint(Z)}let c=this.decodeMiddle(i,a,this.decodeRowStringBuffer),f=c.rowOffset,g=c.resultString;if(l!=null){const Z=new ue(f,n);l.foundPossibleResultPoint(Z)}let x=this.decodeEnd(i,f);if(l!=null){const Z=new ue((x[0]+x[1])/2,n);l.foundPossibleResultPoint(Z)}let E=x[1],_=E+(E-x[0]);if(_>=i.getSize()||!i.isRange(E,_,!1))throw new V;let A=g.toString();if(A.length<8)throw new F;if(!Ge.checkChecksum(A))throw new k;let T=(a[1]+a[0])/2,M=(x[1]+x[0])/2,P=this.getBarcodeFormat(),j=[new ue(T,n),new ue(M,n)],W=new Ie(A,null,0,j,P,new Date().getTime()),ie=0;try{let Z=fh.decodeRow(n,i,x[1]);W.putMetadata(De.UPC_EAN_EXTENSION,Z.getText()),W.putAllMetadata(Z.getResultMetadata()),W.addResultPoints(Z.getResultPoints()),ie=Z.getText().length}catch{}let se=s==null?null:s.get(q.ALLOWED_EAN_EXTENSIONS);if(se!=null){let Z=!1;for(let Pe in se)if(ie.toString()===Pe){Z=!0;break}if(!Z)throw new V}return W}decodeEnd(n,i){return Ge.findGuardPattern(n,i,!1,Ge.START_END_PATTERN,new Int32Array(Ge.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Ge.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let i=n.length;if(i===0)return!1;let s=parseInt(n.charAt(i-1),10);return Ge.getStandardUPCEANChecksum(n.substring(0,i-1))===s}static getStandardUPCEANChecksum(n){let i=n.length,s=0;for(let a=i-1;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new F;s+=l}s*=3;for(let a=i-2;a>=0;a-=2){let l=n.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new F;s+=l}return(1e3-s)%10}}class ei extends Ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1],f=0;for(let x=0;x<6&&c<l;x++){let E=Ge.decodeDigit(n,a,c,Ge.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let _ of a)c+=_;E>=10&&(f|=1<<5-x)}s=ei.determineFirstDigit(s,f),c=Ge.findGuardPattern(n,c,!0,Ge.MIDDLE_PATTERN,new Int32Array(Ge.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&c<l;x++){let E=Ge.decodeDigit(n,a,c,Ge.L_PATTERNS);s+=String.fromCharCode(48+E);for(let _ of a)c+=_}return{rowOffset:c,resultString:s}}getBarcodeFormat(){return le.EAN_13}static determineFirstDigit(n,i){for(let s=0;s<10;s++)if(i===this.FIRST_DIGIT_ENCODINGS[s])return n=String.fromCharCode(48+s)+n,n;throw new V}}ei.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class dh extends Ge{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c=i[1];for(let g=0;g<4&&c<l;g++){let x=Ge.decodeDigit(n,a,c,Ge.L_PATTERNS);s+=String.fromCharCode(48+x);for(let E of a)c+=E}c=Ge.findGuardPattern(n,c,!0,Ge.MIDDLE_PATTERN,new Int32Array(Ge.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&c<l;g++){let x=Ge.decodeDigit(n,a,c,Ge.L_PATTERNS);s+=String.fromCharCode(48+x);for(let E of a)c+=E}return{rowOffset:c,resultString:s}}getBarcodeFormat(){return le.EAN_8}}class gh extends Ge{constructor(){super(...arguments),this.ean13Reader=new ei}getBarcodeFormat(){return le.UPC_A}decode(n,i){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,i,s){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,i,s))}decodeMiddle(n,i,s){return this.ean13Reader.decodeMiddle(n,i,s)}maybeReturnResult(n){let i=n.getText();if(i.charAt(0)==="0"){let s=new Ie(i.substring(1),null,null,n.getResultPoints(),le.UPC_A);return n.getResultMetadata()!=null&&s.putAllMetadata(n.getResultMetadata()),s}else throw new V}reset(){this.ean13Reader.reset()}}class Hn extends Ge{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,i,s){const a=this.decodeMiddleCounters.map(x=>x);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=n.getSize();let c=i[1],f=0;for(let x=0;x<6&&c<l;x++){const E=Hn.decodeDigit(n,a,c,Hn.L_AND_G_PATTERNS);s+=String.fromCharCode(48+E%10);for(let _ of a)c+=_;E>=10&&(f|=1<<5-x)}let g=Hn.determineNumSysAndCheckDigit(s,f);return{rowOffset:c,resultString:g}}decodeEnd(n,i){return Hn.findGuardPatternWithoutCounters(n,i,!0,Hn.MIDDLE_END_PATTERN)}checkChecksum(n){return Ge.checkChecksum(Hn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,i){for(let s=0;s<=1;s++)for(let a=0;a<10;a++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[s][a]){let l=String.fromCharCode(48+s),c=String.fromCharCode(48+a);return l+n+c}throw V.getNotFoundInstance()}getBarcodeFormat(){return le.UPC_E}static convertUPCEtoUPCA(n){const i=n.slice(1,7).split("").map(l=>l.charCodeAt(0)),s=new ae;s.append(n.charAt(0));let a=i[5];switch(a){case 0:case 1:case 2:s.appendChars(i,0,2),s.append(a),s.append("0000"),s.appendChars(i,2,3);break;case 3:s.appendChars(i,0,3),s.append("00000"),s.appendChars(i,3,2);break;case 4:s.appendChars(i,0,4),s.append("00000"),s.append(i[4]);break;default:s.appendChars(i,0,5),s.append("0000"),s.append(a);break}return n.length>=8&&s.append(n.charAt(7)),s.toString()}}Hn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Hn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ml extends st{constructor(n){super();let i=n==null?null:n.get(q.POSSIBLE_FORMATS),s=[];o(i)?(s.push(new ei),s.push(new gh),s.push(new dh),s.push(new Hn)):(i.indexOf(le.EAN_13)>-1&&s.push(new ei),i.indexOf(le.UPC_A)>-1&&s.push(new gh),i.indexOf(le.EAN_8)>-1&&s.push(new dh),i.indexOf(le.UPC_E)>-1&&s.push(new Hn)),this.readers=s}decodeRow(n,i,s){for(let a of this.readers)try{const l=a.decodeRow(n,i,s),c=l.getBarcodeFormat()===le.EAN_13&&l.getText().charAt(0)==="0",f=s==null?null:s.get(q.POSSIBLE_FORMATS),g=f==null||f.includes(le.UPC_A);if(c&&g){const x=l.getRawBytes(),E=new Ie(l.getText().substring(1),x,x?x.length:null,l.getResultPoints(),le.UPC_A);return E.putAllMetadata(l.getResultMetadata()),E}return l}catch{}throw new V}reset(){for(let n of this.readers)n.reset()}}class Kt extends st{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,i){for(let s=0;s<i.length;s++)if(st.patternMatchVariance(n,i[s],Kt.MAX_INDIVIDUAL_VARIANCE)<Kt.MAX_AVG_VARIANCE)return s;throw new V}static count(n){return _e.sum(new Int32Array(n))}static increment(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]>a&&(a=i[l],s=l);n[s]++}static decrement(n,i){let s=0,a=i[0];for(let l=1;l<n.length;l++)i[l]<a&&(a=i[l],s=l);n[s]--}static isFinderPattern(n){let i=n[0]+n[1],s=i+n[2]+n[3],a=i/s;if(a>=Kt.MIN_FINDER_PATTERN_RATIO&&a<=Kt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let f of n)f>c&&(c=f),f<l&&(l=f);return c<10*l}return!1}}Kt.MAX_AVG_VARIANCE=.2,Kt.MAX_INDIVIDUAL_VARIANCE=.45,Kt.MIN_FINDER_PATTERN_RATIO=9.5/12,Kt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ti{constructor(n,i){this.value=n,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Ti))return!1;const i=n;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bo{constructor(n,i,s,a,l){this.value=n,this.startEnd=i,this.value=n,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new ue(s,l)),this.resultPoints.push(new ue(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof bo))return!1;const i=n;return this.value===i.value}hashCode(){return this.value}}class Jn{constructor(){}static getRSSvalue(n,i,s){let a=0;for(let g of n)a+=g;let l=0,c=0,f=n.length;for(let g=0;g<f-1;g++){let x;for(x=1,c|=1<<g;x<n[g];x++,c&=~(1<<g)){let E=Jn.combins(a-x-1,f-g-2);if(s&&c===0&&a-x-(f-g-1)>=f-g-1&&(E-=Jn.combins(a-x-(f-g),f-g-2)),f-g-1>1){let _=0;for(let A=a-x-(f-g-2);A>i;A--)_+=Jn.combins(a-x-A-1,f-g-3);E-=_*(f-1-g)}else a-x>i&&E--;l+=E}a-=x}return l}static combins(n,i){let s,a;n-i>i?(a=i,s=n-i):(a=n-i,s=i);let l=1,c=1;for(let f=n;f>s;f--)l*=f,c<=a&&(l/=c,c++);for(;c<=a;)l/=c,c++;return l}}class eg{static buildBitArray(n){let i=n.length*2-1;n[n.length-1].getRightChar()==null&&(i-=1);let s=12*i,a=new U(s),l=0,f=n[0].getRightChar().getValue();for(let g=11;g>=0;--g)f&1<<g&&a.set(l),l++;for(let g=1;g<n.length;++g){let x=n[g],E=x.getLeftChar().getValue();for(let _=11;_>=0;--_)E&1<<_&&a.set(l),l++;if(x.getRightChar()!=null){let _=x.getRightChar().getValue();for(let A=11;A>=0;--A)_&1<<A&&a.set(l),l++}}return a}}class ti{constructor(n,i){i?this.decodedInformation=null:(this.finished=n,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class xl{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class un extends xl{constructor(n,i){super(n),this.value=i}getValue(){return this.value}isFNC1(){return this.value===un.FNC1}}un.FNC1="$";class ni extends xl{constructor(n,i,s){super(n),s?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class kn extends xl{constructor(n,i,s){if(super(n),i<0||i>10||s<0||s>10)throw new F;this.firstDigit=i,this.secondDigit=s}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===kn.FNC1}isSecondDigitFNC1(){return this.secondDigit===kn.FNC1}isAnyFNC1(){return this.firstDigit===kn.FNC1||this.secondDigit===kn.FNC1}}kn.FNC1=10;class he{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new V;let i=n.substring(0,2);for(let l of he.TWO_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===he.VARIABLE_LENGTH?he.processVariableAI(2,l[2],n):he.processFixedAI(2,l[1],n);if(n.length<3)throw new V;let s=n.substring(0,3);for(let l of he.THREE_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===he.VARIABLE_LENGTH?he.processVariableAI(3,l[2],n):he.processFixedAI(3,l[1],n);for(let l of he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,l[2],n):he.processFixedAI(4,l[1],n);if(n.length<4)throw new V;let a=n.substring(0,4);for(let l of he.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,l[2],n):he.processFixedAI(4,l[1],n);throw new V}static processFixedAI(n,i,s){if(s.length<n)throw new V;let a=s.substring(0,n);if(s.length<n+i)throw new V;let l=s.substring(n,n+i),c=s.substring(n+i),f="("+a+")"+l,g=he.parseFieldsInGeneralPurpose(c);return g==null?f:f+g}static processVariableAI(n,i,s){let a=s.substring(0,n),l;s.length<n+i?l=s.length:l=n+i;let c=s.substring(n,l),f=s.substring(l),g="("+a+")"+c,x=he.parseFieldsInGeneralPurpose(f);return x==null?g:g+x}}he.VARIABLE_LENGTH=[],he.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",he.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",he.VARIABLE_LENGTH,20],["22",he.VARIABLE_LENGTH,29],["30",he.VARIABLE_LENGTH,8],["37",he.VARIABLE_LENGTH,8],["90",he.VARIABLE_LENGTH,30],["91",he.VARIABLE_LENGTH,30],["92",he.VARIABLE_LENGTH,30],["93",he.VARIABLE_LENGTH,30],["94",he.VARIABLE_LENGTH,30],["95",he.VARIABLE_LENGTH,30],["96",he.VARIABLE_LENGTH,30],["97",he.VARIABLE_LENGTH,3],["98",he.VARIABLE_LENGTH,30],["99",he.VARIABLE_LENGTH,30]],he.THREE_DIGIT_DATA_LENGTH=[["240",he.VARIABLE_LENGTH,30],["241",he.VARIABLE_LENGTH,30],["242",he.VARIABLE_LENGTH,6],["250",he.VARIABLE_LENGTH,30],["251",he.VARIABLE_LENGTH,30],["253",he.VARIABLE_LENGTH,17],["254",he.VARIABLE_LENGTH,20],["400",he.VARIABLE_LENGTH,30],["401",he.VARIABLE_LENGTH,30],["402",17],["403",he.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",he.VARIABLE_LENGTH,20],["421",he.VARIABLE_LENGTH,15],["422",3],["423",he.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",he.VARIABLE_LENGTH,15],["391",he.VARIABLE_LENGTH,18],["392",he.VARIABLE_LENGTH,15],["393",he.VARIABLE_LENGTH,18],["703",he.VARIABLE_LENGTH,30]],he.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",he.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",he.VARIABLE_LENGTH,20],["8003",he.VARIABLE_LENGTH,30],["8004",he.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",he.VARIABLE_LENGTH,30],["8008",he.VARIABLE_LENGTH,12],["8018",18],["8020",he.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",he.VARIABLE_LENGTH,70],["8200",he.VARIABLE_LENGTH,70]];class bi{constructor(n){this.buffer=new ae,this.information=n}decodeAllCodes(n,i){let s=i,a=null;do{let l=this.decodeGeneralPurposeField(s,a),c=he.parseFieldsInGeneralPurpose(l.getNewString());if(c!=null&&n.append(c),l.isRemaining()?a=""+l.getRemainingValue():a=null,s===l.getNewPosition())break;s=l.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let i=n;i<n+3;++i)if(this.information.get(i))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(n,4);return l===0?new kn(this.information.getSize(),kn.FNC1,kn.FNC1):new kn(this.information.getSize(),l-1,kn.FNC1)}let i=this.extractNumericValueFromBitArray(n,7),s=(i-8)/11,a=(i-8)%11;return new kn(n+7,s,a)}extractNumericValueFromBitArray(n,i){return bi.extractNumericValueFromBitArray(this.information,n,i)}static extractNumericValueFromBitArray(n,i,s){let a=0;for(let l=0;l<s;++l)n.get(i+l)&&(a|=1<<s-l-1);return a}decodeGeneralPurposeField(n,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(n);let s=this.parseBlocks();return s!=null&&s.isRemaining()?new ni(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new ni(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,i;do{let s=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),n=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),n=i.isFinished()):(i=this.parseNumericBlock(),n=i.isFinished()),!(s!==this.current.getPosition())&&!n)break}while(!n);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let i;return n.isSecondDigitFNC1()?i=new ni(this.current.getPosition(),this.buffer.toString()):i=new ni(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new ti(!0,i)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let i=new ni(this.current.getPosition(),this.buffer.toString());return new ti(!0,i)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ti(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new ni(this.current.getPosition(),this.buffer.toString());return new ti(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ti(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let i=new ni(this.current.getPosition(),this.buffer.toString());return new ti(!0,i)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ti(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+7>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<116)return!0;if(n+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,8);return a>=232&&a<253}decodeIsoIec646(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new un(n+5,un.FNC1);if(i>=5&&i<15)return new un(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,7);if(s>=64&&s<90)return new un(n+7,""+(s+1));if(s>=90&&s<116)return new un(n+7,""+(s+7));let a=this.extractNumericValueFromBitArray(n,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new F}return new un(n+8,l)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,5);if(i>=5&&i<16)return!0;if(n+6>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,6);return s>=16&&s<63}decodeAlphanumeric(n){let i=this.extractNumericValueFromBitArray(n,5);if(i===15)return new un(n+5,un.FNC1);if(i>=5&&i<15)return new un(n+5,"0"+(i-5));let s=this.extractNumericValueFromBitArray(n,6);if(s>=32&&s<58)return new un(n+6,""+(s+33));let a;switch(s){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new ze("Decoding invalid alphanumeric value: "+s)}return new un(n+6,a)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<5&&i+n<this.information.getSize();++i)if(i===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+i))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let i=n;i<n+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let i=0;i<4&&i+n<this.information.getSize();++i)if(this.information.get(n+i))return!1;return!0}}class wl{constructor(n){this.information=n,this.generalDecoder=new bi(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class cn extends wl{constructor(n){super(n)}encodeCompressedGtin(n,i){n.append("(01)");let s=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,i,s)}encodeCompressedGtinWithoutAI(n,i,s){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*a,10);l/100===0&&n.append("0"),l/10===0&&n.append("0"),n.append(l)}cn.appendCheckDigit(n,s)}static appendCheckDigit(n,i){let s=0;for(let a=0;a<13;a++){let l=n.charAt(a+i).charCodeAt(0)-48;s+=a&1?l:3*l}s=10-s%10,s===10&&(s=0),n.append(s)}}cn.GTIN_SIZE=40;class Oi extends cn{constructor(n){super(n)}parseInformation(){let n=new ae;n.append("(01)");let i=n.length(),s=this.getGeneralDecoder().extractNumericValueFromBitArray(Oi.HEADER_SIZE,4);return n.append(s),this.encodeCompressedGtinWithoutAI(n,Oi.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(n,Oi.HEADER_SIZE+44)}}Oi.HEADER_SIZE=4;class Oo extends wl{constructor(n){super(n)}parseInformation(){let n=new ae;return this.getGeneralDecoder().decodeAllCodes(n,Oo.HEADER_SIZE)}}Oo.HEADER_SIZE=5;class No extends cn{constructor(n){super(n)}encodeCompressedWeight(n,i,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,s);this.addWeightCode(n,a);let l=this.checkWeight(a),c=1e5;for(let f=0;f<5;++f)l/c===0&&n.append("0"),c/=10;n.append(l)}}class er extends No{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=er.HEADER_SIZE+No.GTIN_SIZE+er.WEIGHT_SIZE)throw new V;let n=new ae;return this.encodeCompressedGtin(n,er.HEADER_SIZE),this.encodeCompressedWeight(n,er.HEADER_SIZE+No.GTIN_SIZE,er.WEIGHT_SIZE),n.toString()}}er.HEADER_SIZE=5,er.WEIGHT_SIZE=15;class tg extends er{constructor(n){super(n)}addWeightCode(n,i){n.append("(3103)")}checkWeight(n){return n}}class ng extends er{constructor(n){super(n)}addWeightCode(n,i){i<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class tr extends cn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<tr.HEADER_SIZE+cn.GTIN_SIZE)throw new V;let n=new ae;this.encodeCompressedGtin(n,tr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE+cn.GTIN_SIZE,tr.LAST_DIGIT_SIZE);n.append("(392"),n.append(i),n.append(")");let s=this.getGeneralDecoder().decodeGeneralPurposeField(tr.HEADER_SIZE+cn.GTIN_SIZE+tr.LAST_DIGIT_SIZE,null);return n.append(s.getNewString()),n.toString()}}tr.HEADER_SIZE=8,tr.LAST_DIGIT_SIZE=2;class tn extends cn{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<tn.HEADER_SIZE+cn.GTIN_SIZE)throw new V;let n=new ae;this.encodeCompressedGtin(n,tn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+cn.GTIN_SIZE,tn.LAST_DIGIT_SIZE);n.append("(393"),n.append(i),n.append(")");let s=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+cn.GTIN_SIZE+tn.LAST_DIGIT_SIZE,tn.FIRST_THREE_DIGITS_SIZE);s/100==0&&n.append("0"),s/10==0&&n.append("0"),n.append(s);let a=this.getGeneralDecoder().decodeGeneralPurposeField(tn.HEADER_SIZE+cn.GTIN_SIZE+tn.LAST_DIGIT_SIZE+tn.FIRST_THREE_DIGITS_SIZE,null);return n.append(a.getNewString()),n.toString()}}tn.HEADER_SIZE=8,tn.LAST_DIGIT_SIZE=2,tn.FIRST_THREE_DIGITS_SIZE=10;class ft extends No{constructor(n,i,s){super(n),this.dateCode=s,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE+ft.DATE_SIZE)throw new V;let n=new ae;return this.encodeCompressedGtin(n,ft.HEADER_SIZE),this.encodeCompressedWeight(n,ft.HEADER_SIZE+ft.GTIN_SIZE,ft.WEIGHT_SIZE),this.encodeCompressedDate(n,ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(i,ft.DATE_SIZE);if(s==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let a=s%32;s/=32;let l=s%12+1;s/=12;let c=s;c/10==0&&n.append("0"),n.append(c),l/10==0&&n.append("0"),n.append(l),a/10==0&&n.append("0"),n.append(a)}addWeightCode(n,i){n.append("("),n.append(this.firstAIdigits),n.append(i/1e5),n.append(")")}checkWeight(n){return n%1e5}}ft.HEADER_SIZE=8,ft.WEIGHT_SIZE=20,ft.DATE_SIZE=16;function ph(C){try{if(C.get(1))return new Oi(C);if(!C.get(2))return new Oo(C);switch(bi.extractNumericValueFromBitArray(C,1,4)){case 4:return new tg(C);case 5:return new ng(C)}switch(bi.extractNumericValueFromBitArray(C,1,5)){case 12:return new tr(C);case 13:return new tn(C)}switch(bi.extractNumericValueFromBitArray(C,1,7)){case 56:return new ft(C,"310","11");case 57:return new ft(C,"320","11");case 58:return new ft(C,"310","13");case 59:return new ft(C,"320","13");case 60:return new ft(C,"310","15");case 61:return new ft(C,"320","15");case 62:return new ft(C,"310","17");case 63:return new ft(C,"320","17")}}catch(n){throw console.log(n),new ze("unknown decoder: "+C)}}class Ar{constructor(n,i,s,a){this.leftchar=n,this.rightchar=i,this.finderpattern=s,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,i){return n instanceof Ar?Ar.equalsOrNull(n.leftchar,i.leftchar)&&Ar.equalsOrNull(n.rightchar,i.rightchar)&&Ar.equalsOrNull(n.finderpattern,i.finderpattern):!1}static equalsOrNull(n,i){return n===null?i===null:Ar.equals(n,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yl{constructor(n,i,s){this.pairs=n,this.rowNumber=i,this.wasReversed=s}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,i){return n instanceof yl?this.checkEqualitity(n,i)&&n.wasReversed===i.wasReversed:!1}checkEqualitity(n,i){if(!n||!i)return;let s;return n.forEach((a,l)=>{i.forEach(c=>{a.getLeftChar().getValue()===c.getLeftChar().getValue()&&a.getRightChar().getValue()===c.getRightChar().getValue()&&a.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(s=!0)})}),s}}class $ extends Kt{constructor(n){super(...arguments),this.pairs=new Array($.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,i,s){this.pairs.length=0,this.startFromEven=!1;try{return $.constructResult(this.decodeRow2pairs(n,i))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,$.constructResult(this.decodeRow2pairs(n,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,i){let s=!1;for(;!s;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,n))}catch(l){if(l instanceof V){if(!this.pairs.length)throw new V;s=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(n,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new V}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(s){this.verbose&&console.log(s)}return n&&(this.rows=this.rows.reverse()),i}checkRows(n,i){for(let s=i;s<this.rows.length;s++){let a=this.rows[s];this.pairs.length=0;for(let c of n)this.pairs.push(c.getPairs());if(this.pairs.push(a.getPairs()),!$.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(n);l.push(a);try{return this.checkRows(l,s+1)}catch(c){this.verbose&&console.log(c)}}throw new V}static isValidSequence(n){for(let i of $.FINDER_PATTERN_SEQUENCES){if(n.length>i.length)continue;let s=!0;for(let a=0;a<n.length;a++)if(n[a].getFinderPattern().getValue()!=i[a]){s=!1;break}if(s)return!0}return!1}storeRow(n,i){let s=0,a=!1,l=!1;for(;s<this.rows.length;){let c=this.rows[s];if(c.getRowNumber()>n){l=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),s++}l||a||$.isPartialRow(this.pairs,this.rows)||(this.rows.push(s,new yl(this.pairs,n,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,i){for(let s of i)if(s.getPairs().length!==n.length){for(let a of s.getPairs())for(let l of n)if(Ar.equals(a,l))break}}static isPartialRow(n,i){for(let s of i){let a=!0;for(let l of n){let c=!1;for(let f of s.getPairs())if(l.equals(f)){c=!0;break}if(!c){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(n){let i=eg.buildBitArray(n),a=ph(i).parseInformation(),l=n[0].getFinderPattern().getResultPoints(),c=n[n.length-1].getFinderPattern().getResultPoints(),f=[l[0],l[1],c[0],c[1]];return new Ie(a,null,null,f,le.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),i=n.getLeftChar(),s=n.getRightChar();if(s==null)return!1;let a=s.getChecksumPortion(),l=2;for(let f=1;f<this.pairs.size();++f){let g=this.pairs.get(f);a+=g.getLeftChar().getChecksumPortion(),l++;let x=g.getRightChar();x!=null&&(a+=x.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==i.getValue()}static getNextSecondBar(n,i){let s;return n.get(i)?(s=n.getNextUnset(i),s=n.getNextSet(s)):(s=n.getNextSet(i),s=n.getNextUnset(s)),s}retrieveNextPair(n,i,s){let a=i.length%2==0;this.startFromEven&&(a=!a);let l,c=!0,f=-1;do this.findNextPair(n,i,f),l=this.parseFoundFinderPattern(n,s,a),l==null?f=$.getNextSecondBar(n,this.startEnd[0]):c=!1;while(c);let g=this.decodeDataCharacter(n,l,a,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new V;let x;try{x=this.decodeDataCharacter(n,l,a,!1)}catch(E){x=null,this.verbose&&console.log(E)}return new Ar(g,x,l,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,i,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=n.getSize(),c;s>=0?c=s:this.isEmptyPair(i)?c=0:c=i[i.length-1].getFinderPattern().getStartEnd()[1];let f=i.length%2!=0;this.startFromEven&&(f=!f);let g=!1;for(;c<l&&(g=!n.get(c),!!g);)c++;let x=0,E=c;for(let _=c;_<l;_++)if(n.get(_)!=g)a[x]++;else{if(x==3){if(f&&$.reverseCounters(a),$.isFinderPattern(a)){this.startEnd[0]=E,this.startEnd[1]=_;return}f&&$.reverseCounters(a),E+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,x--}else x++;a[x]=1,g=!g}throw new V}static reverseCounters(n){let i=n.length;for(let s=0;s<i/2;++s){let a=n[s];n[s]=n[i-s-1],n[i-s-1]=a}}parseFoundFinderPattern(n,i,s){let a,l,c;if(s){let x=this.startEnd[0]-1;for(;x>=0&&!n.get(x);)x--;x++,a=this.startEnd[0]-x,l=x,c=this.startEnd[1]}else l=this.startEnd[0],c=n.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];let f=this.getDecodeFinderCounters();L.arraycopy(f,0,f,1,f.length-1),f[0]=a;let g;try{g=this.parseFinderValue(f,$.FINDER_PATTERNS)}catch{return null}return new bo(g,[l,c],l,c,i)}decodeDataCharacter(n,i,s,a){let l=this.getDataCharacterCounters();for(let tt=0;tt<l.length;tt++)l[tt]=0;if(a)$.recordPatternInReverse(n,i.getStartEnd()[0],l);else{$.recordPattern(n,i.getStartEnd()[1],l);for(let tt=0,Wt=l.length-1;tt<Wt;tt++,Wt--){let Cn=l[tt];l[tt]=l[Wt],l[Wt]=Cn}}let c=17,f=_e.sum(new Int32Array(l))/c,g=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(f-g)/g>.3)throw new V;let x=this.getOddCounts(),E=this.getEvenCounts(),_=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let tt=0;tt<l.length;tt++){let Wt=1*l[tt]/f,Cn=Wt+.5;if(Cn<1){if(Wt<.3)throw new V;Cn=1}else if(Cn>8){if(Wt>8.7)throw new V;Cn=8}let Mi=tt/2;tt&1?(E[Mi]=Cn,A[Mi]=Wt-Cn):(x[Mi]=Cn,_[Mi]=Wt-Cn)}this.adjustOddEvenCounts(c);let T=4*i.getValue()+(s?0:2)+(a?0:1)-1,M=0,P=0;for(let tt=x.length-1;tt>=0;tt--){if($.isNotA1left(i,s,a)){let Wt=$.WEIGHTS[T][2*tt];P+=x[tt]*Wt}M+=x[tt]}let j=0;for(let tt=E.length-1;tt>=0;tt--)if($.isNotA1left(i,s,a)){let Wt=$.WEIGHTS[T][2*tt+1];j+=E[tt]*Wt}let W=P+j;if(M&1||M>13||M<4)throw new V;let ie=(13-M)/2,se=$.SYMBOL_WIDEST[ie],Z=9-se,Pe=Jn.getRSSvalue(x,se,!0),Ae=Jn.getRSSvalue(E,Z,!1),fn=$.EVEN_TOTAL_SUBSET[ie],Wn=$.GSUM[ie],dn=Pe*fn+Ae+Wn;return new Ti(dn,W)}static isNotA1left(n,i,s){return!(n.getValue()==0&&i&&s)}adjustOddEvenCounts(n){let i=_e.sum(new Int32Array(this.getOddCounts())),s=_e.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);let c=!1,f=!1;s>13?f=!0:s<4&&(c=!0);let g=i+s-n,x=(i&1)==1,E=(s&1)==0;if(g==1)if(x){if(E)throw new V;l=!0}else{if(!E)throw new V;f=!0}else if(g==-1)if(x){if(E)throw new V;a=!0}else{if(!E)throw new V;c=!0}else if(g==0){if(x){if(!E)throw new V;i<s?(a=!0,f=!0):(l=!0,c=!0)}else if(E)throw new V}else throw new V;if(a){if(l)throw new V;$.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&$.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new V;$.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&$.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$.SYMBOL_WIDEST=[7,5,4,3,1],$.EVEN_TOTAL_SUBSET=[4,20,52,104,204],$.GSUM=[0,348,1388,2948,3988],$.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],$.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],$.FINDER_PAT_A=0,$.FINDER_PAT_B=1,$.FINDER_PAT_C=2,$.FINDER_PAT_D=3,$.FINDER_PAT_E=4,$.FINDER_PAT_F=5,$.FINDER_PATTERN_SEQUENCES=[[$.FINDER_PAT_A,$.FINDER_PAT_A],[$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B],[$.FINDER_PAT_A,$.FINDER_PAT_C,$.FINDER_PAT_B,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_C],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_E,$.FINDER_PAT_B,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F],[$.FINDER_PAT_A,$.FINDER_PAT_A,$.FINDER_PAT_B,$.FINDER_PAT_B,$.FINDER_PAT_C,$.FINDER_PAT_D,$.FINDER_PAT_D,$.FINDER_PAT_E,$.FINDER_PAT_E,$.FINDER_PAT_F,$.FINDER_PAT_F]],$.MAX_PAIRS=11;class rg extends Ti{constructor(n,i,s){super(n,i),this.count=0,this.finderPattern=s}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ct extends Kt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,i,s){const a=this.decodePair(i,!1,n,s);Ct.addOrTally(this.possibleLeftPairs,a),i.reverse();let l=this.decodePair(i,!0,n,s);Ct.addOrTally(this.possibleRightPairs,l),i.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Ct.checkChecksum(c,f))return Ct.constructResult(c,f)}throw new V}static addOrTally(n,i){if(i==null)return;let s=!1;for(let a of n)if(a.getValue()===i.getValue()){a.incrementCount(),s=!0;break}s||n.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,i){let s=4537077*n.getValue()+i.getValue(),a=new String(s).toString(),l=new ae;for(let x=13-a.length;x>0;x--)l.append("0");l.append(a);let c=0;for(let x=0;x<13;x++){let E=l.charAt(x).charCodeAt(0)-48;c+=x&1?E:3*E}c=10-c%10,c===10&&(c=0),l.append(c.toString());let f=n.getFinderPattern().getResultPoints(),g=i.getFinderPattern().getResultPoints();return new Ie(l.toString(),null,0,[f[0],f[1],g[0],g[1]],le.RSS_14,new Date().getTime())}static checkChecksum(n,i){let s=(n.getChecksumPortion()+16*i.getChecksumPortion())%79,a=9*n.getFinderPattern().getValue()+i.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,s===a}decodePair(n,i,s,a){try{let l=this.findFinderPattern(n,i),c=this.parseFoundFinderPattern(n,s,i,l),f=a==null?null:a.get(q.NEED_RESULT_POINT_CALLBACK);if(f!=null){let E=(l[0]+l[1])/2;i&&(E=n.getSize()-1-E),f.foundPossibleResultPoint(new ue(E,s))}let g=this.decodeDataCharacter(n,c,!0),x=this.decodeDataCharacter(n,c,!1);return new rg(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(n,i,s){let a=this.getDataCharacterCounters();for(let j=0;j<a.length;j++)a[j]=0;if(s)st.recordPatternInReverse(n,i.getStartEnd()[0],a);else{st.recordPattern(n,i.getStartEnd()[1]+1,a);for(let j=0,W=a.length-1;j<W;j++,W--){let ie=a[j];a[j]=a[W],a[W]=ie}}let l=s?16:15,c=_e.sum(new Int32Array(a))/l,f=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let j=0;j<a.length;j++){let W=a[j]/c,ie=Math.floor(W+.5);ie<1?ie=1:ie>8&&(ie=8);let se=Math.floor(j/2);j&1?(g[se]=ie,E[se]=W-ie):(f[se]=ie,x[se]=W-ie)}this.adjustOddEvenCounts(s,l);let _=0,A=0;for(let j=f.length-1;j>=0;j--)A*=9,A+=f[j],_+=f[j];let T=0,M=0;for(let j=g.length-1;j>=0;j--)T*=9,T+=g[j],M+=g[j];let P=A+3*T;if(s){if(_&1||_>12||_<4)throw new V;let j=(12-_)/2,W=Ct.OUTSIDE_ODD_WIDEST[j],ie=9-W,se=Jn.getRSSvalue(f,W,!1),Z=Jn.getRSSvalue(g,ie,!0),Pe=Ct.OUTSIDE_EVEN_TOTAL_SUBSET[j],Ae=Ct.OUTSIDE_GSUM[j];return new Ti(se*Pe+Z+Ae,P)}else{if(M&1||M>10||M<4)throw new V;let j=(10-M)/2,W=Ct.INSIDE_ODD_WIDEST[j],ie=9-W,se=Jn.getRSSvalue(f,W,!0),Z=Jn.getRSSvalue(g,ie,!1),Pe=Ct.INSIDE_ODD_TOTAL_SUBSET[j],Ae=Ct.INSIDE_GSUM[j];return new Ti(Z*Pe+se+Ae,P)}}findFinderPattern(n,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let a=n.getSize(),l=!1,c=0;for(;c<a&&(l=!n.get(c),i!==l);)c++;let f=0,g=c;for(let x=c;x<a;x++)if(n.get(x)!==l)s[f]++;else{if(f===3){if(Kt.isFinderPattern(s))return[g,x];g+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,f--}else f++;s[f]=1,l=!l}throw new V}parseFoundFinderPattern(n,i,s,a){let l=n.get(a[0]),c=a[0]-1;for(;c>=0&&l!==n.get(c);)c--;c++;const f=a[0]-c,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);L.arraycopy(g,0,x,1,g.length-1),x[0]=f;const E=this.parseFinderValue(x,Ct.FINDER_PATTERNS);let _=c,A=a[1];return s&&(_=n.getSize()-1-_,A=n.getSize()-1-A),new bo(E,[c,a[1]],_,A,i)}adjustOddEvenCounts(n,i){let s=_e.sum(new Int32Array(this.getOddCounts())),a=_e.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,f=!1,g=!1;n?(s>12?c=!0:s<4&&(l=!0),a>12?g=!0:a<4&&(f=!0)):(s>11?c=!0:s<5&&(l=!0),a>10?g=!0:a<4&&(f=!0));let x=s+a-i,E=(s&1)===(n?1:0),_=(a&1)===1;if(x===1)if(E){if(_)throw new V;c=!0}else{if(!_)throw new V;g=!0}else if(x===-1)if(E){if(_)throw new V;l=!0}else{if(!_)throw new V;f=!0}else if(x===0){if(E){if(!_)throw new V;s<a?(l=!0,g=!0):(c=!0,f=!0)}else if(_)throw new V}else throw new V;if(l){if(c)throw new V;Kt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Kt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new V;Kt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Kt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ct.OUTSIDE_GSUM=[0,161,961,2015,2715],Ct.INSIDE_GSUM=[0,336,1036,1516],Ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ct.INSIDE_ODD_WIDEST=[2,4,6,8],Ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ni extends st{constructor(n,i){super(),this.readers=[],this.verbose=i===!0;const s=n?n.get(q.POSSIBLE_FORMATS):null,a=n&&n.get(q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;s?((s.includes(le.EAN_13)||s.includes(le.UPC_A)||s.includes(le.EAN_8)||s.includes(le.UPC_E))&&this.readers.push(new ml(n)),s.includes(le.CODE_39)&&this.readers.push(new Et(a)),s.includes(le.CODE_128)&&this.readers.push(new te),s.includes(le.ITF)&&this.readers.push(new We),s.includes(le.RSS_14)&&this.readers.push(new Ct),s.includes(le.RSS_EXPANDED)&&this.readers.push(new $(this.verbose))):(this.readers.push(new ml(n)),this.readers.push(new Et),this.readers.push(new ml(n)),this.readers.push(new te),this.readers.push(new We),this.readers.push(new Ct),this.readers.push(new $(this.verbose)))}decodeRow(n,i,s){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(n,i,s)}catch{}throw new V}reset(){this.readers.forEach(n=>n.reset())}}class ig extends ke{constructor(n=500,i){super(new Ni(i),n,i)}}class $e{constructor(n,i,s){this.ecCodewords=n,this.ecBlocks=[i],s&&this.ecBlocks.push(s)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Xe{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Be{constructor(n,i,s,a,l,c){this.versionNumber=n,this.symbolSizeRows=i,this.symbolSizeColumns=s,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=c;let f=0;const g=c.getECCodewords(),x=c.getECBlocks();for(let E of x)f+=E.getCount()*(E.getDataCodewords()+g);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,i){if(n&1||i&1)throw new F;for(let s of Be.VERSIONS)if(s.symbolSizeRows===n&&s.symbolSizeColumns===i)return s;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Be(1,10,10,8,8,new $e(5,new Xe(1,3))),new Be(2,12,12,10,10,new $e(7,new Xe(1,5))),new Be(3,14,14,12,12,new $e(10,new Xe(1,8))),new Be(4,16,16,14,14,new $e(12,new Xe(1,12))),new Be(5,18,18,16,16,new $e(14,new Xe(1,18))),new Be(6,20,20,18,18,new $e(18,new Xe(1,22))),new Be(7,22,22,20,20,new $e(20,new Xe(1,30))),new Be(8,24,24,22,22,new $e(24,new Xe(1,36))),new Be(9,26,26,24,24,new $e(28,new Xe(1,44))),new Be(10,32,32,14,14,new $e(36,new Xe(1,62))),new Be(11,36,36,16,16,new $e(42,new Xe(1,86))),new Be(12,40,40,18,18,new $e(48,new Xe(1,114))),new Be(13,44,44,20,20,new $e(56,new Xe(1,144))),new Be(14,48,48,22,22,new $e(68,new Xe(1,174))),new Be(15,52,52,24,24,new $e(42,new Xe(2,102))),new Be(16,64,64,14,14,new $e(56,new Xe(2,140))),new Be(17,72,72,16,16,new $e(36,new Xe(4,92))),new Be(18,80,80,18,18,new $e(48,new Xe(4,114))),new Be(19,88,88,20,20,new $e(56,new Xe(4,144))),new Be(20,96,96,22,22,new $e(68,new Xe(4,174))),new Be(21,104,104,24,24,new $e(56,new Xe(6,136))),new Be(22,120,120,18,18,new $e(68,new Xe(6,175))),new Be(23,132,132,20,20,new $e(62,new Xe(8,163))),new Be(24,144,144,22,22,new $e(62,new Xe(8,156),new Xe(2,155))),new Be(25,8,18,6,16,new $e(7,new Xe(1,5))),new Be(26,8,32,6,14,new $e(11,new Xe(1,10))),new Be(27,12,26,10,24,new $e(14,new Xe(1,16))),new Be(28,12,36,10,16,new $e(18,new Xe(1,22))),new Be(29,16,36,14,16,new $e(24,new Xe(1,32))),new Be(30,16,48,14,22,new $e(28,new Xe(1,49)))]}}Be.VERSIONS=Be.buildVersions();class El{constructor(n){const i=n.getHeight();if(i<8||i>144||i&1)throw new F;this.version=El.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const i=n.getHeight(),s=n.getWidth();return Be.getVersionForDimensions(i,s)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let i=0,s=4,a=0;const l=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let f=!1,g=!1,x=!1,E=!1;do if(s===l&&a===0&&!f)n[i++]=this.readCorner1(l,c)&255,s-=2,a+=2,f=!0;else if(s===l-2&&a===0&&c&3&&!g)n[i++]=this.readCorner2(l,c)&255,s-=2,a+=2,g=!0;else if(s===l+4&&a===2&&!(c&7)&&!x)n[i++]=this.readCorner3(l,c)&255,s-=2,a+=2,x=!0;else if(s===l-2&&a===0&&(c&7)===4&&!E)n[i++]=this.readCorner4(l,c)&255,s-=2,a+=2,E=!0;else{do s<l&&a>=0&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,c)&255),s-=2,a+=2;while(s>=0&&a<c);s+=1,a+=3;do s>=0&&a<c&&!this.readMappingMatrix.get(a,s)&&(n[i++]=this.readUtah(s,a,l,c)&255),s+=2,a-=2;while(s<l&&a>=0);s+=3,a+=1}while(s<l||a<c);if(i!==this.version.getTotalCodewords())throw new F;return n}readModule(n,i,s,a){return n<0&&(n+=s,i+=4-(s+4&7)),i<0&&(i+=a,n+=4-(a+4&7)),this.readMappingMatrix.set(i,n),this.mappingBitMatrix.get(i,n)}readUtah(n,i,s,a){let l=0;return this.readModule(n-2,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-2,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n-1,i,s,a)&&(l|=1),l<<=1,this.readModule(n,i-2,s,a)&&(l|=1),l<<=1,this.readModule(n,i-1,s,a)&&(l|=1),l<<=1,this.readModule(n,i,s,a)&&(l|=1),l}readCorner1(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,1,n,i)&&(s|=1),s<<=1,this.readModule(n-1,2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}readCorner2(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-4,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner3(n,i){let s=0;return this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(0,i-3,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-3,n,i)&&(s|=1),s<<=1,this.readModule(1,i-2,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s}readCorner4(n,i){let s=0;return this.readModule(n-3,0,n,i)&&(s|=1),s<<=1,this.readModule(n-2,0,n,i)&&(s|=1),s<<=1,this.readModule(n-1,0,n,i)&&(s|=1),s<<=1,this.readModule(0,i-2,n,i)&&(s|=1),s<<=1,this.readModule(0,i-1,n,i)&&(s|=1),s<<=1,this.readModule(1,i-1,n,i)&&(s|=1),s<<=1,this.readModule(2,i-1,n,i)&&(s|=1),s<<=1,this.readModule(3,i-1,n,i)&&(s|=1),s}extractDataRegion(n){const i=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(n.getHeight()!==i)throw new v("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),c=i/a|0,f=s/l|0,g=c*a,x=f*l,E=new me(x,g);for(let _=0;_<c;++_){const A=_*a;for(let T=0;T<f;++T){const M=T*l;for(let P=0;P<a;++P){const j=_*(a+2)+1+P,W=A+P;for(let ie=0;ie<l;++ie){const se=T*(l+2)+1+ie;if(n.get(se,j)){const Z=M+ie;E.set(Z,W)}}}}}return E}}class vl{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i){const s=i.getECBlocks();let a=0;const l=s.getECBlocks();for(let P of l)a+=P.getCount();const c=new Array(a);let f=0;for(let P of l)for(let j=0;j<P.getCount();j++){const W=P.getDataCodewords(),ie=s.getECCodewords()+W;c[f++]=new vl(W,new Uint8Array(ie))}const x=c[0].codewords.length-s.getECCodewords(),E=x-1;let _=0;for(let P=0;P<E;P++)for(let j=0;j<f;j++)c[j].codewords[P]=n[_++];const A=i.getVersionNumber()===24,T=A?8:f;for(let P=0;P<T;P++)c[P].codewords[x-1]=n[_++];const M=c[0].codewords.length;for(let P=x;P<M;P++)for(let j=0;j<f;j++){const W=A?(j+8)%f:j,ie=A&&W>7?P-1:P;c[W].codewords[ie]=n[_++]}if(_!==n.length)throw new v;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Cl{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new v(""+n);let i=0,s=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(s>0){const c=8-s,f=n<c?n:c,g=c-f,x=255>>8-f<<g;i=(l[a]&x)>>g,n-=f,s+=f,s===8&&(s=0,a++)}if(n>0){for(;n>=8;)i=i<<8|l[a]&255,a++,n-=8;if(n>0){const c=8-n,f=255>>c<<c;i=i<<n|(l[a]&f)>>c,s+=n}}return this.bitOffset=s,this.byteOffset=a,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Nt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Nt||(Nt={}));class Sr{static decode(n){const i=new Cl(n),s=new ae,a=new ae,l=new Array;let c=Nt.ASCII_ENCODE;do if(c===Nt.ASCII_ENCODE)c=this.decodeAsciiSegment(i,s,a);else{switch(c){case Nt.C40_ENCODE:this.decodeC40Segment(i,s);break;case Nt.TEXT_ENCODE:this.decodeTextSegment(i,s);break;case Nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,s);break;case Nt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,s);break;case Nt.BASE256_ENCODE:this.decodeBase256Segment(i,s,l);break;default:throw new F}c=Nt.ASCII_ENCODE}while(c!==Nt.PAD_ENCODE&&i.available()>0);return a.length()>0&&s.append(a.toString()),new xe(n,s.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(n,i,s){let a=!1;do{let l=n.readBits(8);if(l===0)throw new F;if(l<=128)return a&&(l+=128),i.append(String.fromCharCode(l-1)),Nt.ASCII_ENCODE;if(l===129)return Nt.PAD_ENCODE;if(l<=229){const c=l-130;c<10&&i.append("0"),i.append(""+c)}else switch(l){case 230:return Nt.C40_ENCODE;case 231:return Nt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:i.append("[)>05"),s.insert(0,"");break;case 237:i.append("[)>06"),s.insert(0,"");break;case 238:return Nt.ANSIX12_ENCODE;case 239:return Nt.TEXT_ENCODE;case 240:return Nt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||n.available()!==0)throw new F;break}}while(n.available()>0);return Nt.ASCII_ENCODE}static decodeC40Segment(n,i){let s=!1;const a=[];let l=0;do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let f=0;f<3;f++){const g=a[f];switch(l){case 0:if(g<3)l=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[g];s?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):i.append(x)}else throw new F;break;case 1:s?(i.append(String.fromCharCode(g+128)),s=!1):i.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];s?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):i.append(x)}else switch(g){case 27:i.append("");break;case 30:s=!0;break;default:throw new F}l=0;break;case 3:s?(i.append(String.fromCharCode(g+224)),s=!1):i.append(String.fromCharCode(g+96)),l=0;break;default:throw new F}}}while(n.available()>0)}static decodeTextSegment(n,i){let s=!1,a=[],l=0;do{if(n.available()===8)return;const c=n.readBits(8);if(c===254)return;this.parseTwoBytes(c,n.readBits(8),a);for(let f=0;f<3;f++){const g=a[f];switch(l){case 0:if(g<3)l=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[g];s?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):i.append(x)}else throw new F;break;case 1:s?(i.append(String.fromCharCode(g+128)),s=!1):i.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];s?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):i.append(x)}else switch(g){case 27:i.append("");break;case 30:s=!0;break;default:throw new F}l=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[g];s?(i.append(String.fromCharCode(x.charCodeAt(0)+128)),s=!1):i.append(x),l=0}else throw new F;break;default:throw new F}}}while(n.available()>0)}static decodeAnsiX12Segment(n,i){const s=[];do{if(n.available()===8)return;const a=n.readBits(8);if(a===254)return;this.parseTwoBytes(a,n.readBits(8),s);for(let l=0;l<3;l++){const c=s[l];switch(c){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(c<14)i.append(String.fromCharCode(c+44));else if(c<40)i.append(String.fromCharCode(c+51));else throw new F;break}}}while(n.available()>0)}static parseTwoBytes(n,i,s){let a=(n<<8)+i-1,l=Math.floor(a/1600);s[0]=l,a-=l*1600,l=Math.floor(a/40),s[1]=l,s[2]=a-l*40}static decodeEdifactSegment(n,i){do{if(n.available()<=16)return;for(let s=0;s<4;s++){let a=n.readBits(6);if(a===31){const l=8-n.getBitOffset();l!==8&&n.readBits(l);return}a&32||(a|=64),i.append(String.fromCharCode(a))}}while(n.available()>0)}static decodeBase256Segment(n,i,s){let a=1+n.getByteOffset();const l=this.unrandomize255State(n.readBits(8),a++);let c;if(l===0?c=n.available()/8|0:l<250?c=l:c=250*(l-249)+this.unrandomize255State(n.readBits(8),a++),c<0)throw new F;const f=new Uint8Array(c);for(let g=0;g<c;g++){if(n.available()<8)throw new F;f[g]=this.unrandomize255State(n.readBits(8),a++)}s.push(f);try{i.append(oe.decode(f,Y.ISO88591))}catch(g){throw new ze("Platform does not support required encoding: "+g.message)}}static unrandomize255State(n,i){const s=149*i%255+1,a=n-s;return a>=0?a:a+256}}Sr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Sr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Sr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Sr.TEXT_SHIFT2_SET_CHARS=Sr.C40_SHIFT2_SET_CHARS,Sr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class sg{constructor(){this.rsDecoder=new Ve(pe.DATA_MATRIX_FIELD_256)}decode(n){const i=new El(n),s=i.getVersion(),a=i.readCodewords(),l=vl.getDataBlocks(a,s);let c=0;for(let x of l)c+=x.getNumDataCodewords();const f=new Uint8Array(c),g=l.length;for(let x=0;x<g;x++){const E=l[x],_=E.getCodewords(),A=E.getNumDataCodewords();this.correctErrors(_,A);for(let T=0;T<A;T++)f[T*g+x]=_[T]}return Sr.decode(f)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new k}for(let a=0;a<i;a++)n[a]=s[a]}}class It{constructor(n){this.image=n,this.rectangleDetector=new zt(this.image)}detect(){const n=this.rectangleDetector.detect();let i=this.detectSolid1(n);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new V;i=this.shiftToModuleCenter(i);const s=i[0],a=i[1],l=i[2],c=i[3];let f=this.transitionsBetween(s,c)+1,g=this.transitionsBetween(l,c)+1;(f&1)===1&&(f+=1),(g&1)===1&&(g+=1),4*f<7*g&&4*g<7*f&&(f=g=Math.max(f,g));let x=It.sampleGrid(this.image,s,a,l,c,f,g);return new Qe(x,[s,a,l,c])}static shiftPoint(n,i,s){let a=(i.getX()-n.getX())/(s+1),l=(i.getY()-n.getY())/(s+1);return new ue(n.getX()+a,n.getY()+l)}static moveAway(n,i,s){let a=n.getX(),l=n.getY();return a<i?a-=1:a+=1,l<s?l-=1:l+=1,new ue(a,l)}detectSolid1(n){let i=n[0],s=n[1],a=n[3],l=n[2],c=this.transitionsBetween(i,s),f=this.transitionsBetween(s,a),g=this.transitionsBetween(a,l),x=this.transitionsBetween(l,i),E=c,_=[l,i,s,a];return E>f&&(E=f,_[0]=i,_[1]=s,_[2]=a,_[3]=l),E>g&&(E=g,_[0]=s,_[1]=a,_[2]=l,_[3]=i),E>x&&(_[0]=a,_[1]=l,_[2]=i,_[3]=s),_}detectSolid2(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l),f=It.shiftPoint(s,a,(c+1)*4),g=It.shiftPoint(a,s,(c+1)*4),x=this.transitionsBetween(f,i),E=this.transitionsBetween(g,l);return x<E?(n[0]=i,n[1]=s,n[2]=a,n[3]=l):(n[0]=s,n[1]=a,n[2]=l,n[3]=i),n}correctTopRight(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l),f=this.transitionsBetween(s,l),g=It.shiftPoint(i,s,(f+1)*4),x=It.shiftPoint(a,s,(c+1)*4);c=this.transitionsBetween(g,l),f=this.transitionsBetween(x,l);let E=new ue(l.getX()+(a.getX()-s.getX())/(c+1),l.getY()+(a.getY()-s.getY())/(c+1)),_=new ue(l.getX()+(i.getX()-s.getX())/(f+1),l.getY()+(i.getY()-s.getY())/(f+1));if(!this.isValid(E))return this.isValid(_)?_:null;if(!this.isValid(_))return E;let A=this.transitionsBetween(g,E)+this.transitionsBetween(x,E),T=this.transitionsBetween(g,_)+this.transitionsBetween(x,_);return A>T?E:_}shiftToModuleCenter(n){let i=n[0],s=n[1],a=n[2],l=n[3],c=this.transitionsBetween(i,l)+1,f=this.transitionsBetween(a,l)+1,g=It.shiftPoint(i,s,f*4),x=It.shiftPoint(a,s,c*4);c=this.transitionsBetween(g,l)+1,f=this.transitionsBetween(x,l)+1,(c&1)===1&&(c+=1),(f&1)===1&&(f+=1);let E=(i.getX()+s.getX()+a.getX()+l.getX())/4,_=(i.getY()+s.getY()+a.getY()+l.getY())/4;i=It.moveAway(i,E,_),s=It.moveAway(s,E,_),a=It.moveAway(a,E,_),l=It.moveAway(l,E,_);let A,T;return g=It.shiftPoint(i,s,f*4),g=It.shiftPoint(g,l,c*4),A=It.shiftPoint(s,i,f*4),A=It.shiftPoint(A,a,c*4),x=It.shiftPoint(a,l,f*4),x=It.shiftPoint(x,s,c*4),T=It.shiftPoint(l,a,f*4),T=It.shiftPoint(T,i,c*4),[g,A,x,T]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,i,s,a,l,c,f){return $t.getInstance().sampleGrid(n,c,f,.5,.5,c-.5,.5,c-.5,f-.5,.5,f-.5,i.getX(),i.getY(),l.getX(),l.getY(),a.getX(),a.getY(),s.getX(),s.getY())}transitionsBetween(n,i){let s=Math.trunc(n.getX()),a=Math.trunc(n.getY()),l=Math.trunc(i.getX()),c=Math.trunc(i.getY()),f=Math.abs(c-a)>Math.abs(l-s);if(f){let P=s;s=a,a=P,P=l,l=c,c=P}let g=Math.abs(l-s),x=Math.abs(c-a),E=-g/2,_=a<c?1:-1,A=s<l?1:-1,T=0,M=this.image.get(f?a:s,f?s:a);for(let P=s,j=a;P!==l;P+=A){let W=this.image.get(f?j:P,f?P:j);if(W!==M&&(T++,M=W),E+=x,E>0){if(j===c)break;j+=_,E-=g}}return T}}class Ir{constructor(){this.decoder=new sg}decode(n,i=null){let s,a;if(i!=null&&i.has(q.PURE_BARCODE)){const x=Ir.extractPureBits(n.getBlackMatrix());s=this.decoder.decode(x),a=Ir.NO_POINTS}else{const x=new It(n.getBlackMatrix()).detect();s=this.decoder.decode(x.getBits()),a=x.getPoints()}const l=s.getRawBytes(),c=new Ie(s.getText(),l,8*l.length,a,le.DATA_MATRIX,L.currentTimeMillis()),f=s.getByteSegments();f!=null&&c.putMetadata(De.BYTE_SEGMENTS,f);const g=s.getECLevel();return g!=null&&c.putMetadata(De.ERROR_CORRECTION_LEVEL,g),c}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i==null||s==null)throw new V;const a=this.moduleSize(i,n);let l=i[1];const c=s[1];let f=i[0];const x=(s[0]-f+1)/a,E=(c-l+1)/a;if(x<=0||E<=0)throw new V;const _=a/2;l+=_,f+=_;const A=new me(x,E);for(let T=0;T<E;T++){const M=l+T*a;for(let P=0;P<x;P++)n.get(f+P*a,M)&&A.set(P,T)}return A}static moduleSize(n,i){const s=i.getWidth();let a=n[0];const l=n[1];for(;a<s&&i.get(a,l);)a++;if(a===s)throw new V;const c=a-n[0];if(c===0)throw new V;return c}}Ir.NO_POINTS=[];class og extends ke{constructor(n=500){super(new Ir,n)}}var Ri;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(Ri||(Ri={}));class nt{constructor(n,i,s){this.value=n,this.stringValue=i,this.bits=s,nt.FOR_BITS.set(s,this),nt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return nt.L;case"M":return nt.M;case"Q":return nt.Q;case"H":return nt.H;default:throw new y(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof nt))return!1;const i=n;return this.value===i.value}static forBits(n){if(n<0||n>=nt.FOR_BITS.size)throw new v;return nt.FOR_BITS.get(n)}}nt.FOR_BITS=new Map,nt.FOR_VALUE=new Map,nt.L=new nt(Ri.L,"L",1),nt.M=new nt(Ri.M,"M",0),nt.Q=new nt(Ri.Q,"Q",3),nt.H=new nt(Ri.H,"H",2);class Zt{constructor(n){this.errorCorrectionLevel=nt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,i){return O.bitCount(n^i)}static decodeFormatInformation(n,i){const s=Zt.doDecodeFormatInformation(n,i);return s!==null?s:Zt.doDecodeFormatInformation(n^Zt.FORMAT_INFO_MASK_QR,i^Zt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,i){let s=Number.MAX_SAFE_INTEGER,a=0;for(const l of Zt.FORMAT_INFO_DECODE_LOOKUP){const c=l[0];if(c===n||c===i)return new Zt(l[1]);let f=Zt.numBitsDiffering(n,c);f<s&&(a=l[1],s=f),n!==i&&(f=Zt.numBitsDiffering(i,c),f<s&&(a=l[1],s=f))}return s<=3?new Zt(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Zt))return!1;const i=n;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}Zt.FORMAT_INFO_MASK_QR=21522,Zt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class z{constructor(n,...i){this.ecCodewordsPerBlock=n,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const i=this.ecBlocks;for(const s of i)n+=s.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(n,i){this.count=n,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class we{constructor(n,i,...s){this.versionNumber=n,this.alignmentPatternCenters=i,this.ecBlocks=s;let a=0;const l=s[0].getECCodewordsPerBlock(),c=s[0].getECBlocks();for(const f of c)a+=f.getCount()*(f.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new F;try{return this.getVersionForNumber((n-17)/4)}catch{throw new F}}static getVersionForNumber(n){if(n<1||n>40)throw new v;return we.VERSIONS[n-1]}static decodeVersionInformation(n){let i=Number.MAX_SAFE_INTEGER,s=0;for(let a=0;a<we.VERSION_DECODE_INFO.length;a++){const l=we.VERSION_DECODE_INFO[a];if(l===n)return we.getVersionForNumber(a+7);const c=Zt.numBitsDiffering(n,l);c<i&&(s=a+7,i=c)}return i<=3?we.getVersionForNumber(s):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),i=new me(n);i.setRegion(0,0,9,9),i.setRegion(n-8,0,8,9),i.setRegion(0,n-8,9,8);const s=this.alignmentPatternCenters.length;for(let a=0;a<s;a++){const l=this.alignmentPatternCenters[a]-2;for(let c=0;c<s;c++)a===0&&(c===0||c===s-1)||a===s-1&&c===0||i.setRegion(this.alignmentPatternCenters[c]-2,l,5,5)}return i.setRegion(6,9,1,n-17),i.setRegion(9,6,n-17,1),this.versionNumber>6&&(i.setRegion(n-11,0,3,6),i.setRegion(0,n-11,6,3)),i}toString(){return""+this.versionNumber}}we.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),we.VERSIONS=[new we(1,new Int32Array(0),new z(7,new I(1,19)),new z(10,new I(1,16)),new z(13,new I(1,13)),new z(17,new I(1,9))),new we(2,Int32Array.from([6,18]),new z(10,new I(1,34)),new z(16,new I(1,28)),new z(22,new I(1,22)),new z(28,new I(1,16))),new we(3,Int32Array.from([6,22]),new z(15,new I(1,55)),new z(26,new I(1,44)),new z(18,new I(2,17)),new z(22,new I(2,13))),new we(4,Int32Array.from([6,26]),new z(20,new I(1,80)),new z(18,new I(2,32)),new z(26,new I(2,24)),new z(16,new I(4,9))),new we(5,Int32Array.from([6,30]),new z(26,new I(1,108)),new z(24,new I(2,43)),new z(18,new I(2,15),new I(2,16)),new z(22,new I(2,11),new I(2,12))),new we(6,Int32Array.from([6,34]),new z(18,new I(2,68)),new z(16,new I(4,27)),new z(24,new I(4,19)),new z(28,new I(4,15))),new we(7,Int32Array.from([6,22,38]),new z(20,new I(2,78)),new z(18,new I(4,31)),new z(18,new I(2,14),new I(4,15)),new z(26,new I(4,13),new I(1,14))),new we(8,Int32Array.from([6,24,42]),new z(24,new I(2,97)),new z(22,new I(2,38),new I(2,39)),new z(22,new I(4,18),new I(2,19)),new z(26,new I(4,14),new I(2,15))),new we(9,Int32Array.from([6,26,46]),new z(30,new I(2,116)),new z(22,new I(3,36),new I(2,37)),new z(20,new I(4,16),new I(4,17)),new z(24,new I(4,12),new I(4,13))),new we(10,Int32Array.from([6,28,50]),new z(18,new I(2,68),new I(2,69)),new z(26,new I(4,43),new I(1,44)),new z(24,new I(6,19),new I(2,20)),new z(28,new I(6,15),new I(2,16))),new we(11,Int32Array.from([6,30,54]),new z(20,new I(4,81)),new z(30,new I(1,50),new I(4,51)),new z(28,new I(4,22),new I(4,23)),new z(24,new I(3,12),new I(8,13))),new we(12,Int32Array.from([6,32,58]),new z(24,new I(2,92),new I(2,93)),new z(22,new I(6,36),new I(2,37)),new z(26,new I(4,20),new I(6,21)),new z(28,new I(7,14),new I(4,15))),new we(13,Int32Array.from([6,34,62]),new z(26,new I(4,107)),new z(22,new I(8,37),new I(1,38)),new z(24,new I(8,20),new I(4,21)),new z(22,new I(12,11),new I(4,12))),new we(14,Int32Array.from([6,26,46,66]),new z(30,new I(3,115),new I(1,116)),new z(24,new I(4,40),new I(5,41)),new z(20,new I(11,16),new I(5,17)),new z(24,new I(11,12),new I(5,13))),new we(15,Int32Array.from([6,26,48,70]),new z(22,new I(5,87),new I(1,88)),new z(24,new I(5,41),new I(5,42)),new z(30,new I(5,24),new I(7,25)),new z(24,new I(11,12),new I(7,13))),new we(16,Int32Array.from([6,26,50,74]),new z(24,new I(5,98),new I(1,99)),new z(28,new I(7,45),new I(3,46)),new z(24,new I(15,19),new I(2,20)),new z(30,new I(3,15),new I(13,16))),new we(17,Int32Array.from([6,30,54,78]),new z(28,new I(1,107),new I(5,108)),new z(28,new I(10,46),new I(1,47)),new z(28,new I(1,22),new I(15,23)),new z(28,new I(2,14),new I(17,15))),new we(18,Int32Array.from([6,30,56,82]),new z(30,new I(5,120),new I(1,121)),new z(26,new I(9,43),new I(4,44)),new z(28,new I(17,22),new I(1,23)),new z(28,new I(2,14),new I(19,15))),new we(19,Int32Array.from([6,30,58,86]),new z(28,new I(3,113),new I(4,114)),new z(26,new I(3,44),new I(11,45)),new z(26,new I(17,21),new I(4,22)),new z(26,new I(9,13),new I(16,14))),new we(20,Int32Array.from([6,34,62,90]),new z(28,new I(3,107),new I(5,108)),new z(26,new I(3,41),new I(13,42)),new z(30,new I(15,24),new I(5,25)),new z(28,new I(15,15),new I(10,16))),new we(21,Int32Array.from([6,28,50,72,94]),new z(28,new I(4,116),new I(4,117)),new z(26,new I(17,42)),new z(28,new I(17,22),new I(6,23)),new z(30,new I(19,16),new I(6,17))),new we(22,Int32Array.from([6,26,50,74,98]),new z(28,new I(2,111),new I(7,112)),new z(28,new I(17,46)),new z(30,new I(7,24),new I(16,25)),new z(24,new I(34,13))),new we(23,Int32Array.from([6,30,54,78,102]),new z(30,new I(4,121),new I(5,122)),new z(28,new I(4,47),new I(14,48)),new z(30,new I(11,24),new I(14,25)),new z(30,new I(16,15),new I(14,16))),new we(24,Int32Array.from([6,28,54,80,106]),new z(30,new I(6,117),new I(4,118)),new z(28,new I(6,45),new I(14,46)),new z(30,new I(11,24),new I(16,25)),new z(30,new I(30,16),new I(2,17))),new we(25,Int32Array.from([6,32,58,84,110]),new z(26,new I(8,106),new I(4,107)),new z(28,new I(8,47),new I(13,48)),new z(30,new I(7,24),new I(22,25)),new z(30,new I(22,15),new I(13,16))),new we(26,Int32Array.from([6,30,58,86,114]),new z(28,new I(10,114),new I(2,115)),new z(28,new I(19,46),new I(4,47)),new z(28,new I(28,22),new I(6,23)),new z(30,new I(33,16),new I(4,17))),new we(27,Int32Array.from([6,34,62,90,118]),new z(30,new I(8,122),new I(4,123)),new z(28,new I(22,45),new I(3,46)),new z(30,new I(8,23),new I(26,24)),new z(30,new I(12,15),new I(28,16))),new we(28,Int32Array.from([6,26,50,74,98,122]),new z(30,new I(3,117),new I(10,118)),new z(28,new I(3,45),new I(23,46)),new z(30,new I(4,24),new I(31,25)),new z(30,new I(11,15),new I(31,16))),new we(29,Int32Array.from([6,30,54,78,102,126]),new z(30,new I(7,116),new I(7,117)),new z(28,new I(21,45),new I(7,46)),new z(30,new I(1,23),new I(37,24)),new z(30,new I(19,15),new I(26,16))),new we(30,Int32Array.from([6,26,52,78,104,130]),new z(30,new I(5,115),new I(10,116)),new z(28,new I(19,47),new I(10,48)),new z(30,new I(15,24),new I(25,25)),new z(30,new I(23,15),new I(25,16))),new we(31,Int32Array.from([6,30,56,82,108,134]),new z(30,new I(13,115),new I(3,116)),new z(28,new I(2,46),new I(29,47)),new z(30,new I(42,24),new I(1,25)),new z(30,new I(23,15),new I(28,16))),new we(32,Int32Array.from([6,34,60,86,112,138]),new z(30,new I(17,115)),new z(28,new I(10,46),new I(23,47)),new z(30,new I(10,24),new I(35,25)),new z(30,new I(19,15),new I(35,16))),new we(33,Int32Array.from([6,30,58,86,114,142]),new z(30,new I(17,115),new I(1,116)),new z(28,new I(14,46),new I(21,47)),new z(30,new I(29,24),new I(19,25)),new z(30,new I(11,15),new I(46,16))),new we(34,Int32Array.from([6,34,62,90,118,146]),new z(30,new I(13,115),new I(6,116)),new z(28,new I(14,46),new I(23,47)),new z(30,new I(44,24),new I(7,25)),new z(30,new I(59,16),new I(1,17))),new we(35,Int32Array.from([6,30,54,78,102,126,150]),new z(30,new I(12,121),new I(7,122)),new z(28,new I(12,47),new I(26,48)),new z(30,new I(39,24),new I(14,25)),new z(30,new I(22,15),new I(41,16))),new we(36,Int32Array.from([6,24,50,76,102,128,154]),new z(30,new I(6,121),new I(14,122)),new z(28,new I(6,47),new I(34,48)),new z(30,new I(46,24),new I(10,25)),new z(30,new I(2,15),new I(64,16))),new we(37,Int32Array.from([6,28,54,80,106,132,158]),new z(30,new I(17,122),new I(4,123)),new z(28,new I(29,46),new I(14,47)),new z(30,new I(49,24),new I(10,25)),new z(30,new I(24,15),new I(46,16))),new we(38,Int32Array.from([6,32,58,84,110,136,162]),new z(30,new I(4,122),new I(18,123)),new z(28,new I(13,46),new I(32,47)),new z(30,new I(48,24),new I(14,25)),new z(30,new I(42,15),new I(32,16))),new we(39,Int32Array.from([6,26,54,82,110,138,166]),new z(30,new I(20,117),new I(4,118)),new z(28,new I(40,47),new I(7,48)),new z(30,new I(43,24),new I(22,25)),new z(30,new I(10,15),new I(67,16))),new we(40,Int32Array.from([6,30,58,86,114,142,170]),new z(30,new I(19,118),new I(6,119)),new z(28,new I(18,47),new I(31,48)),new z(30,new I(34,24),new I(34,25)),new z(30,new I(20,15),new I(61,16)))];var Pt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Pt||(Pt={}));class Dn{constructor(n,i){this.value=n,this.isMasked=i}unmaskBitMatrix(n,i){for(let s=0;s<i;s++)for(let a=0;a<i;a++)this.isMasked(s,a)&&n.flip(a,s)}}Dn.values=new Map([[Pt.DATA_MASK_000,new Dn(Pt.DATA_MASK_000,(C,n)=>(C+n&1)===0)],[Pt.DATA_MASK_001,new Dn(Pt.DATA_MASK_001,(C,n)=>(C&1)===0)],[Pt.DATA_MASK_010,new Dn(Pt.DATA_MASK_010,(C,n)=>n%3===0)],[Pt.DATA_MASK_011,new Dn(Pt.DATA_MASK_011,(C,n)=>(C+n)%3===0)],[Pt.DATA_MASK_100,new Dn(Pt.DATA_MASK_100,(C,n)=>(Math.floor(C/2)+Math.floor(n/3)&1)===0)],[Pt.DATA_MASK_101,new Dn(Pt.DATA_MASK_101,(C,n)=>C*n%6===0)],[Pt.DATA_MASK_110,new Dn(Pt.DATA_MASK_110,(C,n)=>C*n%6<3)],[Pt.DATA_MASK_111,new Dn(Pt.DATA_MASK_111,(C,n)=>(C+n+C*n%3&1)===0)]]);class ag{constructor(n){const i=n.getHeight();if(i<21||(i&3)!==1)throw new F;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let l=0;l<6;l++)n=this.copyBit(l,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let l=5;l>=0;l--)n=this.copyBit(8,l,n);const i=this.bitMatrix.getHeight();let s=0;const a=i-7;for(let l=i-1;l>=a;l--)s=this.copyBit(8,l,s);for(let l=i-8;l<i;l++)s=this.copyBit(l,8,s);if(this.parsedFormatInfo=Zt.decodeFormatInformation(n,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),i=Math.floor((n-17)/4);if(i<=6)return we.getVersionForNumber(i);let s=0;const a=n-11;for(let c=5;c>=0;c--)for(let f=n-9;f>=a;f--)s=this.copyBit(f,c,s);let l=we.decodeVersionInformation(s);if(l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;s=0;for(let c=5;c>=0;c--)for(let f=n-9;f>=a;f--)s=this.copyBit(c,f,s);if(l=we.decodeVersionInformation(s),l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;throw new F}copyBit(n,i,s){return(this.isMirror?this.bitMatrix.get(i,n):this.bitMatrix.get(n,i))?s<<1|1:s<<1}readCodewords(){const n=this.readFormatInformation(),i=this.readVersion(),s=Dn.values.get(n.getDataMask()),a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a);const l=i.buildFunctionPattern();let c=!0;const f=new Uint8Array(i.getTotalCodewords());let g=0,x=0,E=0;for(let _=a-1;_>0;_-=2){_===6&&_--;for(let A=0;A<a;A++){const T=c?a-1-A:A;for(let M=0;M<2;M++)l.get(_-M,T)||(E++,x<<=1,this.bitMatrix.get(_-M,T)&&(x|=1),E===8&&(f[g++]=x,E=0,x=0))}c=!c}if(g!==i.getTotalCodewords())throw new F;return f}remask(){if(this.parsedFormatInfo===null)return;const n=Dn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let i=0,s=n.getWidth();i<s;i++)for(let a=i+1,l=n.getHeight();a<l;a++)n.get(i,a)!==n.get(a,i)&&(n.flip(a,i),n.flip(i,a))}}class _l{constructor(n,i){this.numDataCodewords=n,this.codewords=i}static getDataBlocks(n,i,s){if(n.length!==i.getTotalCodewords())throw new v;const a=i.getECBlocksForLevel(s);let l=0;const c=a.getECBlocks();for(const M of c)l+=M.getCount();const f=new Array(l);let g=0;for(const M of c)for(let P=0;P<M.getCount();P++){const j=M.getDataCodewords(),W=a.getECCodewordsPerBlock()+j;f[g++]=new _l(j,new Uint8Array(W))}const x=f[0].codewords.length;let E=f.length-1;for(;E>=0&&f[E].codewords.length!==x;)E--;E++;const _=x-a.getECCodewordsPerBlock();let A=0;for(let M=0;M<_;M++)for(let P=0;P<g;P++)f[P].codewords[M]=n[A++];for(let M=E;M<g;M++)f[M].codewords[_]=n[A++];const T=f[0].codewords.length;for(let M=_;M<T;M++)for(let P=0;P<g;P++){const j=P<E?M:M+1;f[P].codewords[j]=n[A++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mn;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(Mn||(Mn={}));class ye{constructor(n,i,s,a){this.value=n,this.stringValue=i,this.characterCountBitsForVersions=s,this.bits=a,ye.FOR_BITS.set(a,this),ye.FOR_VALUE.set(n,this)}static forBits(n){const i=ye.FOR_BITS.get(n);if(i===void 0)throw new v;return i}getCharacterCountBits(n){const i=n.getVersionNumber();let s;return i<=9?s=0:i<=26?s=1:s=2,this.characterCountBitsForVersions[s]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof ye))return!1;const i=n;return this.value===i.value}toString(){return this.stringValue}}ye.FOR_BITS=new Map,ye.FOR_VALUE=new Map,ye.TERMINATOR=new ye(Mn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ye.NUMERIC=new ye(Mn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ye.ALPHANUMERIC=new ye(Mn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ye.STRUCTURED_APPEND=new ye(Mn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ye.BYTE=new ye(Mn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ye.ECI=new ye(Mn.ECI,"ECI",Int32Array.from([0,0,0]),7),ye.KANJI=new ye(Mn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ye.FNC1_FIRST_POSITION=new ye(Mn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ye.FNC1_SECOND_POSITION=new ye(Mn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ye.HANZI=new ye(Mn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class mt{static decode(n,i,s,a){const l=new Cl(n);let c=new ae;const f=new Array;let g=-1,x=-1;try{let E=null,_=!1,A;do{if(l.available()<4)A=ye.TERMINATOR;else{const T=l.readBits(4);A=ye.forBits(T)}switch(A){case ye.TERMINATOR:break;case ye.FNC1_FIRST_POSITION:case ye.FNC1_SECOND_POSITION:_=!0;break;case ye.STRUCTURED_APPEND:if(l.available()<16)throw new F;g=l.readBits(8),x=l.readBits(8);break;case ye.ECI:const T=mt.parseECIValue(l);if(E=b.getCharacterSetECIByValue(T),E===null)throw new F;break;case ye.HANZI:const M=l.readBits(4),P=l.readBits(A.getCharacterCountBits(i));M===mt.GB2312_SUBSET&&mt.decodeHanziSegment(l,c,P);break;default:const j=l.readBits(A.getCharacterCountBits(i));switch(A){case ye.NUMERIC:mt.decodeNumericSegment(l,c,j);break;case ye.ALPHANUMERIC:mt.decodeAlphanumericSegment(l,c,j,_);break;case ye.BYTE:mt.decodeByteSegment(l,c,j,E,f,a);break;case ye.KANJI:mt.decodeKanjiSegment(l,c,j);break;default:throw new F}break}}while(A!==ye.TERMINATOR)}catch{throw new F}return new xe(n,c.toString(),f.length===0?null:f,s===null?null:s.toString(),g,x)}static decodeHanziSegment(n,i,s){if(s*13>n.available())throw new F;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const c=n.readBits(13);let f=c/96<<8&4294967295|c%96;f<959?f+=41377:f+=42657,a[l]=f>>8&255,a[l+1]=f&255,l+=2,s--}try{i.append(oe.decode(a,Y.GB2312))}catch(c){throw new F(c)}}static decodeKanjiSegment(n,i,s){if(s*13>n.available())throw new F;const a=new Uint8Array(2*s);let l=0;for(;s>0;){const c=n.readBits(13);let f=c/192<<8&4294967295|c%192;f<7936?f+=33088:f+=49472,a[l]=f>>8,a[l+1]=f,l+=2,s--}try{i.append(oe.decode(a,Y.SHIFT_JIS))}catch(c){throw new F(c)}}static decodeByteSegment(n,i,s,a,l,c){if(8*s>n.available())throw new F;const f=new Uint8Array(s);for(let x=0;x<s;x++)f[x]=n.readBits(8);let g;a===null?g=Y.guessEncoding(f,c):g=a.getName();try{i.append(oe.decode(f,g))}catch(x){throw new F(x)}l.push(f)}static toAlphaNumericChar(n){if(n>=mt.ALPHANUMERIC_CHARS.length)throw new F;return mt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,i,s,a){const l=i.length();for(;s>1;){if(n.available()<11)throw new F;const c=n.readBits(11);i.append(mt.toAlphaNumericChar(Math.floor(c/45))),i.append(mt.toAlphaNumericChar(c%45)),s-=2}if(s===1){if(n.available()<6)throw new F;i.append(mt.toAlphaNumericChar(n.readBits(6)))}if(a)for(let c=l;c<i.length();c++)i.charAt(c)==="%"&&(c<i.length()-1&&i.charAt(c+1)==="%"?i.deleteCharAt(c+1):i.setCharAt(c,""))}static decodeNumericSegment(n,i,s){for(;s>=3;){if(n.available()<10)throw new F;const a=n.readBits(10);if(a>=1e3)throw new F;i.append(mt.toAlphaNumericChar(Math.floor(a/100))),i.append(mt.toAlphaNumericChar(Math.floor(a/10)%10)),i.append(mt.toAlphaNumericChar(a%10)),s-=3}if(s===2){if(n.available()<7)throw new F;const a=n.readBits(7);if(a>=100)throw new F;i.append(mt.toAlphaNumericChar(Math.floor(a/10))),i.append(mt.toAlphaNumericChar(a%10))}else if(s===1){if(n.available()<4)throw new F;const a=n.readBits(4);if(a>=10)throw new F;i.append(mt.toAlphaNumericChar(a))}}static parseECIValue(n){const i=n.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const s=n.readBits(8);return(i&63)<<8&4294967295|s}if((i&224)===192){const s=n.readBits(16);return(i&31)<<16&4294967295|s}throw new F}}mt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",mt.GB2312_SUBSET=1;class mh{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const i=n[0];n[0]=n[2],n[2]=i}}class lg{constructor(){this.rsDecoder=new Ve(pe.QR_CODE_FIELD_256)}decodeBooleanArray(n,i){return this.decodeBitMatrix(me.parseFromBooleanArray(n),i)}decodeBitMatrix(n,i){const s=new ag(n);let a=null;try{return this.decodeBitMatrixParser(s,i)}catch(l){a=l}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();const l=this.decodeBitMatrixParser(s,i);return l.setOther(new mh(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(n,i){const s=n.readVersion(),a=n.readFormatInformation().getErrorCorrectionLevel(),l=n.readCodewords(),c=_l.getDataBlocks(l,s,a);let f=0;for(const E of c)f+=E.getNumDataCodewords();const g=new Uint8Array(f);let x=0;for(const E of c){const _=E.getCodewords(),A=E.getNumDataCodewords();this.correctErrors(_,A);for(let T=0;T<A;T++)g[x++]=_[T]}return mt.decode(g,s,a,i)}correctErrors(n,i){const s=new Int32Array(n);try{this.rsDecoder.decode(s,n.length-i)}catch{throw new k}for(let a=0;a<i;a++)n[a]=s[a]}}class Al extends ue{constructor(n,i,s){super(n,i),this.estimatedModuleSize=s}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=(this.getX()+i)/2,l=(this.getY()+n)/2,c=(this.estimatedModuleSize+s)/2;return new Al(a,l,c)}}class Ro{constructor(n,i,s,a,l,c,f){this.image=n,this.startX=i,this.startY=s,this.width=a,this.height=l,this.moduleSize=c,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,i=this.height,s=this.width,a=n+s,l=this.startY+i/2,c=new Int32Array(3),f=this.image;for(let g=0;g<i;g++){const x=l+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));c[0]=0,c[1]=0,c[2]=0;let E=n;for(;E<a&&!f.get(E,x);)E++;let _=0;for(;E<a;){if(f.get(E,x))if(_===1)c[1]++;else if(_===2){if(this.foundPatternCross(c)){const A=this.handlePossibleCenter(c,x,E);if(A!==null)return A}c[0]=c[2],c[1]=1,c[2]=0,_=1}else c[++_]++;else _===1&&_++,c[_]++;E++}if(this.foundPatternCross(c)){const A=this.handlePossibleCenter(c,x,a);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(n,i){return i-n[2]-n[1]/2}foundPatternCross(n){const i=this.moduleSize,s=i/2;for(let a=0;a<3;a++)if(Math.abs(i-n[a])>=s)return!1;return!0}crossCheckVertical(n,i,s,a){const l=this.image,c=l.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let g=n;for(;g>=0&&l.get(i,g)&&f[1]<=s;)f[1]++,g--;if(g<0||f[1]>s)return NaN;for(;g>=0&&!l.get(i,g)&&f[0]<=s;)f[0]++,g--;if(f[0]>s)return NaN;for(g=n+1;g<c&&l.get(i,g)&&f[1]<=s;)f[1]++,g++;if(g===c||f[1]>s)return NaN;for(;g<c&&!l.get(i,g)&&f[2]<=s;)f[2]++,g++;if(f[2]>s)return NaN;const x=f[0]+f[1]+f[2];return 5*Math.abs(x-a)>=2*a?NaN:this.foundPatternCross(f)?Ro.centerFromEnd(f,g):NaN}handlePossibleCenter(n,i,s){const a=n[0]+n[1]+n[2],l=Ro.centerFromEnd(n,s),c=this.crossCheckVertical(i,l,2*n[1],a);if(!isNaN(c)){const f=(n[0]+n[1]+n[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(f,c,l))return x.combineEstimate(c,l,f);const g=new Al(l,c,f);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Sl extends ue{constructor(n,i,s,a){super(n,i),this.estimatedModuleSize=s,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,i,s){if(Math.abs(i-this.getY())<=n&&Math.abs(s-this.getX())<=n){const a=Math.abs(n-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(n,i,s){const a=this.count+1,l=(this.count*this.getX()+i)/a,c=(this.count*this.getY()+n)/a,f=(this.count*this.estimatedModuleSize+s)/a;return new Sl(l,c,f,a)}}class ug{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Lt{constructor(n,i){this.image=n,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const i=n!=null&&n.get(q.TRY_HARDER)!==void 0,s=n!=null&&n.get(q.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),c=a.getWidth();let f=Math.floor(3*l/(4*Lt.MAX_MODULES));(f<Lt.MIN_SKIP||i)&&(f=Lt.MIN_SKIP);let g=!1;const x=new Int32Array(5);for(let _=f-1;_<l&&!g;_+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let A=0;for(let T=0;T<c;T++)if(a.get(T,_))(A&1)===1&&A++,x[A]++;else if(A&1)x[A]++;else if(A===4)if(Lt.foundPatternCross(x)){if(this.handlePossibleCenter(x,_,T,s)===!0)if(f=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const P=this.findRowSkip();P>x[2]&&(_+=P-x[2]-f,T=c-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;continue}A=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,A=3;else x[++A]++;Lt.foundPatternCross(x)&&this.handlePossibleCenter(x,_,c,s)===!0&&(f=x[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return ue.orderBestPatterns(E),new ug(E)}static centerFromEnd(n,i){return i-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let i=0;for(let l=0;l<5;l++){const c=n[l];if(c===0)return!1;i+=c}if(i<7)return!1;const s=i/7,a=s/2;return Math.abs(s-n[0])<a&&Math.abs(s-n[1])<a&&Math.abs(3*s-n[2])<3*a&&Math.abs(s-n[3])<a&&Math.abs(s-n[4])<a}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,i,s,a){const l=this.getCrossCheckStateCount();let c=0;const f=this.image;for(;n>=c&&i>=c&&f.get(i-c,n-c);)l[2]++,c++;if(n<c||i<c)return!1;for(;n>=c&&i>=c&&!f.get(i-c,n-c)&&l[1]<=s;)l[1]++,c++;if(n<c||i<c||l[1]>s)return!1;for(;n>=c&&i>=c&&f.get(i-c,n-c)&&l[0]<=s;)l[0]++,c++;if(l[0]>s)return!1;const g=f.getHeight(),x=f.getWidth();for(c=1;n+c<g&&i+c<x&&f.get(i+c,n+c);)l[2]++,c++;if(n+c>=g||i+c>=x)return!1;for(;n+c<g&&i+c<x&&!f.get(i+c,n+c)&&l[3]<s;)l[3]++,c++;if(n+c>=g||i+c>=x||l[3]>=s)return!1;for(;n+c<g&&i+c<x&&f.get(i+c,n+c)&&l[4]<s;)l[4]++,c++;if(l[4]>=s)return!1;const E=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(E-a)<2*a&&Lt.foundPatternCross(l)}crossCheckVertical(n,i,s,a){const l=this.image,c=l.getHeight(),f=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(i,g);)f[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(i,g)&&f[1]<=s;)f[1]++,g--;if(g<0||f[1]>s)return NaN;for(;g>=0&&l.get(i,g)&&f[0]<=s;)f[0]++,g--;if(f[0]>s)return NaN;for(g=n+1;g<c&&l.get(i,g);)f[2]++,g++;if(g===c)return NaN;for(;g<c&&!l.get(i,g)&&f[3]<s;)f[3]++,g++;if(g===c||f[3]>=s)return NaN;for(;g<c&&l.get(i,g)&&f[4]<s;)f[4]++,g++;if(f[4]>=s)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-a)>=2*a?NaN:Lt.foundPatternCross(f)?Lt.centerFromEnd(f,g):NaN}crossCheckHorizontal(n,i,s,a){const l=this.image,c=l.getWidth(),f=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(g,i);)f[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(g,i)&&f[1]<=s;)f[1]++,g--;if(g<0||f[1]>s)return NaN;for(;g>=0&&l.get(g,i)&&f[0]<=s;)f[0]++,g--;if(f[0]>s)return NaN;for(g=n+1;g<c&&l.get(g,i);)f[2]++,g++;if(g===c)return NaN;for(;g<c&&!l.get(g,i)&&f[3]<s;)f[3]++,g++;if(g===c||f[3]>=s)return NaN;for(;g<c&&l.get(g,i)&&f[4]<s;)f[4]++,g++;if(f[4]>=s)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-a)>=a?NaN:Lt.foundPatternCross(f)?Lt.centerFromEnd(f,g):NaN}handlePossibleCenter(n,i,s,a){const l=n[0]+n[1]+n[2]+n[3]+n[4];let c=Lt.centerFromEnd(n,s),f=this.crossCheckVertical(i,Math.floor(c),n[2],l);if(!isNaN(f)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(f),n[2],l),!isNaN(c)&&(!a||this.crossCheckDiagonal(Math.floor(f),Math.floor(c),n[2],l)))){const g=l/7;let x=!1;const E=this.possibleCenters;for(let _=0,A=E.length;_<A;_++){const T=E[_];if(T.aboutEquals(g,f,c)){E[_]=T.combineEstimate(f,c,g),x=!0;break}}if(!x){const _=new Sl(c,f,g);E.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const s of this.possibleCenters)if(s.getCount()>=Lt.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,i=0;const s=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Lt.CENTER_QUORUM&&(n++,i+=c.getEstimatedModuleSize());if(n<3)return!1;const a=i/s;let l=0;for(const c of this.possibleCenters)l+=Math.abs(c.getEstimatedModuleSize()-a);return l<=.05*i}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new V;const i=this.possibleCenters;let s;if(n>3){let a=0,l=0;for(const g of this.possibleCenters){const x=g.getEstimatedModuleSize();a+=x,l+=x*x}s=a/n;let c=Math.sqrt(l/n-s*s);i.sort((g,x)=>{const E=Math.abs(x.getEstimatedModuleSize()-s),_=Math.abs(g.getEstimatedModuleSize()-s);return E<_?-1:E>_?1:0});const f=Math.max(.2*s,c);for(let g=0;g<i.length&&i.length>3;g++){const x=i[g];Math.abs(x.getEstimatedModuleSize()-s)>f&&(i.splice(g,1),g--)}}if(i.length>3){let a=0;for(const l of i)a+=l.getEstimatedModuleSize();s=a/i.length,i.sort((l,c)=>{if(c.getCount()===l.getCount()){const f=Math.abs(c.getEstimatedModuleSize()-s),g=Math.abs(l.getEstimatedModuleSize()-s);return f<g?1:f>g?-1:0}else return c.getCount()-l.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Lt.CENTER_QUORUM=2,Lt.MIN_SKIP=3,Lt.MAX_MODULES=57;class vs{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(q.NEED_RESULT_POINT_CALLBACK);const s=new Lt(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(s)}processFinderPatternInfo(n){const i=n.getTopLeft(),s=n.getTopRight(),a=n.getBottomLeft(),l=this.calculateModuleSize(i,s,a);if(l<1)throw new V("No pattern found in proccess finder.");const c=vs.computeDimension(i,s,a,l),f=we.getProvisionalVersionForDimension(c),g=f.getDimensionForVersion()-7;let x=null;if(f.getAlignmentPatternCenters().length>0){const T=s.getX()-i.getX()+a.getX(),M=s.getY()-i.getY()+a.getY(),P=1-3/g,j=Math.floor(i.getX()+P*(T-i.getX())),W=Math.floor(i.getY()+P*(M-i.getY()));for(let ie=4;ie<=16;ie<<=1)try{x=this.findAlignmentInRegion(l,j,W,ie);break}catch(se){if(!(se instanceof V))throw se}}const E=vs.createTransform(i,s,a,x,c),_=vs.sampleGrid(this.image,E,c);let A;return x===null?A=[a,i,s]:A=[a,i,s,x],new Qe(_,A)}static createTransform(n,i,s,a,l){const c=l-3.5;let f,g,x,E;return a!==null?(f=a.getX(),g=a.getY(),x=c-3,E=x):(f=i.getX()-n.getX()+s.getX(),g=i.getY()-n.getY()+s.getY(),x=c,E=c),Mt.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,x,E,3.5,c,n.getX(),n.getY(),i.getX(),i.getY(),f,g,s.getX(),s.getY())}static sampleGrid(n,i,s){return $t.getInstance().sampleGridWithTransform(n,s,s,i)}static computeDimension(n,i,s,a){const l=_e.round(ue.distance(n,i)/a),c=_e.round(ue.distance(n,s)/a);let f=Math.floor((l+c)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new V("Dimensions could be not found.")}return f}calculateModuleSize(n,i,s){return(this.calculateModuleSizeOneWay(n,i)+this.calculateModuleSizeOneWay(n,s))/2}calculateModuleSizeOneWay(n,i){const s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(i.getX()),Math.floor(i.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(s)?a/7:isNaN(a)?s/7:(s+a)/14}sizeOfBlackWhiteBlackRunBothWays(n,i,s,a){let l=this.sizeOfBlackWhiteBlackRun(n,i,s,a),c=1,f=n-(s-n);f<0?(c=n/(n-f),f=0):f>=this.image.getWidth()&&(c=(this.image.getWidth()-1-n)/(f-n),f=this.image.getWidth()-1);let g=Math.floor(i-(a-i)*c);return c=1,g<0?(c=i/(i-g),g=0):g>=this.image.getHeight()&&(c=(this.image.getHeight()-1-i)/(g-i),g=this.image.getHeight()-1),f=Math.floor(n+(f-n)*c),l+=this.sizeOfBlackWhiteBlackRun(n,i,f,g),l-1}sizeOfBlackWhiteBlackRun(n,i,s,a){const l=Math.abs(a-i)>Math.abs(s-n);if(l){let T=n;n=i,i=T,T=s,s=a,a=T}const c=Math.abs(s-n),f=Math.abs(a-i);let g=-c/2;const x=n<s?1:-1,E=i<a?1:-1;let _=0;const A=s+x;for(let T=n,M=i;T!==A;T+=x){const P=l?M:T,j=l?T:M;if(_===1===this.image.get(P,j)){if(_===2)return _e.distance(T,M,n,i);_++}if(g+=f,g>0){if(M===a)break;M+=E,g-=c}}return _===2?_e.distance(s+x,a,n,i):NaN}findAlignmentInRegion(n,i,s,a){const l=Math.floor(a*n),c=Math.max(0,i-l),f=Math.min(this.image.getWidth()-1,i+l);if(f-c<n*3)throw new V("Alignment top exceeds estimated module size.");const g=Math.max(0,s-l),x=Math.min(this.image.getHeight()-1,s+l);if(x-g<n*3)throw new V("Alignment bottom exceeds estimated module size.");return new Ro(this.image,c,g,f-c,x-g,n,this.resultPointCallback).find()}}class Tr{constructor(){this.decoder=new lg}getDecoder(){return this.decoder}decode(n,i){let s,a;if(i!=null&&i.get(q.PURE_BARCODE)!==void 0){const g=Tr.extractPureBits(n.getBlackMatrix());s=this.decoder.decodeBitMatrix(g,i),a=Tr.NO_POINTS}else{const g=new vs(n.getBlackMatrix()).detect(i);s=this.decoder.decodeBitMatrix(g.getBits(),i),a=g.getPoints()}s.getOther()instanceof mh&&s.getOther().applyMirroredCorrection(a);const l=new Ie(s.getText(),s.getRawBytes(),void 0,a,le.QR_CODE,void 0),c=s.getByteSegments();c!==null&&l.putMetadata(De.BYTE_SEGMENTS,c);const f=s.getECLevel();return f!==null&&l.putMetadata(De.ERROR_CORRECTION_LEVEL,f),s.hasStructuredAppend()&&(l.putMetadata(De.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),l.putMetadata(De.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),l}reset(){}static extractPureBits(n){const i=n.getTopLeftOnBit(),s=n.getBottomRightOnBit();if(i===null||s===null)throw new V;const a=this.moduleSize(i,n);let l=i[1],c=s[1],f=i[0],g=s[0];if(f>=g||l>=c)throw new V;if(c-l!==g-f&&(g=f+(c-l),g>=n.getWidth()))throw new V;const x=Math.round((g-f+1)/a),E=Math.round((c-l+1)/a);if(x<=0||E<=0)throw new V;if(E!==x)throw new V;const _=Math.floor(a/2);l+=_,f+=_;const A=f+Math.floor((x-1)*a)-g;if(A>0){if(A>_)throw new V;f-=A}const T=l+Math.floor((E-1)*a)-c;if(T>0){if(T>_)throw new V;l-=T}const M=new me(x,E);for(let P=0;P<E;P++){const j=l+Math.floor(P*a);for(let W=0;W<x;W++)n.get(f+Math.floor(W*a),j)&&M.set(W,P)}return M}static moduleSize(n,i){const s=i.getHeight(),a=i.getWidth();let l=n[0],c=n[1],f=!0,g=0;for(;l<a&&c<s;){if(f!==i.get(l,c)){if(++g===5)break;f=!f}l++,c++}if(l===a||c===s)throw new V;return(l-n[0])/7}}Tr.NO_POINTS=new Array;class ve{PDF417Common(){}static getBitCountSum(n){return _e.sum(n)}static toIntArray(n){if(n==null||!n.length)return ve.EMPTY_INT_ARRAY;const i=new Int32Array(n.length);let s=0;for(const a of n)i[s++]=a;return i}static getCodeword(n){const i=N.binarySearch(ve.SYMBOL_TABLE,n&262143);return i<0?-1:(ve.CODEWORD_TABLE[i]-1)%ve.NUMBER_OF_CODEWORDS}}ve.NUMBER_OF_CODEWORDS=929,ve.MAX_CODEWORDS_IN_BARCODE=ve.NUMBER_OF_CODEWORDS-1,ve.MIN_ROWS_IN_BARCODE=3,ve.MAX_ROWS_IN_BARCODE=90,ve.MODULES_IN_CODEWORD=17,ve.MODULES_IN_STOP_PATTERN=18,ve.BARS_IN_MODULE=8,ve.EMPTY_INT_ARRAY=new Int32Array([]),ve.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ve.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class cg{constructor(n,i){this.bits=n,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Te{static detectMultiple(n,i,s){let a=n.getBlackMatrix(),l=Te.detect(s,a);return l.length||(a=a.clone(),a.rotate180(),l=Te.detect(s,a)),new cg(a,l)}static detect(n,i){const s=new Array;let a=0,l=0,c=!1;for(;a<i.getHeight();){const f=Te.findVertices(i,a,l);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,l=0;for(const g of s)g[1]!=null&&(a=Math.trunc(Math.max(a,g[1].getY()))),g[3]!=null&&(a=Math.max(a,Math.trunc(g[3].getY())));a+=Te.ROW_STEP;continue}if(c=!0,s.push(f),!n)break;f[2]!=null?(l=Math.trunc(f[2].getX()),a=Math.trunc(f[2].getY())):(l=Math.trunc(f[4].getX()),a=Math.trunc(f[4].getY()))}return s}static findVertices(n,i,s){const a=n.getHeight(),l=n.getWidth(),c=new Array(8);return Te.copyToResult(c,Te.findRowsWithPattern(n,a,l,i,s,Te.START_PATTERN),Te.INDEXES_START_PATTERN),c[4]!=null&&(s=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY())),Te.copyToResult(c,Te.findRowsWithPattern(n,a,l,i,s,Te.STOP_PATTERN),Te.INDEXES_STOP_PATTERN),c}static copyToResult(n,i,s){for(let a=0;a<s.length;a++)n[s[a]]=i[a]}static findRowsWithPattern(n,i,s,a,l,c){const f=new Array(4);let g=!1;const x=new Int32Array(c.length);for(;a<i;a+=Te.ROW_STEP){let _=Te.findGuardPattern(n,l,a,s,!1,c,x);if(_!=null){for(;a>0;){const A=Te.findGuardPattern(n,l,--a,s,!1,c,x);if(A!=null)_=A;else{a++;break}}f[0]=new ue(_[0],a),f[1]=new ue(_[1],a),g=!0;break}}let E=a+1;if(g){let _=0,A=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;E<i;E++){const T=Te.findGuardPattern(n,A[0],E,s,!1,c,x);if(T!=null&&Math.abs(A[0]-T[0])<Te.MAX_PATTERN_DRIFT&&Math.abs(A[1]-T[1])<Te.MAX_PATTERN_DRIFT)A=T,_=0;else{if(_>Te.SKIPPED_ROW_COUNT_MAX)break;_++}}E-=_+1,f[2]=new ue(A[0],E),f[3]=new ue(A[1],E)}return E-a<Te.BARCODE_MIN_HEIGHT&&N.fill(f,null),f}static findGuardPattern(n,i,s,a,l,c,f){N.fillWithin(f,0,f.length,0);let g=i,x=0;for(;n.get(g,s)&&g>0&&x++<Te.MAX_PIXEL_DRIFT;)g--;let E=g,_=0,A=c.length;for(let T=l;E<a;E++)if(n.get(E,s)!==T)f[_]++;else{if(_===A-1){if(Te.patternMatchVariance(f,c,Te.MAX_INDIVIDUAL_VARIANCE)<Te.MAX_AVG_VARIANCE)return new Int32Array([g,E]);g+=f[0]+f[1],L.arraycopy(f,2,f,0,_-1),f[_-1]=0,f[_]=0,_--}else _++;f[_]=1,T=!T}return _===A-1&&Te.patternMatchVariance(f,c,Te.MAX_INDIVIDUAL_VARIANCE)<Te.MAX_AVG_VARIANCE?new Int32Array([g,E-1]):null}static patternMatchVariance(n,i,s){let a=n.length,l=0,c=0;for(let x=0;x<a;x++)l+=n[x],c+=i[x];if(l<c)return 1/0;let f=l/c;s*=f;let g=0;for(let x=0;x<a;x++){let E=n[x],_=i[x]*f,A=E>_?E-_:_-E;if(A>s)return 1/0;g+=A}return g/l}}Te.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Te.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Te.MAX_AVG_VARIANCE=.42,Te.MAX_INDIVIDUAL_VARIANCE=.8,Te.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Te.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Te.MAX_PIXEL_DRIFT=3,Te.MAX_PATTERN_DRIFT=5,Te.SKIPPED_ROW_COUNT_MAX=25,Te.ROW_STEP=5,Te.BARCODE_MIN_HEIGHT=10;class Vt{constructor(n,i){if(i.length===0)throw new v;this.field=n;let s=i.length;if(s>1&&i[0]===0){let a=1;for(;a<s&&i[a]===0;)a++;a===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-a),L.arraycopy(i,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let i=this.coefficients[0],s=this.coefficients.length;for(let a=1;a<s;a++)i=this.field.add(this.field.multiply(n,i),this.coefficients[a]);return i}add(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let i=this.coefficients,s=n.coefficients;if(i.length>s.length){let c=i;i=s,s=c}let a=new Int32Array(s.length),l=s.length-i.length;L.arraycopy(s,0,a,0,l);for(let c=l;c<s.length;c++)a[c]=this.field.add(i[c-l],s[c]);return new Vt(this.field,a)}subtract(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Vt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Vt(this.field,new Int32Array([0]));let i=this.coefficients,s=i.length,a=n.coefficients,l=a.length,c=new Int32Array(s+l-1);for(let f=0;f<s;f++){let g=i[f];for(let x=0;x<l;x++)c[f+x]=this.field.add(c[f+x],this.field.multiply(g,a[x]))}return new Vt(this.field,c)}negative(){let n=this.coefficients.length,i=new Int32Array(n);for(let s=0;s<n;s++)i[s]=this.field.subtract(0,this.coefficients[s]);return new Vt(this.field,i)}multiplyScalar(n){if(n===0)return new Vt(this.field,new Int32Array([0]));if(n===1)return this;let i=this.coefficients.length,s=new Int32Array(i);for(let a=0;a<i;a++)s[a]=this.field.multiply(this.coefficients[a],n);return new Vt(this.field,s)}multiplyByMonomial(n,i){if(n<0)throw new v;if(i===0)return new Vt(this.field,new Int32Array([0]));let s=this.coefficients.length,a=new Int32Array(s+n);for(let l=0;l<s;l++)a[l]=this.field.multiply(this.coefficients[l],i);return new Vt(this.field,a)}toString(){let n=new ae;for(let i=this.getDegree();i>=0;i--){let s=this.getCoefficient(i);s!==0&&(s<0?(n.append(" - "),s=-s):n.length()>0&&n.append(" + "),(i===0||s!==1)&&n.append(s),i!==0&&(i===1?n.append("x"):(n.append("x^"),n.append(i))))}return n.toString()}}class hg{add(n,i){return(n+i)%this.modulus}subtract(n,i){return(this.modulus+n-i)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new v;return this.logTable[n]}inverse(n){if(n===0)throw new ct;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,i){return n===0||i===0?0:this.expTable[(this.logTable[n]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Il extends hg{constructor(n,i){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let s=1;for(let a=0;a<n;a++)this.expTable[a]=s,s=s*i%n;for(let a=0;a<n-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,i){if(n<0)throw new v;if(i===0)return this.zero;let s=new Int32Array(n+1);return s[0]=i,new Vt(this,s)}}Il.PDF417_GF=new Il(ve.NUMBER_OF_CODEWORDS,3);class xh{constructor(){this.field=Il.PDF417_GF}decode(n,i,s){let a=new Vt(this.field,n),l=new Int32Array(i),c=!1;for(let M=i;M>0;M--){let P=a.evaluateAt(this.field.exp(M));l[i-M]=P,P!==0&&(c=!0)}if(!c)return 0;let f=this.field.getOne();if(s!=null)for(const M of s){let P=this.field.exp(n.length-1-M),j=new Vt(this.field,new Int32Array([this.field.subtract(0,P),1]));f=f.multiply(j)}let g=new Vt(this.field,l),x=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),g,i),E=x[0],_=x[1],A=this.findErrorLocations(E),T=this.findErrorMagnitudes(_,E,A);for(let M=0;M<A.length;M++){let P=n.length-1-this.field.log(A[M]);if(P<0)throw k.getChecksumInstance();n[P]=this.field.subtract(n[P],T[M])}return A.length}runEuclideanAlgorithm(n,i,s){if(n.getDegree()<i.getDegree()){let A=n;n=i,i=A}let a=n,l=i,c=this.field.getZero(),f=this.field.getOne();for(;l.getDegree()>=Math.round(s/2);){let A=a,T=c;if(a=l,c=f,a.isZero())throw k.getChecksumInstance();l=A;let M=this.field.getZero(),P=a.getCoefficient(a.getDegree()),j=this.field.inverse(P);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let W=l.getDegree()-a.getDegree(),ie=this.field.multiply(l.getCoefficient(l.getDegree()),j);M=M.add(this.field.buildMonomial(W,ie)),l=l.subtract(a.multiplyByMonomial(W,ie))}f=M.multiply(c).subtract(T).negative()}let g=f.getCoefficient(0);if(g===0)throw k.getChecksumInstance();let x=this.field.inverse(g),E=f.multiply(x),_=l.multiply(x);return[E,_]}findErrorLocations(n){let i=n.getDegree(),s=new Int32Array(i),a=0;for(let l=1;l<this.field.getSize()&&a<i;l++)n.evaluateAt(l)===0&&(s[a]=this.field.inverse(l),a++);if(a!==i)throw k.getChecksumInstance();return s}findErrorMagnitudes(n,i,s){let a=i.getDegree(),l=new Int32Array(a);for(let x=1;x<=a;x++)l[a-x]=this.field.multiply(x,i.getCoefficient(x));let c=new Vt(this.field,l),f=s.length,g=new Int32Array(f);for(let x=0;x<f;x++){let E=this.field.inverse(s[x]),_=this.field.subtract(0,n.evaluateAt(E)),A=this.field.inverse(c.evaluateAt(E));g[x]=this.field.multiply(_,A)}return g}}class ri{constructor(n,i,s,a,l){n instanceof ri?this.constructor_2(n):this.constructor_1(n,i,s,a,l)}constructor_1(n,i,s,a,l){const c=i==null||s==null,f=a==null||l==null;if(c&&f)throw new V;c?(i=new ue(0,a.getY()),s=new ue(0,l.getY())):f&&(a=new ue(n.getWidth()-1,i.getY()),l=new ue(n.getWidth()-1,s.getY())),this.image=n,this.topLeft=i,this.bottomLeft=s,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(i.getX(),s.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(i.getY(),a.getY())),this.maxY=Math.trunc(Math.max(s.getY(),l.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,i){return n==null?i:i==null?n:new ri(n.image,n.topLeft,n.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(n,i,s){let a=this.topLeft,l=this.bottomLeft,c=this.topRight,f=this.bottomRight;if(n>0){let g=s?this.topLeft:this.topRight,x=Math.trunc(g.getY()-n);x<0&&(x=0);let E=new ue(g.getX(),x);s?a=E:c=E}if(i>0){let g=s?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+i);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let E=new ue(g.getX(),x);s?l=E:f=E}return new ri(this.image,a,l,c,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fg{constructor(n,i,s,a){this.columnCount=n,this.errorCorrectionLevel=a,this.rowCountUpperPart=i,this.rowCountLowerPart=s,this.rowCount=i+s}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Cs{constructor(){this.buffer=""}static form(n,i){let s=-1;function a(c,f,g,x,E,_){if(c==="%%")return"%";if(i[++s]===void 0)return;c=x?parseInt(x.substr(1)):void 0;let A=E?parseInt(E.substr(1)):void 0,T;switch(_){case"s":T=i[s];break;case"c":T=i[s][0];break;case"f":T=parseFloat(i[s]).toFixed(c);break;case"p":T=parseFloat(i[s]).toPrecision(c);break;case"e":T=parseFloat(i[s]).toExponential(c);break;case"x":T=parseInt(i[s]).toString(A||16);break;case"d":T=parseFloat(parseInt(i[s],A||10).toPrecision(c)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(A);let M=parseInt(g),P=g&&g[0]+""=="0"?"0":" ";for(;T.length<M;)T=f!==void 0?T+P:P+T;return T}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,a)}format(n,...i){this.buffer+=Cs.form(n,i)}toString(){return this.buffer}}class _s{constructor(n){this.boundingBox=new ri(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let i=this.getCodeword(n);if(i!=null)return i;for(let s=1;s<_s.MAX_NEARBY_DISTANCE;s++){let a=this.imageRowToCodewordIndex(n)-s;if(a>=0&&(i=this.codewords[a],i!=null)||(a=this.imageRowToCodewordIndex(n)+s,a<this.codewords.length&&(i=this.codewords[a],i!=null)))return i}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,i){this.codewords[this.imageRowToCodewordIndex(n)]=i}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Cs;let i=0;for(const s of this.codewords){if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}return n.toString()}}_s.MAX_NEARBY_DISTANCE=5;class As{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let i=this.values.get(n);i==null&&(i=0),i++,this.values.set(n,i)}getValue(){let n=-1,i=new Array;for(const[s,a]of this.values.entries()){const l={getKey:()=>s,getValue:()=>a};l.getValue()>n?(n=l.getValue(),i=[],i.push(l.getKey())):l.getValue()===n&&i.push(l.getKey())}return ve.toIntArray(i)}getConfidence(n){return this.values.get(n)}}class wh extends _s{constructor(n,i){super(n),this._isLeft=i}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,n);let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=-1,x=1,E=0;for(let _=c;_<f;_++){if(i[_]==null)continue;let A=i[_],T=A.getRowNumber()-g;if(T===0)E++;else if(T===1)x=Math.max(x,E),E=1,g=A.getRowNumber();else if(T<0||A.getRowNumber()>=n.getRowCount()||T>_)i[_]=null;else{let M;x>2?M=(x-2)*T:M=T;let P=M>=_;for(let j=1;j<=M&&!P;j++)P=i[_-j]!=null;P?i[_]=null:(g=A.getRowNumber(),E=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let i=new Int32Array(n.getRowCount());for(let s of this.getCodewords())if(s!=null){let a=s.getRowNumber();if(a>=i.length)continue;i[a]++}return i}adjustIncompleteIndicatorColumnRowNumbers(n){let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),g=-1;for(let x=l;x<c;x++){if(f[x]==null)continue;let E=f[x];E.setRowNumberAsRowIndicatorColumn();let _=E.getRowNumber()-g;_===0||(_===1?g=E.getRowNumber():E.getRowNumber()>=n.getRowCount()?f[x]=null:g=E.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),i=new As,s=new As,a=new As,l=new As;for(let f of n){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let g=f.getValue()%30,x=f.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:s.setValue(g*3+1);break;case 1:l.setValue(g/3),a.setValue(g%3);break;case 2:i.setValue(g+1);break}}if(i.getValue().length===0||s.getValue().length===0||a.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<ve.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>ve.MAX_ROWS_IN_BARCODE)return null;let c=new fg(i.getValue()[0],s.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(n,c),c}removeIncorrectCodewords(n,i){for(let s=0;s<n.length;s++){let a=n[s];if(n[s]==null)continue;let l=a.getValue()%30,c=a.getRowNumber();if(c>i.getRowCount()){n[s]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==i.getRowCountUpperPart()&&(n[s]=null);break;case 1:(Math.trunc(l/3)!==i.getErrorCorrectionLevel()||l%3!==i.getRowCountLowerPart())&&(n[s]=null);break;case 2:l+1!==i.getColumnCount()&&(n[s]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ss{constructor(n,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=ve.MAX_CODEWORDS_IN_BARCODE,i;do i=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let s=this.detectionResultColumns[i].getCodewords();for(let a=0;a<s.length;a++)s[a]!=null&&(s[a].hasValidRowNumber()||this.adjustRowNumbers(i,a,s))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<n.length;s++)if(n[s]!=null&&i[s]!=null&&n[s].getRowNumber()===i[s].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[s];l!=null&&(l.setRowNumber(n[s].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[s]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let c=this.barcodeColumnCount+1;c>0&&l<this.ADJUST_ROW_NUMBER_SKIP;c--){let f=this.detectionResultColumns[c].getCodewords()[s];f!=null&&(l=Ss.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,i=this.detectionResultColumns[0].getCodewords();for(let s=0;s<i.length;s++){if(i[s]==null)continue;let a=i[s].getRowNumber(),l=0;for(let c=1;c<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;c++){let f=this.detectionResultColumns[c].getCodewords()[s];f!=null&&(l=Ss.adjustRowNumberIfValid(a,l,f),f.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,i,s){return s==null||s.hasValidRowNumber()||(s.isValidRowNumber(n)?(s.setRowNumber(n),i=0):++i),i}adjustRowNumbers(n,i,s){if(!this.detectionResultColumns[n-1])return;let a=s[i],l=this.detectionResultColumns[n-1].getCodewords(),c=l;this.detectionResultColumns[n+1]!=null&&(c=this.detectionResultColumns[n+1].getCodewords());let f=new Array(14);f[2]=l[i],f[3]=c[i],i>0&&(f[0]=s[i-1],f[4]=l[i-1],f[5]=c[i-1]),i>1&&(f[8]=s[i-2],f[10]=l[i-2],f[11]=c[i-2]),i<s.length-1&&(f[1]=s[i+1],f[6]=l[i+1],f[7]=c[i+1]),i<s.length-2&&(f[9]=s[i+2],f[12]=l[i+2],f[13]=c[i+2]);for(let g of f)if(Ss.adjustRowNumber(a,g))return}static adjustRowNumber(n,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===n.getBucket()?(n.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,i){this.detectionResultColumns[n]=i}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Cs;for(let s=0;s<n.getCodewords().length;s++){i.format("CW %3d:",s);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){i.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[s];if(l==null){i.format("    |   ");continue}i.format(" %3d|%3d",l.getRowNumber(),l.getValue())}i.format("%n")}return i.toString()}}class Is{constructor(n,i,s,a){this.rowNumber=Is.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(i),this.bucket=Math.trunc(s),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Is.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Is.BARCODE_ROW_UNKNOWN=-1;class hn{static initialize(){for(let n=0;n<ve.SYMBOL_TABLE.length;n++){let i=ve.SYMBOL_TABLE[n],s=i&1;for(let a=0;a<ve.BARS_IN_MODULE;a++){let l=0;for(;(i&1)===s;)l+=1,i>>=1;s=i&1,hn.RATIOS_TABLE[n]||(hn.RATIOS_TABLE[n]=new Array(ve.BARS_IN_MODULE)),hn.RATIOS_TABLE[n][ve.BARS_IN_MODULE-a-1]=Math.fround(l/ve.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let i=hn.getDecodedCodewordValue(hn.sampleBitCounts(n));return i!==-1?i:hn.getClosestDecodedValue(n)}static sampleBitCounts(n){let i=_e.sum(n),s=new Int32Array(ve.BARS_IN_MODULE),a=0,l=0;for(let c=0;c<ve.MODULES_IN_CODEWORD;c++){let f=i/(2*ve.MODULES_IN_CODEWORD)+c*i/ve.MODULES_IN_CODEWORD;l+n[a]<=f&&(l+=n[a],a++),s[a]++}return s}static getDecodedCodewordValue(n){let i=hn.getBitValue(n);return ve.getCodeword(i)===-1?-1:i}static getBitValue(n){let i=0;for(let s=0;s<n.length;s++)for(let a=0;a<n[s];a++)i=i<<1|(s%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(n){let i=_e.sum(n),s=new Array(ve.BARS_IN_MODULE);if(i>1)for(let c=0;c<s.length;c++)s[c]=Math.fround(n[c]/i);let a=an.MAX_VALUE,l=-1;this.bSymbolTableReady||hn.initialize();for(let c=0;c<hn.RATIOS_TABLE.length;c++){let f=0,g=hn.RATIOS_TABLE[c];for(let x=0;x<ve.BARS_IN_MODULE;x++){let E=Math.fround(g[x]-s[x]);if(f+=Math.fround(E*E),f>=a)break}f<a&&(a=f,l=ve.SYMBOL_TABLE[c])}return l}}hn.bSymbolTableReady=!1,hn.RATIOS_TABLE=new Array(ve.SYMBOL_TABLE.length).map(C=>new Array(ve.BARS_IN_MODULE));class yh{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Eh{static parseLong(n,i=void 0){return parseInt(n,i)}}class vh extends m{}vh.kind="NullPointerException";class dg{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,i,s){if(n==null)throw new vh;if(i<0||i>n.length||s<0||i+s>n.length||i+s<0)throw new X;if(s===0)return;for(let a=0;a<s;a++)this.write(n[i+a])}flush(){}close(){}}class gg extends m{}class pg extends dg{constructor(n=32){if(super(),this.count=0,n<0)throw new v("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let s=this.buf.length<<1;if(s-n<0&&(s=n),s<0){if(n<0)throw new gg;s=O.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,s)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,i,s){if(i<0||i>n.length||s<0||i+s-n.length>0)throw new X;this.ensureCapacity(this.count+s),L.arraycopy(n,i,this.buf,this.count,s),this.count+=s}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var qe;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(qe||(qe={}));function Ch(){if(typeof window<"u")return window.BigInt||null;if(typeof Ut<"u")return Ut.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ko;function br(C){if(typeof ko>"u"&&(ko=Ch()),ko===null)throw new Error("BigInt is not supported!");return ko(C)}function mg(){let C=[];C[0]=br(1);let n=br(900);C[1]=n;for(let i=2;i<16;i++)C[i]=C[i-1]*n;return C}class H{static decode(n,i){let s=new ae(""),a=b.ISO8859_1;s.enableDecoding(a);let l=1,c=n[l++],f=new yh;for(;l<n[0];){switch(c){case H.TEXT_COMPACTION_MODE_LATCH:l=H.textCompaction(n,l,s);break;case H.BYTE_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH_6:l=H.byteCompaction(c,n,a,l,s);break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(n[l++]);break;case H.NUMERIC_COMPACTION_MODE_LATCH:l=H.numericCompaction(n,l,s);break;case H.ECI_CHARSET:b.getCharacterSetECIByValue(n[l++]);break;case H.ECI_GENERAL_PURPOSE:l+=2;break;case H.ECI_USER_DEFINED:l++;break;case H.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=H.decodeMacroBlock(n,l,f);break;case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case H.MACRO_PDF417_TERMINATOR:throw new F;default:l--,l=H.textCompaction(n,l,s);break}if(l<n.length)c=n[l++];else throw F.getFormatInstance()}if(s.length()===0)throw F.getFormatInstance();let g=new xe(null,s.toString(),null,i);return g.setOther(f),g}static decodeMacroBlock(n,i,s){if(i+H.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw F.getFormatInstance();let a=new Int32Array(H.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<H.NUMBER_OF_SEQUENCE_CODEWORDS;f++,i++)a[f]=n[i];s.setSegmentIndex(O.parseInt(H.decodeBase900toBase10(a,H.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new ae;i=H.textCompaction(n,i,l),s.setFileId(l.toString());let c=-1;for(n[i]===H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=i+1);i<n[0];)switch(n[i]){case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,n[i]){case H.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new ae;i=H.textCompaction(n,i+1,f),s.setFileName(f.toString());break;case H.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new ae;i=H.textCompaction(n,i+1,g),s.setSender(g.toString());break;case H.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ae;i=H.textCompaction(n,i+1,x),s.setAddressee(x.toString());break;case H.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ae;i=H.numericCompaction(n,i+1,E),s.setSegmentCount(O.parseInt(E.toString()));break;case H.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let _=new ae;i=H.numericCompaction(n,i+1,_),s.setTimestamp(Eh.parseLong(_.toString()));break;case H.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new ae;i=H.numericCompaction(n,i+1,A),s.setChecksum(O.parseInt(A.toString()));break;case H.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new ae;i=H.numericCompaction(n,i+1,T),s.setFileSize(Eh.parseLong(T.toString()));break;default:throw F.getFormatInstance()}break;case H.MACRO_PDF417_TERMINATOR:i++,s.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(c!==-1){let f=i-c;s.isLastSegment()&&f--,s.setOptionalData(N.copyOfRange(n,c,c+f))}return i}static textCompaction(n,i,s){let a=new Int32Array((n[0]-i)*2),l=new Int32Array((n[0]-i)*2),c=0,f=!1;for(;i<n[0]&&!f;){let g=n[i++];if(g<H.TEXT_COMPACTION_MODE_LATCH)a[c]=g/30,a[c+1]=g%30,c+=2;else switch(g){case H.TEXT_COMPACTION_MODE_LATCH:a[c++]=H.TEXT_COMPACTION_MODE_LATCH;break;case H.BYTE_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH_6:case H.NUMERIC_COMPACTION_MODE_LATCH:case H.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case H.MACRO_PDF417_TERMINATOR:i--,f=!0;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[c]=H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=n[i++],l[c]=g,c++;break}}return H.decodeTextCompaction(a,l,c,s),i}static decodeTextCompaction(n,i,s,a){let l=qe.ALPHA,c=qe.ALPHA,f=0;for(;f<s;){let g=n[f],x="";switch(l){case qe.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case H.LL:l=qe.LOWER;break;case H.ML:l=qe.MIXED;break;case H.PS:c=l,l=qe.PUNCT_SHIFT;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break;case qe.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case H.AS:c=l,l=qe.ALPHA_SHIFT;break;case H.ML:l=qe.MIXED;break;case H.PS:c=l,l=qe.PUNCT_SHIFT;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break;case qe.MIXED:if(g<H.PL)x=H.MIXED_CHARS[g];else switch(g){case H.PL:l=qe.PUNCT;break;case 26:x=" ";break;case H.LL:l=qe.LOWER;break;case H.AL:l=qe.ALPHA;break;case H.PS:c=l,l=qe.PUNCT_SHIFT;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break;case qe.PUNCT:if(g<H.PAL)x=H.PUNCT_CHARS[g];else switch(g){case H.PAL:l=qe.ALPHA;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break;case qe.ALPHA_SHIFT:if(l=c,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break;case qe.PUNCT_SHIFT:if(l=c,g<H.PAL)x=H.PUNCT_CHARS[g];else switch(g){case H.PAL:l=qe.ALPHA;break;case H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(i[f]);break;case H.TEXT_COMPACTION_MODE_LATCH:l=qe.ALPHA;break}break}x!==""&&a.append(x),f++}}static byteCompaction(n,i,s,a,l){let c=new pg,f=0,g=0,x=!1;switch(n){case H.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),_=i[a++];for(;a<i[0]&&!x;)switch(E[f++]=_,g=900*g+_,_=i[a++],_){case H.TEXT_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH:case H.NUMERIC_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH_6:case H.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case H.MACRO_PDF417_TERMINATOR:a--,x=!0;break;default:if(f%5===0&&f>0){for(let A=0;A<6;++A)c.write(Number(br(g)>>br(8*(5-A))));g=0,f=0}break}a===i[0]&&_<H.TEXT_COMPACTION_MODE_LATCH&&(E[f++]=_);for(let A=0;A<f;A++)c.write(E[A]);break;case H.BYTE_COMPACTION_MODE_LATCH_6:for(;a<i[0]&&!x;){let A=i[a++];if(A<H.TEXT_COMPACTION_MODE_LATCH)f++,g=900*g+A;else switch(A){case H.TEXT_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH:case H.NUMERIC_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH_6:case H.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case H.MACRO_PDF417_TERMINATOR:a--,x=!0;break}if(f%5===0&&f>0){for(let T=0;T<6;++T)c.write(Number(br(g)>>br(8*(5-T))));g=0,f=0}}break}return l.append(oe.decode(c.toByteArray(),s)),a}static numericCompaction(n,i,s){let a=0,l=!1,c=new Int32Array(H.MAX_NUMERIC_CODEWORDS);for(;i<n[0]&&!l;){let f=n[i++];if(i===n[0]&&(l=!0),f<H.TEXT_COMPACTION_MODE_LATCH)c[a]=f,a++;else switch(f){case H.TEXT_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH:case H.BYTE_COMPACTION_MODE_LATCH_6:case H.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case H.MACRO_PDF417_TERMINATOR:i--,l=!0;break}(a%H.MAX_NUMERIC_CODEWORDS===0||f===H.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(s.append(H.decodeBase900toBase10(c,a)),a=0)}return i}static decodeBase900toBase10(n,i){let s=br(0);for(let l=0;l<i;l++)s+=H.EXP900[i-l-1]*br(n[l]);let a=s.toString();if(a.charAt(0)!=="1")throw new F;return a.substring(1)}}H.TEXT_COMPACTION_MODE_LATCH=900,H.BYTE_COMPACTION_MODE_LATCH=901,H.NUMERIC_COMPACTION_MODE_LATCH=902,H.BYTE_COMPACTION_MODE_LATCH_6=924,H.ECI_USER_DEFINED=925,H.ECI_GENERAL_PURPOSE=926,H.ECI_CHARSET=927,H.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,H.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,H.MACRO_PDF417_TERMINATOR=922,H.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,H.MAX_NUMERIC_CODEWORDS=15,H.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,H.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,H.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,H.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,H.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,H.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,H.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,H.PL=25,H.LL=27,H.AS=27,H.ML=28,H.AL=28,H.PS=29,H.PAL=29,H.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,H.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",H.EXP900=Ch()?mg():[],H.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ne{constructor(){}static decode(n,i,s,a,l,c,f){let g=new ri(n,i,s,a,l),x=null,E=null,_;for(let M=!0;;M=!1){if(i!=null&&(x=Ne.getRowIndicatorColumn(n,g,i,!0,c,f)),a!=null&&(E=Ne.getRowIndicatorColumn(n,g,a,!1,c,f)),_=Ne.merge(x,E),_==null)throw V.getNotFoundInstance();let P=_.getBoundingBox();if(M&&P!=null&&(P.getMinY()<g.getMinY()||P.getMaxY()>g.getMaxY()))g=P;else break}_.setBoundingBox(g);let A=_.getBarcodeColumnCount()+1;_.setDetectionResultColumn(0,x),_.setDetectionResultColumn(A,E);let T=x!=null;for(let M=1;M<=A;M++){let P=T?M:A-M;if(_.getDetectionResultColumn(P)!==void 0)continue;let j;P===0||P===A?j=new wh(g,P===0):j=new _s(g),_.setDetectionResultColumn(P,j);let W=-1,ie=W;for(let se=g.getMinY();se<=g.getMaxY();se++){if(W=Ne.getStartColumn(_,P,se,T),W<0||W>g.getMaxX()){if(ie===-1)continue;W=ie}let Z=Ne.detectCodeword(n,g.getMinX(),g.getMaxX(),T,W,se,c,f);Z!=null&&(j.setCodeword(se,Z),ie=W,c=Math.min(c,Z.getWidth()),f=Math.max(f,Z.getWidth()))}}return Ne.createDecoderResult(_)}static merge(n,i){if(n==null&&i==null)return null;let s=Ne.getBarcodeMetadata(n,i);if(s==null)return null;let a=ri.merge(Ne.adjustBoundingBox(n),Ne.adjustBoundingBox(i));return new Ss(s,a)}static adjustBoundingBox(n){if(n==null)return null;let i=n.getRowHeights();if(i==null)return null;let s=Ne.getMax(i),a=0;for(let f of i)if(a+=s-f,f>0)break;let l=n.getCodewords();for(let f=0;a>0&&l[f]==null;f++)a--;let c=0;for(let f=i.length-1;f>=0&&(c+=s-i[f],!(i[f]>0));f--);for(let f=l.length-1;c>0&&l[f]==null;f--)c--;return n.getBoundingBox().addMissingRows(a,c,n.isLeft())}static getMax(n){let i=-1;for(let s of n)i=Math.max(i,s);return i}static getBarcodeMetadata(n,i){let s;if(n==null||(s=n.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let a;return i==null||(a=i.getBarcodeMetadata())==null?s:s.getColumnCount()!==a.getColumnCount()&&s.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&s.getRowCount()!==a.getRowCount()?null:s}static getRowIndicatorColumn(n,i,s,a,l,c){let f=new wh(i,a);for(let g=0;g<2;g++){let x=g===0?1:-1,E=Math.trunc(Math.trunc(s.getX()));for(let _=Math.trunc(Math.trunc(s.getY()));_<=i.getMaxY()&&_>=i.getMinY();_+=x){let A=Ne.detectCodeword(n,0,n.getWidth(),a,E,_,l,c);A!=null&&(f.setCodeword(_,A),a?E=A.getStartX():E=A.getEndX())}}return f}static adjustCodewordCount(n,i){let s=i[0][1],a=s.getValue(),l=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-Ne.getNumberOfECCodeWords(n.getBarcodeECLevel());if(a.length===0){if(l<1||l>ve.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();s.setValue(l)}else a[0]!==l&&s.setValue(l)}static createDecoderResult(n){let i=Ne.createBarcodeMatrix(n);Ne.adjustCodewordCount(n,i);let s=new Array,a=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),l=[],c=new Array;for(let g=0;g<n.getBarcodeRowCount();g++)for(let x=0;x<n.getBarcodeColumnCount();x++){let E=i[g][x+1].getValue(),_=g*n.getBarcodeColumnCount()+x;E.length===0?s.push(_):E.length===1?a[_]=E[0]:(c.push(_),l.push(E))}let f=new Array(l.length);for(let g=0;g<f.length;g++)f[g]=l[g];return Ne.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),a,ve.toIntArray(s),ve.toIntArray(c),f)}static createDecoderResultFromAmbiguousValues(n,i,s,a,l){let c=new Int32Array(a.length),f=100;for(;f-- >0;){for(let g=0;g<c.length;g++)i[a[g]]=l[g][c[g]];try{return Ne.decodeCodewords(i,n,s)}catch(g){if(!(g instanceof k))throw g}if(c.length===0)throw k.getChecksumInstance();for(let g=0;g<c.length;g++)if(c[g]<l[g].length-1){c[g]++;break}else if(c[g]=0,g===c.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(n){let i=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let a=0;a<i.length;a++)for(let l=0;l<i[a].length;l++)i[a][l]=new As;let s=0;for(let a of n.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=0){if(c>=i.length)continue;i[c][s].setValue(l.getValue())}}}s++}return i}static isValidBarcodeColumn(n,i){return i>=0&&i<=n.getBarcodeColumnCount()+1}static getStartColumn(n,i,s,a){let l=a?1:-1,c=null;if(Ne.isValidBarcodeColumn(n,i-l)&&(c=n.getDetectionResultColumn(i-l).getCodeword(s)),c!=null)return a?c.getEndX():c.getStartX();if(c=n.getDetectionResultColumn(i).getCodewordNearby(s),c!=null)return a?c.getStartX():c.getEndX();if(Ne.isValidBarcodeColumn(n,i-l)&&(c=n.getDetectionResultColumn(i-l).getCodewordNearby(s)),c!=null)return a?c.getEndX():c.getStartX();let f=0;for(;Ne.isValidBarcodeColumn(n,i-l);){i-=l;for(let g of n.getDetectionResultColumn(i).getCodewords())if(g!=null)return(a?g.getEndX():g.getStartX())+l*f*(g.getEndX()-g.getStartX());f++}return a?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,i,s,a,l,c,f,g){l=Ne.adjustCodewordStartColumn(n,i,s,a,l,c);let x=Ne.getModuleBitCount(n,i,s,a,l,c);if(x==null)return null;let E,_=_e.sum(x);if(a)E=l+_;else{for(let M=0;M<x.length/2;M++){let P=x[M];x[M]=x[x.length-1-M],x[x.length-1-M]=P}E=l,l=E-_}if(!Ne.checkCodewordSkew(_,f,g))return null;let A=hn.getDecodedValue(x),T=ve.getCodeword(A);return T===-1?null:new Is(l,E,Ne.getCodewordBucketNumber(A),T)}static getModuleBitCount(n,i,s,a,l,c){let f=l,g=new Int32Array(8),x=0,E=a?1:-1,_=a;for(;(a?f<s:f>=i)&&x<g.length;)n.get(f,c)===_?(g[x]++,f+=E):(x++,_=!_);return x===g.length||f===(a?s:i)&&x===g.length-1?g:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,i,s,a,l,c){let f=l,g=a?-1:1;for(let x=0;x<2;x++){for(;(a?f>=i:f<s)&&a===n.get(f,c);){if(Math.abs(l-f)>Ne.CODEWORD_SKEW_SIZE)return l;f+=g}g=-g,a=!a}return f}static checkCodewordSkew(n,i,s){return i-Ne.CODEWORD_SKEW_SIZE<=n&&n<=s+Ne.CODEWORD_SKEW_SIZE}static decodeCodewords(n,i,s){if(n.length===0)throw F.getFormatInstance();let a=1<<i+1,l=Ne.correctErrors(n,s,a);Ne.verifyCodewordCount(n,a);let c=H.decode(n,""+i);return c.setErrorsCorrected(l),c.setErasures(s.length),c}static correctErrors(n,i,s){if(i!=null&&i.length>s/2+Ne.MAX_ERRORS||s<0||s>Ne.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return Ne.errorCorrection.decode(n,s,i)}static verifyCodewordCount(n,i){if(n.length<4)throw F.getFormatInstance();let s=n[0];if(s>n.length)throw F.getFormatInstance();if(s===0)if(i<n.length)n[0]=n.length-i;else throw F.getFormatInstance()}static getBitCountForCodeword(n){let i=new Int32Array(8),s=0,a=i.length-1;for(;!((n&1)!==s&&(s=n&1,a--,a<0));)i[a]++,n>>=1;return i}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return Ne.getCodewordBucketNumber(Ne.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let i=new Cs;for(let s=0;s<n.length;s++){i.format("Row %2d: ",s);for(let a=0;a<n[s].length;a++){let l=n[s][a];l.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}i.format("%n")}return i.toString()}}Ne.CODEWORD_SKEW_SIZE=2,Ne.MAX_ERRORS=3,Ne.MAX_EC_CODEWORDS=512,Ne.errorCorrection=new xh;class Ht{decode(n,i=null){let s=Ht.decode(n,i,!1);if(s==null||s.length===0||s[0]==null)throw V.getNotFoundInstance();return s[0]}decodeMultiple(n,i=null){try{return Ht.decode(n,i,!0)}catch(s){throw s instanceof F||s instanceof k?V.getNotFoundInstance():s}}static decode(n,i,s){const a=new Array,l=Te.detectMultiple(n,i,s);for(const c of l.getPoints()){const f=Ne.decode(l.getBits(),c[4],c[5],c[6],c[7],Ht.getMinCodewordWidth(c),Ht.getMaxCodewordWidth(c)),g=new Ie(f.getText(),f.getRawBytes(),void 0,c,le.PDF_417);g.putMetadata(De.ERROR_CORRECTION_LEVEL,f.getECLevel());const x=f.getOther();x!=null&&g.putMetadata(De.PDF417_EXTRA_METADATA,x),a.push(g)}return a.map(c=>c)}static getMaxWidth(n,i){return n==null||i==null?0:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMinWidth(n,i){return n==null||i==null?O.MAX_VALUE:Math.trunc(Math.abs(n.getX()-i.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Ht.getMaxWidth(n[0],n[4]),Ht.getMaxWidth(n[6],n[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.max(Ht.getMaxWidth(n[1],n[5]),Ht.getMaxWidth(n[7],n[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Ht.getMinWidth(n[0],n[4]),Ht.getMinWidth(n[6],n[2])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN),Math.min(Ht.getMinWidth(n[1],n[5]),Ht.getMinWidth(n[7],n[3])*ve.MODULES_IN_CODEWORD/ve.MODULES_IN_STOP_PATTERN)))}reset(){}}class Do extends m{}Do.kind="ReaderException";class _h{constructor(n,i){this.verbose=n===!0,i&&this.setHints(i)}decode(n,i){return i&&this.setHints(i),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const i=!o(n)&&n.get(q.TRY_HARDER)===!0,s=o(n)?null:n.get(q.POSSIBLE_FORMATS),a=new Array;if(!o(s)){const l=s.some(c=>c===le.UPC_A||c===le.UPC_E||c===le.EAN_13||c===le.EAN_8||c===le.CODABAR||c===le.CODE_39||c===le.CODE_93||c===le.CODE_128||c===le.ITF||c===le.RSS_14||c===le.RSS_EXPANDED);l&&!i&&a.push(new Ni(n,this.verbose)),s.includes(le.QR_CODE)&&a.push(new Tr),s.includes(le.DATA_MATRIX)&&a.push(new Ir),s.includes(le.AZTEC)&&a.push(new vn),s.includes(le.PDF_417)&&a.push(new Ht),l&&i&&a.push(new Ni(n,this.verbose))}a.length===0&&(i||a.push(new Ni(n,this.verbose)),a.push(new Tr),a.push(new Ir),a.push(new vn),a.push(new Ht),i&&a.push(new Ni(n,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Do("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(n,this.hints)}catch(s){if(s instanceof Do)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class xg extends ke{constructor(n=null,i=500){const s=new _h;s.setHints(n),super(s,i)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class wg extends ke{constructor(n=500){super(new Ht,n)}}class yg extends ke{constructor(n=500){super(new Tr,n)}}var Tl;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Tl||(Tl={}));var Rt=Tl;class bl{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Re(n,Int32Array.from([1])))}buildGenerator(n){const i=this.cachedGenerators;if(n>=i.length){let s=i[i.length-1];const a=this.field;for(let l=i.length;l<=n;l++){const c=s.multiply(new Re(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));i.push(c),s=c}}return i[n]}encode(n,i){if(i===0)throw new v("No error correction bytes");const s=n.length-i;if(s<=0)throw new v("No data bytes provided");const a=this.buildGenerator(i),l=new Int32Array(s);L.arraycopy(n,0,l,0,s);let c=new Re(this.field,l);c=c.multiplyByMonomial(i,1);const g=c.divide(a)[1].getCoefficients(),x=i-g.length;for(let E=0;E<x;E++)n[s+E]=0;L.arraycopy(g,0,n,s+x,g.length)}}class _t{constructor(){}static applyMaskPenaltyRule1(n){return _t.applyMaskPenaltyRule1Internal(n,!0)+_t.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let c=0;c<l-1;c++){const f=s[c];for(let g=0;g<a-1;g++){const x=f[g];x===f[g+1]&&x===s[c+1][g]&&x===s[c+1][g+1]&&i++}}return _t.N2*i}static applyMaskPenaltyRule3(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let c=0;c<l;c++)for(let f=0;f<a;f++){const g=s[c];f+6<a&&g[f]===1&&g[f+1]===0&&g[f+2]===1&&g[f+3]===1&&g[f+4]===1&&g[f+5]===0&&g[f+6]===1&&(_t.isWhiteHorizontal(g,f-4,f)||_t.isWhiteHorizontal(g,f+7,f+11))&&i++,c+6<l&&s[c][f]===1&&s[c+1][f]===0&&s[c+2][f]===1&&s[c+3][f]===1&&s[c+4][f]===1&&s[c+5][f]===0&&s[c+6][f]===1&&(_t.isWhiteVertical(s,f,c-4,c)||_t.isWhiteVertical(s,f,c+7,c+11))&&i++}return i*_t.N3}static isWhiteHorizontal(n,i,s){i=Math.max(i,0),s=Math.min(s,n.length);for(let a=i;a<s;a++)if(n[a]===1)return!1;return!0}static isWhiteVertical(n,i,s,a){s=Math.max(s,0),a=Math.min(a,n.length);for(let l=s;l<a;l++)if(n[l][i]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let i=0;const s=n.getArray(),a=n.getWidth(),l=n.getHeight();for(let g=0;g<l;g++){const x=s[g];for(let E=0;E<a;E++)x[E]===1&&i++}const c=n.getHeight()*n.getWidth();return Math.floor(Math.abs(i*2-c)*10/c)*_t.N4}static getDataMaskBit(n,i,s){let a,l;switch(n){case 0:a=s+i&1;break;case 1:a=s&1;break;case 2:a=i%3;break;case 3:a=(s+i)%3;break;case 4:a=Math.floor(s/2)+Math.floor(i/3)&1;break;case 5:l=s*i,a=(l&1)+l%3;break;case 6:l=s*i,a=(l&1)+l%3&1;break;case 7:l=s*i,a=l%3+(s+i&1)&1;break;default:throw new v("Invalid mask pattern: "+n)}return a===0}static applyMaskPenaltyRule1Internal(n,i){let s=0;const a=i?n.getHeight():n.getWidth(),l=i?n.getWidth():n.getHeight(),c=n.getArray();for(let f=0;f<a;f++){let g=0,x=-1;for(let E=0;E<l;E++){const _=i?c[f][E]:c[E][f];_===x?g++:(g>=5&&(s+=_t.N1+(g-5)),g=1,x=_)}g>=5&&(s+=_t.N1+(g-5))}return s}}_t.N1=3,_t.N2=3,_t.N3=40,_t.N4=10;class Mo{constructor(n,i){this.width=n,this.height=i;const s=new Array(i);for(let a=0;a!==i;a++)s[a]=new Uint8Array(n);this.bytes=s}getHeight(){return this.height}getWidth(){return this.width}get(n,i){return this.bytes[i][n]}getArray(){return this.bytes}setNumber(n,i,s){this.bytes[i][n]=s}setBoolean(n,i,s){this.bytes[i][n]=s?1:0}clear(n){for(const i of this.bytes)N.fill(i,n)}equals(n){if(!(n instanceof Mo))return!1;const i=n;if(this.width!==i.width||this.height!==i.height)return!1;for(let s=0,a=this.height;s<a;++s){const l=this.bytes[s],c=i.bytes[s];for(let f=0,g=this.width;f<g;++f)if(l[f]!==c[f])return!1}return!0}toString(){const n=new ae;for(let i=0,s=this.height;i<s;++i){const a=this.bytes[i];for(let l=0,c=this.width;l<c;++l)switch(a[l]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class ii{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ae;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<ii.NUM_MASK_PATTERNS}}ii.NUM_MASK_PATTERNS=8;class et extends m{}et.kind="WriterException";class Ee{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,i,s,a,l){Ee.clearMatrix(l),Ee.embedBasicPatterns(s,l),Ee.embedTypeInfo(i,a,l),Ee.maybeEmbedVersionInfo(s,l),Ee.embedDataBits(n,a,l)}static embedBasicPatterns(n,i){Ee.embedPositionDetectionPatternsAndSeparators(i),Ee.embedDarkDotAtLeftBottomCorner(i),Ee.maybeEmbedPositionAdjustmentPatterns(n,i),Ee.embedTimingPatterns(i)}static embedTypeInfo(n,i,s){const a=new U;Ee.makeTypeInfoBits(n,i,a);for(let l=0,c=a.getSize();l<c;++l){const f=a.get(a.getSize()-1-l),g=Ee.TYPE_INFO_COORDINATES[l],x=g[0],E=g[1];if(s.setBoolean(x,E,f),l<8){const _=s.getWidth()-l-1;s.setBoolean(_,8,f)}else{const A=s.getHeight()-7+(l-8);s.setBoolean(8,A,f)}}}static maybeEmbedVersionInfo(n,i){if(n.getVersionNumber()<7)return;const s=new U;Ee.makeVersionInfoBits(n,s);let a=6*3-1;for(let l=0;l<6;++l)for(let c=0;c<3;++c){const f=s.get(a);a--,i.setBoolean(l,i.getHeight()-11+c,f),i.setBoolean(i.getHeight()-11+c,l,f)}}static embedDataBits(n,i,s){let a=0,l=-1,c=s.getWidth()-1,f=s.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);f>=0&&f<s.getHeight();){for(let g=0;g<2;++g){const x=c-g;if(!Ee.isEmpty(s.get(x,f)))continue;let E;a<n.getSize()?(E=n.get(a),++a):E=!1,i!==255&&_t.getDataMaskBit(i,x,f)&&(E=!E),s.setBoolean(x,f,E)}f+=l}l=-l,f+=l,c-=2}if(a!==n.getSize())throw new et("Not all bits consumed: "+a+"/"+n.getSize())}static findMSBSet(n){return 32-O.numberOfLeadingZeros(n)}static calculateBCHCode(n,i){if(i===0)throw new v("0 polynomial");const s=Ee.findMSBSet(i);for(n<<=s-1;Ee.findMSBSet(n)>=s;)n^=i<<Ee.findMSBSet(n)-s;return n}static makeTypeInfoBits(n,i,s){if(!ii.isValidMaskPattern(i))throw new et("Invalid mask pattern");const a=n.getBits()<<3|i;s.appendBits(a,5);const l=Ee.calculateBCHCode(a,Ee.TYPE_INFO_POLY);s.appendBits(l,10);const c=new U;if(c.appendBits(Ee.TYPE_INFO_MASK_PATTERN,15),s.xor(c),s.getSize()!==15)throw new et("should not happen but we got: "+s.getSize())}static makeVersionInfoBits(n,i){i.appendBits(n.getVersionNumber(),6);const s=Ee.calculateBCHCode(n.getVersionNumber(),Ee.VERSION_INFO_POLY);if(i.appendBits(s,12),i.getSize()!==18)throw new et("should not happen but we got: "+i.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let i=8;i<n.getWidth()-8;++i){const s=(i+1)%2;Ee.isEmpty(n.get(i,6))&&n.setNumber(i,6,s),Ee.isEmpty(n.get(6,i))&&n.setNumber(6,i,s)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new et;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,i,s){for(let a=0;a<8;++a){if(!Ee.isEmpty(s.get(n+a,i)))throw new et;s.setNumber(n+a,i,0)}}static embedVerticalSeparationPattern(n,i,s){for(let a=0;a<7;++a){if(!Ee.isEmpty(s.get(n,i+a)))throw new et;s.setNumber(n,i+a,0)}}static embedPositionAdjustmentPattern(n,i,s){for(let a=0;a<5;++a){const l=Ee.POSITION_ADJUSTMENT_PATTERN[a];for(let c=0;c<5;++c)s.setNumber(n+c,i+a,l[c])}}static embedPositionDetectionPattern(n,i,s){for(let a=0;a<7;++a){const l=Ee.POSITION_DETECTION_PATTERN[a];for(let c=0;c<7;++c)s.setNumber(n+c,i+a,l[c])}}static embedPositionDetectionPatternsAndSeparators(n){const i=Ee.POSITION_DETECTION_PATTERN[0].length;Ee.embedPositionDetectionPattern(0,0,n),Ee.embedPositionDetectionPattern(n.getWidth()-i,0,n),Ee.embedPositionDetectionPattern(0,n.getWidth()-i,n);const s=8;Ee.embedHorizontalSeparationPattern(0,s-1,n),Ee.embedHorizontalSeparationPattern(n.getWidth()-s,s-1,n),Ee.embedHorizontalSeparationPattern(0,n.getWidth()-s,n);const a=7;Ee.embedVerticalSeparationPattern(a,0,n),Ee.embedVerticalSeparationPattern(n.getHeight()-a-1,0,n),Ee.embedVerticalSeparationPattern(a,n.getHeight()-a,n)}static maybeEmbedPositionAdjustmentPatterns(n,i){if(n.getVersionNumber()<2)return;const s=n.getVersionNumber()-1,a=Ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s];for(let l=0,c=a.length;l!==c;l++){const f=a[l];if(f>=0)for(let g=0;g!==c;g++){const x=a[g];x>=0&&Ee.isEmpty(i.get(x,f))&&Ee.embedPositionAdjustmentPattern(x-2,f-2,i)}}}}Ee.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ee.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ee.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ee.VERSION_INFO_POLY=7973,Ee.TYPE_INFO_POLY=1335,Ee.TYPE_INFO_MASK_PATTERN=21522;class Eg{constructor(n,i){this.dataBytes=n,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ot{constructor(){}static calculateMaskPenalty(n){return _t.applyMaskPenaltyRule1(n)+_t.applyMaskPenaltyRule2(n)+_t.applyMaskPenaltyRule3(n)+_t.applyMaskPenaltyRule4(n)}static encode(n,i,s=null){let a=ot.DEFAULT_BYTE_MODE_ENCODING;const l=s!==null&&s.get(Rt.CHARACTER_SET)!==void 0;l&&(a=s.get(Rt.CHARACTER_SET).toString());const c=this.chooseMode(n,a),f=new U;if(c===ye.BYTE&&(l||ot.DEFAULT_BYTE_MODE_ENCODING!==a)){const se=b.getCharacterSetECIByName(a);se!==void 0&&this.appendECI(se,f)}this.appendModeInfo(c,f);const g=new U;this.appendBytes(n,c,g,a);let x;if(s!==null&&s.get(Rt.QR_VERSION)!==void 0){const se=Number.parseInt(s.get(Rt.QR_VERSION).toString(),10);x=we.getVersionForNumber(se);const Z=this.calculateBitsNeeded(c,f,g,x);if(!this.willFit(Z,x,i))throw new et("Data too big for requested version")}else x=this.recommendVersion(i,c,f,g);const E=new U;E.appendBitArray(f);const _=c===ye.BYTE?g.getSizeInBytes():n.length;this.appendLengthInfo(_,x,c,E),E.appendBitArray(g);const A=x.getECBlocksForLevel(i),T=x.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(T,E);const M=this.interleaveWithECBytes(E,x.getTotalCodewords(),T,A.getNumBlocks()),P=new ii;P.setECLevel(i),P.setMode(c),P.setVersion(x);const j=x.getDimensionForVersion(),W=new Mo(j,j),ie=this.chooseMaskPattern(M,i,x,W);return P.setMaskPattern(ie),Ee.buildMatrix(M,i,x,ie,W),P.setMatrix(W),P}static recommendVersion(n,i,s,a){const l=this.calculateBitsNeeded(i,s,a,we.getVersionForNumber(1)),c=this.chooseVersion(l,n),f=this.calculateBitsNeeded(i,s,a,c);return this.chooseVersion(f,n)}static calculateBitsNeeded(n,i,s,a){return i.getSize()+n.getCharacterCountBits(a)+s.getSize()}static getAlphanumericCode(n){return n<ot.ALPHANUMERIC_TABLE.length?ot.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,i=null){if(b.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(n))return ye.KANJI;let s=!1,a=!1;for(let l=0,c=n.length;l<c;++l){const f=n.charAt(l);if(ot.isDigit(f))s=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)a=!0;else return ye.BYTE}return a?ye.ALPHANUMERIC:s?ye.NUMERIC:ye.BYTE}static isOnlyDoubleByteKanji(n){let i;try{i=oe.encode(n,b.SJIS)}catch{return!1}const s=i.length;if(s%2!==0)return!1;for(let a=0;a<s;a+=2){const l=i[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(n,i,s,a){let l=Number.MAX_SAFE_INTEGER,c=-1;for(let f=0;f<ii.NUM_MASK_PATTERNS;f++){Ee.buildMatrix(n,i,s,f,a);let g=this.calculateMaskPenalty(a);g<l&&(l=g,c=f)}return c}static chooseVersion(n,i){for(let s=1;s<=40;s++){const a=we.getVersionForNumber(s);if(ot.willFit(n,a,i))return a}throw new et("Data too big")}static willFit(n,i,s){const a=i.getTotalCodewords(),c=i.getECBlocksForLevel(s).getTotalECCodewords(),f=a-c,g=(n+7)/8;return f>=g}static terminateBits(n,i){const s=n*8;if(i.getSize()>s)throw new et("data bits cannot fit in the QR Code"+i.getSize()+" > "+s);for(let c=0;c<4&&i.getSize()<s;++c)i.appendBit(!1);const a=i.getSize()&7;if(a>0)for(let c=a;c<8;c++)i.appendBit(!1);const l=n-i.getSizeInBytes();for(let c=0;c<l;++c)i.appendBits(c&1?17:236,8);if(i.getSize()!==s)throw new et("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,i,s,a,l,c){if(a>=s)throw new et("Block ID too large");const f=n%s,g=s-f,x=Math.floor(n/s),E=x+1,_=Math.floor(i/s),A=_+1,T=x-_,M=E-A;if(T!==M)throw new et("EC bytes mismatch");if(s!==g+f)throw new et("RS blocks mismatch");if(n!==(_+T)*g+(A+M)*f)throw new et("Total bytes mismatch");a<g?(l[0]=_,c[0]=T):(l[0]=A,c[0]=M)}static interleaveWithECBytes(n,i,s,a){if(n.getSizeInBytes()!==s)throw new et("Number of bits and data bytes does not match");let l=0,c=0,f=0;const g=new Array;for(let E=0;E<a;++E){const _=new Int32Array(1),A=new Int32Array(1);ot.getNumDataBytesAndNumECBytesForBlockID(i,s,a,E,_,A);const T=_[0],M=new Uint8Array(T);n.toBytes(8*l,M,0,T);const P=ot.generateECBytes(M,A[0]);g.push(new Eg(M,P)),c=Math.max(c,T),f=Math.max(f,P.length),l+=_[0]}if(s!==l)throw new et("Data bytes does not match offset");const x=new U;for(let E=0;E<c;++E)for(const _ of g){const A=_.getDataBytes();E<A.length&&x.appendBits(A[E],8)}for(let E=0;E<f;++E)for(const _ of g){const A=_.getErrorCorrectionBytes();E<A.length&&x.appendBits(A[E],8)}if(i!==x.getSizeInBytes())throw new et("Interleaving error: "+i+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(n,i){const s=n.length,a=new Int32Array(s+i);for(let c=0;c<s;c++)a[c]=n[c]&255;new bl(pe.QR_CODE_FIELD_256).encode(a,i);const l=new Uint8Array(i);for(let c=0;c<i;c++)l[c]=a[s+c];return l}static appendModeInfo(n,i){i.appendBits(n.getBits(),4)}static appendLengthInfo(n,i,s,a){const l=s.getCharacterCountBits(i);if(n>=1<<l)throw new et(n+" is bigger than "+((1<<l)-1));a.appendBits(n,l)}static appendBytes(n,i,s,a){switch(i){case ye.NUMERIC:ot.appendNumericBytes(n,s);break;case ye.ALPHANUMERIC:ot.appendAlphanumericBytes(n,s);break;case ye.BYTE:ot.append8BitBytes(n,s,a);break;case ye.KANJI:ot.appendKanjiBytes(n,s);break;default:throw new et("Invalid mode: "+i)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const i=ot.getDigit(n);return i>=0&&i<=9}static appendNumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=ot.getDigit(n.charAt(a));if(a+2<s){const c=ot.getDigit(n.charAt(a+1)),f=ot.getDigit(n.charAt(a+2));i.appendBits(l*100+c*10+f,10),a+=3}else if(a+1<s){const c=ot.getDigit(n.charAt(a+1));i.appendBits(l*10+c,7),a+=2}else i.appendBits(l,4),a++}}static appendAlphanumericBytes(n,i){const s=n.length;let a=0;for(;a<s;){const l=ot.getAlphanumericCode(n.charCodeAt(a));if(l===-1)throw new et;if(a+1<s){const c=ot.getAlphanumericCode(n.charCodeAt(a+1));if(c===-1)throw new et;i.appendBits(l*45+c,11),a+=2}else i.appendBits(l,6),a++}}static append8BitBytes(n,i,s){let a;try{a=oe.encode(n,s)}catch(l){throw new et(l)}for(let l=0,c=a.length;l!==c;l++){const f=a[l];i.appendBits(f,8)}}static appendKanjiBytes(n,i){let s;try{s=oe.encode(n,b.SJIS)}catch(l){throw new et(l)}const a=s.length;for(let l=0;l<a;l+=2){const c=s[l]&255,f=s[l+1]&255,g=c<<8&4294967295|f;let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),x===-1)throw new et("Invalid byte sequence");const E=(x>>8)*192+(x&255);i.appendBits(E,13)}}static appendECI(n,i){i.appendBits(ye.ECI.getBits(),4),i.appendBits(n.getValue(),8)}}ot.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ot.DEFAULT_BYTE_MODE_ENCODING=b.UTF8.getName();class si{write(n,i,s,a=null){if(n.length===0)throw new v("Found empty contents");if(i<0||s<0)throw new v("Requested dimensions are too small: "+i+"x"+s);let l=nt.L,c=si.QUIET_ZONE_SIZE;a!==null&&(a.get(Rt.ERROR_CORRECTION)!==void 0&&(l=nt.fromString(a.get(Rt.ERROR_CORRECTION).toString())),a.get(Rt.MARGIN)!==void 0&&(c=Number.parseInt(a.get(Rt.MARGIN).toString(),10)));const f=ot.encode(n,l,a);return this.renderResult(f,i,s,c)}writeToDom(n,i,s,a,l=null){typeof n=="string"&&(n=document.querySelector(n));const c=this.write(i,s,a,l);n&&n.appendChild(c)}renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new ze;const c=l.getWidth(),f=l.getHeight(),g=c+a*2,x=f+a*2,E=Math.max(i,g),_=Math.max(s,x),A=Math.min(Math.floor(E/g),Math.floor(_/x)),T=Math.floor((E-c*A)/2),M=Math.floor((_-f*A)/2),P=this.createSVGElement(E,_);for(let j=0,W=M;j<f;j++,W+=A)for(let ie=0,se=T;ie<c;ie++,se+=A)if(l.get(ie,j)===1){const Z=this.createSvgRectElement(se,W,A,A);P.appendChild(Z)}return P}createSVGElement(n,i){const s=document.createElementNS(si.SVG_NS,"svg");return s.setAttributeNS(null,"height",n.toString()),s.setAttributeNS(null,"width",i.toString()),s}createSvgRectElement(n,i,s,a){const l=document.createElementNS(si.SVG_NS,"rect");return l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",i.toString()),l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}si.QUIET_ZONE_SIZE=4,si.SVG_NS="http://www.w3.org/2000/svg";class ki{encode(n,i,s,a,l){if(n.length===0)throw new v("Found empty contents");if(i!==le.QR_CODE)throw new v("Can only encode QR_CODE, but got "+i);if(s<0||a<0)throw new v(`Requested dimensions are too small: ${s}x${a}`);let c=nt.L,f=ki.QUIET_ZONE_SIZE;l!==null&&(l.get(Rt.ERROR_CORRECTION)!==void 0&&(c=nt.fromString(l.get(Rt.ERROR_CORRECTION).toString())),l.get(Rt.MARGIN)!==void 0&&(f=Number.parseInt(l.get(Rt.MARGIN).toString(),10)));const g=ot.encode(n,c,l);return ki.renderResult(g,s,a,f)}static renderResult(n,i,s,a){const l=n.getMatrix();if(l===null)throw new ze;const c=l.getWidth(),f=l.getHeight(),g=c+a*2,x=f+a*2,E=Math.max(i,g),_=Math.max(s,x),A=Math.min(Math.floor(E/g),Math.floor(_/x)),T=Math.floor((E-c*A)/2),M=Math.floor((_-f*A)/2),P=new me(E,_);for(let j=0,W=M;j<f;j++,W+=A)for(let ie=0,se=T;ie<c;ie++,se+=A)l.get(ie,j)===1&&P.setRegion(se,W,A,A);return P}}ki.QUIET_ZONE_SIZE=4;class vg{encode(n,i,s,a,l){let c;switch(i){case le.QR_CODE:c=new ki;break;default:throw new v("No encoder available for format "+i)}return c.encode(n,i,s,a,l)}}class nr extends re{constructor(n,i,s,a,l,c,f,g){if(super(c,f),this.yuvData=n,this.dataWidth=i,this.dataHeight=s,this.left=a,this.top=l,a+c>i||l+f>s)throw new v("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(c,f)}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.yuvData;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.yuvData,l,a,0,s),a;for(let c=0;c<i;c++){const f=c*n;L.arraycopy(this.yuvData,l,a,f,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new nr(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+i,s,a,!1)}renderThumbnail(){const n=this.getWidth()/nr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/nr.THUMBNAIL_SCALE_FACTOR,s=new Int32Array(n*i),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let c=0;c<i;c++){const f=c*n;for(let g=0;g<n;g++){const x=a[l+g*nr.THUMBNAIL_SCALE_FACTOR]&255;s[f+g]=4278190080|x*65793}l+=this.dataWidth*nr.THUMBNAIL_SCALE_FACTOR}return s}getThumbnailWidth(){return this.getWidth()/nr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/nr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,i){const s=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<i;a++,l+=this.dataWidth){const c=l+n/2;for(let f=l,g=l+n-1;f<c;f++,g--){const x=s[f];s[f]=s[g],s[g]=x}}}invert(){return new Q(this)}}nr.THUMBNAIL_SCALE_FACTOR=2;class Ol extends re{constructor(n,i,s,a,l,c,f){if(super(i,s),this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=f,n.BYTES_PER_ELEMENT===4){const g=i*s,x=new Uint8ClampedArray(g);for(let E=0;E<g;E++){const _=n[E],A=_>>16&255,T=_>>7&510,M=_&255;x[E]=(A+T+M)/4&255}this.luminances=x}else this.luminances=n;if(a===void 0&&(this.dataWidth=i),l===void 0&&(this.dataHeight=s),c===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+s>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(n,i){if(n<0||n>=this.getHeight())throw new v("Requested row is outside the image: "+n);const s=this.getWidth();(i==null||i.length<s)&&(i=new Uint8ClampedArray(s));const a=(n+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,a,i,0,s),i}getMatrix(){const n=this.getWidth(),i=this.getHeight();if(n===this.dataWidth&&i===this.dataHeight)return this.luminances;const s=n*i,a=new Uint8ClampedArray(s);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return L.arraycopy(this.luminances,l,a,0,s),a;for(let c=0;c<i;c++){const f=c*n;L.arraycopy(this.luminances,l,a,f,n),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(n,i,s,a){return new Ol(this.luminances,s,a,this.dataWidth,this.dataHeight,this.left+n,this.top+i)}invert(){return new Q(this)}}class Ah extends b{static forName(n){return this.getCharacterSetECIByName(n)}}class Nl{}Nl.ISO_8859_1=b.ISO8859_1;class Sh{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Ih{static singletonList(n){return[n]}static min(n,i){return n.sort(i)[0]}}class Cg{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Di extends Cg{constructor(n,i,s){super(n),this.value=i,this.bitCount=s}appendTo(n,i){n.appendBits(this.value,this.bitCount)}add(n,i){return new Di(this,n,i)}addBinaryShift(n,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Di(this,n,i)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+O.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Rl extends Di{constructor(n,i,s){super(n,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=s}appendTo(n,i){for(let s=0;s<this.binaryShiftByteCount;s++)(s===0||s===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):s===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(i[this.binaryShiftStart+s],8)}addBinaryShift(n,i){return new Rl(this,n,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function _g(C,n,i){return new Rl(C,n,i)}function Ts(C,n,i){return new Di(C,n,i)}const Ag=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Or=0,Po=1,Pn=2,Th=3,rr=4,Sg=new Di(null,0,0),kl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ig(C){for(let n of C)N.fill(n,-1);return C[Or][rr]=0,C[Po][rr]=0,C[Po][Or]=28,C[Th][rr]=0,C[Pn][rr]=0,C[Pn][Or]=15,C}const bh=Ig(N.createInt32Array(6,6));class ir{constructor(n,i,s,a){this.token=n,this.mode=i,this.binaryShiftByteCount=s,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,i){let s=this.bitCount,a=this.token;if(n!==this.mode){let c=kl[this.mode][n];a=Ts(a,c&65535,c>>16),s+=c>>16}let l=n===Pn?4:5;return a=Ts(a,i,l),new ir(a,n,0,s+l)}shiftAndAppend(n,i){let s=this.token,a=this.mode===Pn?4:5;return s=Ts(s,bh[this.mode][n],a),s=Ts(s,i,5),new ir(s,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(n){let i=this.token,s=this.mode,a=this.bitCount;if(this.mode===rr||this.mode===Pn){let f=kl[s][Or];i=Ts(i,f&65535,f>>16),a+=f>>16,s=Or}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new ir(i,s,this.binaryShiftByteCount+1,a+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(n+1)),c}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=_g(i,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new ir(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let i=this.bitCount+(kl[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?i+=ir.calculateBinaryShiftCost(n)-ir.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(i+=10),i<=n.bitCount}toBitArray(n){let i=[];for(let a=this.endBinaryShift(n.length).token;a!==null;a=a.getPrevious())i.unshift(a);let s=new U;for(const a of i)a.appendTo(s,n);return s}toString(){return Y.format("%s bits=%d bytes=%d",Ag[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}ir.INITIAL_STATE=new ir(Sg,Or,0,0);function Tg(C){const n=Y.getCharCode(" "),i=Y.getCharCode("."),s=Y.getCharCode(",");C[Or][n]=1;const a=Y.getCharCode("Z"),l=Y.getCharCode("A");for(let A=l;A<=a;A++)C[Or][A]=A-l+2;C[Po][n]=1;const c=Y.getCharCode("z"),f=Y.getCharCode("a");for(let A=f;A<=c;A++)C[Po][A]=A-f+2;C[Pn][n]=1;const g=Y.getCharCode("9"),x=Y.getCharCode("0");for(let A=x;A<=g;A++)C[Pn][A]=A-x+2;C[Pn][s]=12,C[Pn][i]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<E.length;A++)C[Th][Y.getCharCode(E[A])]=A;const _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<_.length;A++)Y.getCharCode(_[A])>0&&(C[rr][Y.getCharCode(_[A])]=A);return C}const Dl=Tg(N.createInt32Array(5,256));class bs{constructor(n){this.text=n}encode(){const n=Y.getCharCode(" "),i=Y.getCharCode(`
`);let s=Ih.singletonList(ir.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let c,f=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case Y.getCharCode("\r"):c=f===i?2:0;break;case Y.getCharCode("."):c=f===n?3:0;break;case Y.getCharCode(","):c=f===n?4:0;break;case Y.getCharCode(":"):c=f===n?5:0;break;default:c=0}c>0?(s=bs.updateStateListForPair(s,l,c),l++):s=this.updateStateListForChar(s,l)}return Ih.min(s,(l,c)=>l.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,i){const s=[];for(let a of n)this.updateStateForChar(a,i,s);return bs.simplifyStates(s)}updateStateForChar(n,i,s){let a=this.text[i]&255,l=Dl[n.getMode()][a]>0,c=null;for(let f=0;f<=rr;f++){let g=Dl[f][a];if(g>0){if(c==null&&(c=n.endBinaryShift(i)),!l||f===n.getMode()||f===Pn){const x=c.latchAndAppend(f,g);s.push(x)}if(!l&&bh[n.getMode()][f]>=0){const x=c.shiftAndAppend(f,g);s.push(x)}}}if(n.getBinaryShiftByteCount()>0||Dl[n.getMode()][a]===0){let f=n.addBinaryShiftChar(i);s.push(f)}}static updateStateListForPair(n,i,s){const a=[];for(let l of n)this.updateStateForPair(l,i,s,a);return this.simplifyStates(a)}static updateStateForPair(n,i,s,a){let l=n.endBinaryShift(i);if(a.push(l.latchAndAppend(rr,s)),n.getMode()!==rr&&a.push(l.shiftAndAppend(rr,s)),s===3||s===4){let c=l.latchAndAppend(Pn,16-s).latchAndAppend(Pn,1);a.push(c)}if(n.getBinaryShiftByteCount()>0){let c=n.addBinaryShiftChar(i).addBinaryShiftChar(i+1);a.push(c)}}static simplifyStates(n){let i=[];for(const s of n){let a=!0;for(const l of i){if(l.isBetterThanOrEqualTo(s)){a=!1;break}s.isBetterThanOrEqualTo(l)&&(i=i.filter(c=>c!==l))}a&&i.push(s)}return i}}class Ue{constructor(){}static encodeBytes(n){return Ue.encode(n,Ue.DEFAULT_EC_PERCENT,Ue.DEFAULT_AZTEC_LAYERS)}static encode(n,i,s){let a=new bs(n).encode(),l=O.truncDivision(a.getSize()*i,100)+11,c=a.getSize()+l,f,g,x,E,_;if(s!==Ue.DEFAULT_AZTEC_LAYERS){if(f=s<0,g=Math.abs(s),g>(f?Ue.MAX_NB_BITS_COMPACT:Ue.MAX_NB_BITS))throw new v(Y.format("Illegal value %s for layers",s));x=Ue.totalBitsInLayer(g,f),E=Ue.WORD_SIZE[g];let Z=x-x%E;if(_=Ue.stuffBits(a,E),_.getSize()+l>Z)throw new v("Data to large for user specified layer");if(f&&_.getSize()>E*64)throw new v("Data to large for user specified layer")}else{E=0,_=null;for(let Z=0;;Z++){if(Z>Ue.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=Z<=3,g=f?Z+1:Z,x=Ue.totalBitsInLayer(g,f),c>x)continue;(_==null||E!==Ue.WORD_SIZE[g])&&(E=Ue.WORD_SIZE[g],_=Ue.stuffBits(a,E));let Pe=x-x%E;if(!(f&&_.getSize()>E*64)&&_.getSize()+l<=Pe)break}}let A=Ue.generateCheckWords(_,x,E),T=_.getSize()/E,M=Ue.generateModeMessage(f,g,T),P=(f?11:14)+g*4,j=new Int32Array(P),W;if(f){W=P;for(let Z=0;Z<j.length;Z++)j[Z]=Z}else{W=P+1+2*O.truncDivision(O.truncDivision(P,2)-1,15);let Z=O.truncDivision(P,2),Pe=O.truncDivision(W,2);for(let Ae=0;Ae<Z;Ae++){let fn=Ae+O.truncDivision(Ae,15);j[Z-Ae-1]=Pe-fn-1,j[Z+Ae]=Pe+fn+1}}let ie=new me(W);for(let Z=0,Pe=0;Z<g;Z++){let Ae=(g-Z)*4+(f?9:12);for(let fn=0;fn<Ae;fn++){let Wn=fn*2;for(let dn=0;dn<2;dn++)A.get(Pe+Wn+dn)&&ie.set(j[Z*2+dn],j[Z*2+fn]),A.get(Pe+Ae*2+Wn+dn)&&ie.set(j[Z*2+fn],j[P-1-Z*2-dn]),A.get(Pe+Ae*4+Wn+dn)&&ie.set(j[P-1-Z*2-dn],j[P-1-Z*2-fn]),A.get(Pe+Ae*6+Wn+dn)&&ie.set(j[P-1-Z*2-fn],j[Z*2+dn])}Pe+=Ae*8}if(Ue.drawModeMessage(ie,f,W,M),f)Ue.drawBullsEye(ie,O.truncDivision(W,2),5);else{Ue.drawBullsEye(ie,O.truncDivision(W,2),7);for(let Z=0,Pe=0;Z<O.truncDivision(P,2)-1;Z+=15,Pe+=16)for(let Ae=O.truncDivision(W,2)&1;Ae<W;Ae+=2)ie.set(O.truncDivision(W,2)-Pe,Ae),ie.set(O.truncDivision(W,2)+Pe,Ae),ie.set(Ae,O.truncDivision(W,2)-Pe),ie.set(Ae,O.truncDivision(W,2)+Pe)}let se=new Sh;return se.setCompact(f),se.setSize(W),se.setLayers(g),se.setCodeWords(T),se.setMatrix(ie),se}static drawBullsEye(n,i,s){for(let a=0;a<s;a+=2)for(let l=i-a;l<=i+a;l++)n.set(l,i-a),n.set(l,i+a),n.set(i-a,l),n.set(i+a,l);n.set(i-s,i-s),n.set(i-s+1,i-s),n.set(i-s,i-s+1),n.set(i+s,i-s),n.set(i+s,i-s+1),n.set(i+s,i+s-1)}static generateModeMessage(n,i,s){let a=new U;return n?(a.appendBits(i-1,2),a.appendBits(s-1,6),a=Ue.generateCheckWords(a,28,4)):(a.appendBits(i-1,5),a.appendBits(s-1,11),a=Ue.generateCheckWords(a,40,4)),a}static drawModeMessage(n,i,s,a){let l=O.truncDivision(s,2);if(i)for(let c=0;c<7;c++){let f=l-3+c;a.get(c)&&n.set(f,l-5),a.get(c+7)&&n.set(l+5,f),a.get(20-c)&&n.set(f,l+5),a.get(27-c)&&n.set(l-5,f)}else for(let c=0;c<10;c++){let f=l-5+c+O.truncDivision(c,5);a.get(c)&&n.set(f,l-7),a.get(c+10)&&n.set(l+7,f),a.get(29-c)&&n.set(f,l+7),a.get(39-c)&&n.set(l-7,f)}}static generateCheckWords(n,i,s){let a=n.getSize()/s,l=new bl(Ue.getGF(s)),c=O.truncDivision(i,s),f=Ue.bitsToWords(n,s,c);l.encode(f,c-a);let g=i%s,x=new U;x.appendBits(0,g);for(const E of Array.from(f))x.appendBits(E,s);return x}static bitsToWords(n,i,s){let a=new Int32Array(s),l,c;for(l=0,c=n.getSize()/i;l<c;l++){let f=0;for(let g=0;g<i;g++)f|=n.get(l*i+g)?1<<i-g-1:0;a[l]=f}return a}static getGF(n){switch(n){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new v("Unsupported word size "+n)}}static stuffBits(n,i){let s=new U,a=n.getSize(),l=(1<<i)-2;for(let c=0;c<a;c+=i){let f=0;for(let g=0;g<i;g++)(c+g>=a||n.get(c+g))&&(f|=1<<i-1-g);(f&l)===l?(s.appendBits(f&l,i),c--):f&l?s.appendBits(f,i):(s.appendBits(f|1,i),c--)}return s}static totalBitsInLayer(n,i){return((i?88:112)+16*n)*n}}Ue.DEFAULT_EC_PERCENT=33,Ue.DEFAULT_AZTEC_LAYERS=0,Ue.MAX_NB_BITS=32,Ue.MAX_NB_BITS_COMPACT=4,Ue.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Lo{encode(n,i,s,a){return this.encodeWithHints(n,i,s,a,null)}encodeWithHints(n,i,s,a,l){let c=Nl.ISO_8859_1,f=Ue.DEFAULT_EC_PERCENT,g=Ue.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Rt.CHARACTER_SET)&&(c=Ah.forName(l.get(Rt.CHARACTER_SET).toString())),l.has(Rt.ERROR_CORRECTION)&&(f=O.parseInt(l.get(Rt.ERROR_CORRECTION).toString())),l.has(Rt.AZTEC_LAYERS)&&(g=O.parseInt(l.get(Rt.AZTEC_LAYERS).toString()))),Lo.encodeLayers(n,i,s,a,c,f,g)}static encodeLayers(n,i,s,a,l,c,f){if(i!==le.AZTEC)throw new v("Can only encode AZTEC, but got "+i);let g=Ue.encode(Y.getBytes(n,l),c,f);return Lo.renderResult(g,s,a)}static renderResult(n,i,s){let a=n.getMatrix();if(a==null)throw new ze;let l=a.getWidth(),c=a.getHeight(),f=Math.max(i,l),g=Math.max(s,c),x=Math.min(f/l,g/c),E=(f-l*x)/2,_=(g-c*x)/2,A=new me(f,g);for(let T=0,M=_;T<c;T++,M+=x)for(let P=0,j=E;P<l;P++,j+=x)a.get(P,T)&&A.setRegion(j,M,x,x);return A}}r.AbstractExpandedDecoder=wl,r.ArgumentException=y,r.ArithmeticException=ct,r.AztecCode=Sh,r.AztecCodeReader=vn,r.AztecCodeWriter=Lo,r.AztecDecoder=Oe,r.AztecDetector=Vn,r.AztecDetectorResult=pt,r.AztecEncoder=Ue,r.AztecHighLevelEncoder=bs,r.AztecPoint=ht,r.BarcodeFormat=le,r.Binarizer=B,r.BinaryBitmap=S,r.BitArray=U,r.BitMatrix=me,r.BitSource=Cl,r.BrowserAztecCodeReader=ln,r.BrowserBarcodeReader=ig,r.BrowserCodeReader=ke,r.BrowserDatamatrixCodeReader=og,r.BrowserMultiFormatReader=xg,r.BrowserPDF417Reader=wg,r.BrowserQRCodeReader=yg,r.BrowserQRCodeSvgWriter=si,r.CharacterSetECI=b,r.ChecksumException=k,r.Code128Reader=te,r.Code39Reader=Et,r.DataMatrixDecodedBitStreamParser=Sr,r.DataMatrixReader=Ir,r.DecodeHintType=q,r.DecoderResult=xe,r.DefaultGridSampler=Rn,r.DetectorResult=Qe,r.EAN13Reader=ei,r.EncodeHintType=Rt,r.Exception=m,r.FormatException=F,r.GenericGF=pe,r.GenericGFPoly=Re,r.GlobalHistogramBinarizer=Ce,r.GridSampler=He,r.GridSamplerInstance=$t,r.HTMLCanvasElementLuminanceSource=ge,r.HybridBinarizer=K,r.ITFReader=We,r.IllegalArgumentException=v,r.IllegalStateException=ze,r.InvertedLuminanceSource=Q,r.LuminanceSource=re,r.MathUtils=_e,r.MultiFormatOneDReader=Ni,r.MultiFormatReader=_h,r.MultiFormatWriter=vg,r.NotFoundException=V,r.OneDReader=st,r.PDF417DecodedBitStreamParser=H,r.PDF417DecoderErrorCorrection=xh,r.PDF417Reader=Ht,r.PDF417ResultMetadata=yh,r.PerspectiveTransform=Mt,r.PlanarYUVLuminanceSource=nr,r.QRCodeByteMatrix=Mo,r.QRCodeDataMask=Dn,r.QRCodeDecodedBitStreamParser=mt,r.QRCodeDecoderErrorCorrectionLevel=nt,r.QRCodeDecoderFormatInformation=Zt,r.QRCodeEncoder=ot,r.QRCodeEncoderQRCode=ii,r.QRCodeMaskUtil=_t,r.QRCodeMatrixUtil=Ee,r.QRCodeMode=ye,r.QRCodeReader=Tr,r.QRCodeVersion=we,r.QRCodeWriter=ki,r.RGBLuminanceSource=Ol,r.RSS14Reader=Ct,r.RSSExpandedReader=$,r.ReaderException=Do,r.ReedSolomonDecoder=Ve,r.ReedSolomonEncoder=bl,r.ReedSolomonException=gt,r.Result=Ie,r.ResultMetadataType=De,r.ResultPoint=ue,r.StringUtils=Y,r.UnsupportedOperationException=G,r.VideoInputDevice=Se,r.WhiteRectangleDetector=zt,r.WriterException=et,r.ZXingArrays=N,r.ZXingCharset=Ah,r.ZXingInteger=O,r.ZXingStandardCharsets=Nl,r.ZXingStringBuilder=ae,r.ZXingStringEncoding=oe,r.ZXingSystem=L,r.createAbstractExpandedDecoder=ph,Object.defineProperty(r,"__esModule",{value:!0})})})(rc,rc.exports);var lt=rc.exports;const km=hc(lt),Dm=Ng({__proto__:null,default:km},[lt]);var V0=function(){function t(e,r,o){if(this.formatMap=new Map([[fe.QR_CODE,lt.BarcodeFormat.QR_CODE],[fe.AZTEC,lt.BarcodeFormat.AZTEC],[fe.CODABAR,lt.BarcodeFormat.CODABAR],[fe.CODE_39,lt.BarcodeFormat.CODE_39],[fe.CODE_93,lt.BarcodeFormat.CODE_93],[fe.CODE_128,lt.BarcodeFormat.CODE_128],[fe.DATA_MATRIX,lt.BarcodeFormat.DATA_MATRIX],[fe.MAXICODE,lt.BarcodeFormat.MAXICODE],[fe.ITF,lt.BarcodeFormat.ITF],[fe.EAN_13,lt.BarcodeFormat.EAN_13],[fe.EAN_8,lt.BarcodeFormat.EAN_8],[fe.PDF_417,lt.BarcodeFormat.PDF_417],[fe.RSS_14,lt.BarcodeFormat.RSS_14],[fe.RSS_EXPANDED,lt.BarcodeFormat.RSS_EXPANDED],[fe.UPC_A,lt.BarcodeFormat.UPC_A],[fe.UPC_E,lt.BarcodeFormat.UPC_E],[fe.UPC_EAN_EXTENSION,lt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Dm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=o;var u=this.createZXingFormats(e),h=new Map;h.set(lt.DecodeHintType.POSSIBLE_FORMATS,u),h.set(lt.DecodeHintType.TRY_HARDER,!1),this.hints=h}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(o,u){try{o(r.decode(e))}catch(h){u(h)}})},t.prototype.decode=function(e){var r=new lt.MultiFormatReader(this.verbose,this.hints),o=new lt.HTMLCanvasElementLuminanceSource(e),u=new lt.BinaryBitmap(new lt.HybridBinarizer(o)),h=r.decode(u);return{text:h.text,format:Td.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,u){e.set(r,o)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],o=0,u=e;o<u.length;o++){var h=u[o];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),Mm=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})},Pm=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,u,h,d;return d={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function w(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(h=m[0]&2?u.return:m[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,m[1])).done)return h;switch(u=0,h&&(m=[m[0]&2,h.value]),m[0]){case 0:case 1:h=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){r.label=m[1];break}if(m[0]===6&&r.label<h[1]){r.label=h[1],h=m;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(m);break}h[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],u=0}finally{o=h=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},H0=function(){function t(e,r,o){if(this.formatMap=new Map([[fe.QR_CODE,"qr_code"],[fe.AZTEC,"aztec"],[fe.CODABAR,"codabar"],[fe.CODE_39,"code_39"],[fe.CODE_93,"code_93"],[fe.CODE_128,"code_128"],[fe.DATA_MATRIX,"data_matrix"],[fe.ITF,"itf"],[fe.EAN_13,"ean_13"],[fe.EAN_8,"ean_8"],[fe.PDF_417,"pdf417"],[fe.UPC_A,"upc_a"],[fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return Mm(this,void 0,void 0,function(){var r,o;return Pm(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=u.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(r),[2,{text:o.rawValue,format:Td.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,o=0,u=0,h=e;u<h.length;u++){var d=h[u],w=d.boundingBox.width*d.boundingBox.height;w>o&&(o=w,r=d)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],o=0,u=e;o<u.length;o++){var h=u[o];this.formatMap.has(h)?r.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,o,u){e.set(r,o)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),W0=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})},G0=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,u,h,d;return d={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function w(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(h=m[0]&2?u.return:m[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,m[1])).done)return h;switch(u=0,h&&(m=[m[0]&2,h.value]),m[0]){case 0:case 1:h=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){r.label=m[1];break}if(m[0]===6&&r.label<h[1]){r.label=h[1],h=m;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(m);break}h[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],u=0}finally{o=h=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Lm=function(){function t(e,r,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,r&&H0.isSupported()?(this.primaryDecoder=new H0(e,o,u),this.secondaryDecoder=new V0(e,o,u)):this.primaryDecoder=new V0(e,o,u)}return t.prototype.decodeAsync=function(e){return W0(this,void 0,void 0,function(){var r;return G0(this,function(o){switch(o.label){case 0:r=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return W0(this,void 0,void 0,function(){var r,o;return G0(this,function(u){switch(u.label){case 0:r=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,o=this.executionResults;r<o.length;r++){var u=o[r];e+=u}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),oh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(o[h]=u[h])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ha=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})},Wa=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,u,h,d;return d={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function w(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(h=m[0]&2?u.return:m[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,m[1])).done)return h;switch(u=0,h&&(m=[m[0]&2,h.value]),m[0]){case 0:case 1:h=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){r.label=m[1];break}if(m[0]===6&&r.label<h[1]){r.label=h[1],h=m;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(m);break}h[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],u=0}finally{o=h=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Od=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var o={advanced:[r]};return this.track.applyConstraints(o)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),Bm=function(t){oh(e,t);function e(r,o){return t.call(this,r,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var o={};o[this.name]=r;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),o=r[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Od),Fm=function(t){oh(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(Bm),Um=function(t){oh(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(Od),jm=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Fm(this.track)},t.prototype.torchFeature=function(){return new Um(this.track)},t}(),zm=function(){function t(e,r,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,o,u){return Ha(this,void 0,void 0,function(){var h,d;return Wa(this,function(w){switch(w.label){case 0:return h=new t(e,r,u),o.aspectRatio?(d={aspectRatio:o.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:w.sent(),w.label=2;case 2:return h.setupSurface(),[2,h]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,o=function(){setTimeout(e,200),r.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Ha(this,void 0,void 0,function(){return Wa(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,o){var u=e.mediaStream.getVideoTracks(),h=u.length,d=0;e.mediaStream.getVideoTracks().forEach(function(w){e.mediaStream.removeTrack(w),w.stop(),++d,d>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new jm(this.getFirstTrackOrFail())},t}(),Vm=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,o){return Ha(this,void 0,void 0,function(){return Wa(this,function(u){return[2,zm.create(e,this.mediaStream,r,o)]})})},t.create=function(e){return Ha(this,void 0,void 0,function(){var r,o;return Wa(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return o=u.sent(),[2,new t(o)]}})})},t}(),X0=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})},Y0=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,u,h,d;return d={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function w(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(h=m[0]&2?u.return:m[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,m[1])).done)return h;switch(u=0,h&&(m=[m[0]&2,h.value]),m[0]){case 0:case 1:h=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){r.label=m[1];break}if(m[0]===6&&r.label<h[1]){r.label=h[1],h=m;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(m);break}h[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],u=0}finally{o=h=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Hm=function(){function t(){}return t.failIfNotSupported=function(){return X0(this,void 0,void 0,function(){return Y0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return X0(this,void 0,void 0,function(){return Y0(this,function(r){return[2,Vm.create(e)]})})},t}(),Wm=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})},Gm=function(t,e){var r={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,u,h,d;return d={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function w(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(r=0)),r;)try{if(o=1,u&&(h=m[0]&2?u.return:m[0]?u.throw||((h=u.return)&&h.call(u),0):u.next)&&!(h=h.call(u,m[1])).done)return h;switch(u=0,h&&(m=[m[0]&2,h.value]),m[0]){case 0:case 1:h=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,u=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(h=r.trys,!(h=h.length>0&&h[h.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){r.label=m[1];break}if(m[0]===6&&r.label<h[1]){r.label=h[1],h=m;break}if(h&&r.label<h[2]){r.label=h[2],r.ops.push(m);break}h[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(y){m=[6,y],u=0}finally{o=h=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},Xm=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=qi.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=qi.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Wm(this,void 0,void 0,function(){var e,r,o,u,h,d,w;return Gm(this,function(p){switch(p.label){case 0:return e=function(m){for(var y=m.getVideoTracks(),v=0,S=y;v<S.length;v++){var k=S[v];k.enabled=!1,k.stop(),m.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=p.sent(),u=[],h=0,d=o;h<d.length;h++)w=d[h],w.kind==="videoinput"&&u.push({id:w.deviceId,label:w.label});return e(r),[2,u]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var o=function(h){for(var d=[],w=0,p=h;w<p.length;w++){var m=p[w];m.kind==="video"&&d.push({id:m.id,label:m.label})}e(d)},u=MediaStreamTrack;u.getSources(o)})},t}(),At;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(At||(At={}));var Ym=function(){function t(){this.state=At.NOT_STARTED,this.onGoingTransactionNewState=At.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===At.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=At.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===At.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=At.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==At.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case At.UNKNOWN:throw"Transition from unknown is not allowed";case At.NOT_STARTED:this.failIfNewStateIs(e,[At.PAUSED]);break;case At.SCANNING:break;case At.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var o=0,u=r;o<u.length;o++){var h=u[o];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),$m=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===At.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==At.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===At.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===At.PAUSED},t}(),Km=function(){function t(){}return t.create=function(){return new $m(new Ym)},t}(),Zm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(o[h]=u[h])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function o(){this.constructor=e}e.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),_n=function(t){Zm(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Om),Qm=function(){function t(e,r){this.logger=r,this.fps=_n.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=_n.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?bd.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!hr(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),qm=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof r=="boolean"?this.verbose=r===!0:r&&(o=r,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new Rm(this.verbose),this.qrcode=new Lm(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Km.create()}return t.prototype.start=function(e,r,o,u){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;u?d=u:d=this.verbose?this.logger.log:function(){};var w=Qm.create(r,this.logger);this.clearElement();var p=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=p,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:_n.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,S=this.stateManagerProxy.startTransition(At.SCANNING);return new Promise(function(k,B){var L=m?w.videoConstraints:v.createVideoConstraints(e);if(!L){S.cancel(),B("videoConstraints should be defined");return}var X={};(!m||w.aspectRatio)&&(X.aspectRatio=w.aspectRatio);var D={onRenderSurfaceReady:function(N,O){v.setupUi(N,O,w),v.isScanning=!0,v.foreverScan(w,o,d)}};Hm.failIfNotSupported().then(function(N){N.create(L).then(function(O){return O.render(h.element,X,D).then(function(U){v.renderedCamera=U,S.execute(),k(null)}).catch(function(U){S.cancel(),B(U)})}).catch(function(O){S.cancel(),B(qi.errorGettingUserMedia(O))})}).catch(function(N){S.cancel(),B(qi.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(At.PAUSED),this.showPausedState(),(hr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(At.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(At.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var h=document.getElementById(_n.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),r.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(o){return o.decodedText})},t.prototype.scanFileV2=function(e,r){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(hr(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,h){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var w=d.width,p=d.height,m=document.getElementById(o.elementId),y=m.clientWidth?m.clientWidth:_n.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:p,_n.FILE_SCAN_MIN_HEIGHT),S=o.computeCanvasDrawConfig(w,p,y,v);if(r){var k=o.createCanvasElement(y,v,"qr-canvas-visible");k.style.display="inline-block",m.appendChild(k);var B=k.getContext("2d");if(!B)throw"Unable to get 2d context from canvas";B.canvas.width=y,B.canvas.height=v,B.drawImage(d,0,0,w,p,S.x,S.y,S.width,S.height)}var L=_n.FILE_SCAN_HIDDEN_CANVAS_PADDING,X=Math.max(d.width,S.width),D=Math.max(d.height,S.height),N=X+2*L,O=D+2*L,U=o.createCanvasElement(N,O);m.appendChild(U);var J=U.getContext("2d");if(!J)throw"Unable to get 2d context from canvas";J.canvas.width=N,J.canvas.height=O,J.drawImage(d,0,0,w,p,L,L,X,D);try{o.qrcode.decodeRobustlyAsync(U).then(function(q){u(z0.createFromQrcodeResult(q))}).catch(h)}catch(q){h("QR code parse error, error = ".concat(q))}},d.onerror=h,d.onabort=h,d.onstalled=h,d.onsuspend=h,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Xm.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!bd.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[fe.QR_CODE,fe.AZTEC,fe.CODABAR,fe.CODE_39,fe.CODE_93,fe.CODE_128,fe.DATA_MATRIX,fe.MAXICODE,fe.ITF,fe.EAN_13,fe.EAN_8,fe.PDF_417,fe.RSS_14,fe.RSS_EXPANDED,fe.UPC_A,fe.UPC_E,fe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,h=e.formatsToSupport;u<h.length;u++){var d=h[u];bm(d)?o.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(hr(e))return!0;if(!hr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(hr(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return hr(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,o){var u=this,h=o.qrbox;this.validateQrboxConfig(h);var d=this.toQrdimensions(e,r,h),w=function(m){if(m<_n.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(_n.MIN_QR_BOX_SIZE,"px.")},p=function(m){return m>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};w(d.width),w(d.height),d.width=p(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,r)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},t.prototype.setupUi=function(e,r,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,o);var u=hr(o.qrbox)?{width:e,height:r}:o.qrbox;this.validateQrboxConfig(u);var h=this.toQrdimensions(e,r,u);h.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=o.isShadedBoxEnabled()&&h.height<=r,w={x:0,y:0,width:e,height:r},p=d?this.getShadedRegionBounds(e,r,h):w,m=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},v=m.getContext("2d",y);v.canvas.width=p.width,v.canvas.height=p.height,this.element.append(m),d&&this.possiblyInsertShadingElement(this.element,e,r,h),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=qi.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,z0.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var h=qi.codeParseError(u);return r(h,Nm.createFrom(h)),!1})},t.prototype.foreverScan=function(e,r,o){var u=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),d=h.videoWidth/h.clientWidth,w=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*d,m=this.qrRegion.height*w,y=this.qrRegion.x*d,v=this.qrRegion.y*w;this.context.drawImage(h,y,v,p,m,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,r,o)},u.getTimeoutFps(e.fps))};this.scanContext(r,o).then(function(k){!k&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(r,o).finally(function(){S()})):S()}).catch(function(k){u.logger.logError("Error happend while scanning context",k),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",o="deviceId",u={user:!0,environment:!0},h="exact",d=function(B){if(B in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(B,"'")},w=Object.keys(e);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var p=Object.keys(e)[0];if(p!==r&&p!==o)throw"Only '".concat(r,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(p===r){var m=e.facingMode;if(typeof m=="string"){if(d(m))return{facingMode:m}}else if(typeof m=="object")if(h in m){if(d(m["".concat(h)]))return{facingMode:{exact:m["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var y=typeof m;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(h in v)return{deviceId:{exact:v["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var S=typeof v;throw"Invalid type of 'deviceId' = ".concat(S)}}}var k=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},t.prototype.computeCanvasDrawConfig=function(e,r,o,u){if(e<=o&&r<=u){var h=(o-e)/2,d=(u-r)/2;return{x:h,y:d,width:e,height:r}}else{var w=e,p=r;return e>o&&(r=o/e*r,e=o),r>u&&(e=u/r*e,r=u),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(p)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,o,u)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?_n.BORDER_SHADER_MATCH_COLOR:_n.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,o){var u=e,h=r,d=document.createElement("canvas");return d.style.width="".concat(u,"px"),d.style.height="".concat(h,"px"),d.style.display="none",d.id=hr(o)?"qr-canvas":o,d},t.prototype.getShadedRegionBounds=function(e,r,o){if(o.width>e||o.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(r-o.height)/2,width:o.width,height:o.height}},t.prototype.possiblyInsertShadingElement=function(e,r,o,u){if(!(r-u.width<1||o-u.height<1)){var h=document.createElement("div");h.style.position="absolute";var d=(r-u.width)/2,w=(o-u.height)/2;if(h.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(_n.SHADED_REGION_ELEMENT_ID),r-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var p=5,m=40;this.insertShaderBorders(h,m,p,-p,null,0,!0),this.insertShaderBorders(h,m,p,-p,null,0,!1),this.insertShaderBorders(h,m,p,null,-p,0,!0),this.insertShaderBorders(h,m,p,null,-p,0,!1),this.insertShaderBorders(h,p,m+p,-p,null,-p,!0),this.insertShaderBorders(h,p,m+p,null,-p,-p,!0),this.insertShaderBorders(h,p,m+p,-p,null,-p,!1),this.insertShaderBorders(h,p,m+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(h)}},t.prototype.insertShaderBorders=function(e,r,o,u,h,d,w){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=_n.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(r,"px"),p.style.height="".concat(o,"px"),u!==null&&(p.style.top="".concat(u,"px")),h!==null&&(p.style.bottom="".concat(h,"px")),w?p.style.left="".concat(d,"px"):p.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),$0;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($0||($0={}));function Jm({onScan:t}){const[e,r]=bt.useState(!1),[o,u]=bt.useState(null);return bt.useEffect(()=>{const h=new qm("reader");return u(h),()=>{h.isScanning&&h.stop().catch(console.error),h.clear().catch(console.error)}},[]),bt.useEffect(()=>o?((async()=>{try{await o.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},d=>{t(d),r(!0),o.pause(!0),setTimeout(()=>{r(!1),o.pause(!1)},2e3)},d=>{(d==null?void 0:d.name)!=="NotFoundException"&&console.error(d)})}catch(d){console.error("Failed to start scanner:",d)}})(),()=>{o.isScanning&&o.stop().catch(console.error)}):void 0,[o,t]),ce.jsxs("div",{className:"mt-4",children:[ce.jsx("div",{id:"reader",className:"w-full h-[300px] max-w-sm mx-auto border rounded-lg overflow-hidden"}),e&&ce.jsx("div",{className:"mt-2 text-center text-sm text-gray-600",children:"Scanner paused for 2 seconds..."})]})}var Nd={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,o){t.exports=o()})(Ut,function r(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},u=!o.document&&!!o.postMessage,h=o.IS_PAPA_WORKER||!1,d={},w=0,p={parse:function(R,b){var G=(b=b||{}).dynamicTyping||!1;if(F(G)&&(b.dynamicTypingFunction=G,G={}),b.dynamicTyping=G,b.transform=!!F(b.transform)&&b.transform,b.worker&&p.WORKERS_SUPPORTED){var oe=function(){if(!p.WORKERS_SUPPORTED)return!1;var ae=(V=o.URL||o.webkitURL||null,Ce=r.toString(),p.BLOB_URL||(p.BLOB_URL=V.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Ce,")();"],{type:"text/javascript"})))),me=new o.Worker(ae),V,Ce;return me.onmessage=N,me.id=w++,d[me.id]=me}();return oe.userStep=b.step,oe.userChunk=b.chunk,oe.userComplete=b.complete,oe.userError=b.error,b.step=F(b.step),b.chunk=F(b.chunk),b.complete=F(b.complete),b.error=F(b.error),delete b.worker,void oe.postMessage({input:R,config:b,workerId:oe.id})}var Y=null;return p.NODE_STREAM_INPUT,typeof R=="string"?(R=function(ae){return ae.charCodeAt(0)===65279?ae.slice(1):ae}(R),Y=b.download?new v(b):new k(b)):R.readable===!0&&F(R.read)&&F(R.on)?Y=new B(b):(o.File&&R instanceof File||R instanceof Object)&&(Y=new S(b)),Y.stream(R)},unparse:function(R,b){var G=!1,oe=!0,Y=",",ae=`\r
`,me='"',V=me+me,Ce=!1,K=null,re=!1;(function(){if(typeof b=="object"){if(typeof b.delimiter!="string"||p.BAD_DELIMITERS.filter(function(ee){return b.delimiter.indexOf(ee)!==-1}).length||(Y=b.delimiter),(typeof b.quotes=="boolean"||typeof b.quotes=="function"||Array.isArray(b.quotes))&&(G=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(Ce=b.skipEmptyLines),typeof b.newline=="string"&&(ae=b.newline),typeof b.quoteChar=="string"&&(me=b.quoteChar),typeof b.header=="boolean"&&(oe=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");K=b.columns}b.escapeChar!==void 0&&(V=b.escapeChar+me),(typeof b.escapeFormulae=="boolean"||b.escapeFormulae instanceof RegExp)&&(re=b.escapeFormulae instanceof RegExp?b.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Q=new RegExp(X(me),"g");if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return ge(null,R,Ce);if(typeof R[0]=="object")return ge(K||Object.keys(R[0]),R,Ce)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||K),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),ge(R.fields||[],R.data||[],Ce);throw new Error("Unable to serialize unrecognized input");function ge(ee,ke,Ie){var Ye="";typeof ee=="string"&&(ee=JSON.parse(ee)),typeof ke=="string"&&(ke=JSON.parse(ke));var le=Array.isArray(ee)&&0<ee.length,Je=!Array.isArray(ke[0]);if(le&&oe){for(var De=0;De<ee.length;De++)0<De&&(Ye+=Y),Ye+=Se(ee[De],De);0<ke.length&&(Ye+=ae)}for(var xe=0;xe<ke.length;xe++){var Le=le?ee.length:ke[xe].length,Re=!1,ct=le?Object.keys(ke[xe]).length===0:ke[xe].length===0;if(Ie&&!le&&(Re=Ie==="greedy"?ke[xe].join("").trim()==="":ke[xe].length===1&&ke[xe][0].length===0),Ie==="greedy"&&le){for(var pe=[],gt=0;gt<Le;gt++){var ze=Je?ee[gt]:gt;pe.push(ke[xe][ze])}Re=pe.join("").trim()===""}if(!Re){for(var Ve=0;Ve<Le;Ve++){0<Ve&&!ct&&(Ye+=Y);var Ke=le&&Je?ee[Ve]:Ve;Ye+=Se(ke[xe][Ke],Ve)}xe<ke.length-1&&(!Ie||0<Le&&!ct)&&(Ye+=ae)}}return Ye}function Se(ee,ke){if(ee==null)return"";if(ee.constructor===Date)return JSON.stringify(ee).slice(1,25);var Ie=!1;re&&typeof ee=="string"&&re.test(ee)&&(ee="'"+ee,Ie=!0);var Ye=ee.toString().replace(Q,V);return(Ie=Ie||G===!0||typeof G=="function"&&G(ee,ke)||Array.isArray(G)&&G[ke]||function(le,Je){for(var De=0;De<Je.length;De++)if(-1<le.indexOf(Je[De]))return!0;return!1}(Ye,p.BAD_DELIMITERS)||-1<Ye.indexOf(Y)||Ye.charAt(0)===" "||Ye.charAt(Ye.length-1)===" ")?me+Ye+me:Ye}}};if(p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!u&&!!o.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=D,p.ParserHandle=L,p.NetworkStreamer=v,p.FileStreamer=S,p.StringStreamer=k,p.ReadableStreamStreamer=B,o.jQuery){var m=o.jQuery;m.fn.parse=function(R){var b=R.config||{},G=[];return this.each(function(ae){if(!(m(this).prop("tagName").toUpperCase()==="INPUT"&&m(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var me=0;me<this.files.length;me++)G.push({file:this.files[me],inputElem:this,instanceConfig:m.extend({},b)})}),oe(),this;function oe(){if(G.length!==0){var ae,me,V,Ce,K=G[0];if(F(R.before)){var re=R.before(K.file,K.inputElem);if(typeof re=="object"){if(re.action==="abort")return ae="AbortError",me=K.file,V=K.inputElem,Ce=re.reason,void(F(R.error)&&R.error({name:ae},me,V,Ce));if(re.action==="skip")return void Y();typeof re.config=="object"&&(K.instanceConfig=m.extend(K.instanceConfig,re.config))}else if(re==="skip")return void Y()}var Q=K.instanceConfig.complete;K.instanceConfig.complete=function(ge){F(Q)&&Q(ge,K.file,K.inputElem),Y()},p.parse(K.file,K.instanceConfig)}else F(R.complete)&&R.complete()}function Y(){G.splice(0,1),oe()}}}function y(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var G=J(b);G.chunkSize=parseInt(G.chunkSize),b.step||b.chunk||(G.chunkSize=null),this._handle=new L(G),(this._handle.streamer=this)._config=G}).call(this,R),this.parseChunk=function(b,G){if(this.isFirstChunk&&F(this._config.beforeFirstChunk)){var oe=this._config.beforeFirstChunk(b);oe!==void 0&&(b=oe)}this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+b;this._partialLine="";var ae=this._handle.parse(Y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var me=ae.meta.cursor;this._finished||(this._partialLine=Y.substring(me-this._baseIndex),this._baseIndex=me),ae&&ae.data&&(this._rowCount+=ae.data.length);var V=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(h)o.postMessage({results:ae,workerId:p.WORKER_ID,finished:V});else if(F(this._config.chunk)&&!G){if(this._config.chunk(ae,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);ae=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ae.data),this._completeResults.errors=this._completeResults.errors.concat(ae.errors),this._completeResults.meta=ae.meta),this._completed||!V||!F(this._config.complete)||ae&&ae.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),V||ae&&ae.meta.paused||this._nextChunk(),ae}this._halted=!0},this._sendError=function(b){F(this._config.error)?this._config.error(b):h&&this._config.error&&o.postMessage({workerId:p.WORKER_ID,error:b,finished:!1})}}function v(R){var b;(R=R||{}).chunkSize||(R.chunkSize=p.RemoteChunkSize),y.call(this,R),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(G){this._input=G,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),u||(b.onload=q(this._chunkLoaded,this),b.onerror=q(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var G=this._config.downloadRequestHeaders;for(var oe in G)b.setRequestHeader(oe,G[oe])}if(this._config.chunkSize){var Y=this._start+this._config.chunkSize-1;b.setRequestHeader("Range","bytes="+this._start+"-"+Y)}try{b.send(this._config.downloadRequestBody)}catch(ae){this._chunkError(ae.message)}u&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:b.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(G){var oe=G.getResponseHeader("Content-Range");return oe===null?-1:parseInt(oe.substring(oe.lastIndexOf("/")+1))}(b),this.parseChunk(b.responseText)))},this._chunkError=function(G){var oe=b.statusText||G;this._sendError(new Error(oe))}}function S(R){var b,G;(R=R||{}).chunkSize||(R.chunkSize=p.LocalChunkSize),y.call(this,R);var oe=typeof FileReader<"u";this.stream=function(Y){this._input=Y,G=Y.slice||Y.webkitSlice||Y.mozSlice,oe?((b=new FileReader).onload=q(this._chunkLoaded,this),b.onerror=q(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input;if(this._config.chunkSize){var ae=Math.min(this._start+this._config.chunkSize,this._input.size);Y=G.call(Y,this._start,ae)}var me=b.readAsText(Y,this._config.encoding);oe||this._chunkLoaded({target:{result:me}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(b.error)}}function k(R){var b;y.call(this,R=R||{}),this.stream=function(G){return b=G,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var G,oe=this._config.chunkSize;return oe?(G=b.substring(0,oe),b=b.substring(oe)):(G=b,b=""),this._finished=!b,this.parseChunk(G)}}}function B(R){y.call(this,R=R||{});var b=[],G=!0,oe=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){oe&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):G=!0},this._streamData=q(function(Y){try{b.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),G&&(G=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(ae){this._streamError(ae)}},this),this._streamError=q(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=q(function(){this._streamCleanUp(),oe=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(R){var b,G,oe,Y=Math.pow(2,53),ae=-Y,me=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ce=this,K=0,re=0,Q=!1,ge=!1,Se=[],ee={data:[],errors:[],meta:{}};if(F(R.step)){var ke=R.step;R.step=function(xe){if(ee=xe,le())Ye();else{if(Ye(),ee.data.length===0)return;K+=xe.data.length,R.preview&&K>R.preview?G.abort():(ee.data=ee.data[0],ke(ee,Ce))}}}function Ie(xe){return R.skipEmptyLines==="greedy"?xe.join("").trim()==="":xe.length===1&&xe[0].length===0}function Ye(){return ee&&oe&&(De("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),oe=!1),R.skipEmptyLines&&(ee.data=ee.data.filter(function(xe){return!Ie(xe)})),le()&&function(){if(!ee)return;function xe(Re,ct){F(R.transformHeader)&&(Re=R.transformHeader(Re,ct)),Se.push(Re)}if(Array.isArray(ee.data[0])){for(var Le=0;le()&&Le<ee.data.length;Le++)ee.data[Le].forEach(xe);ee.data.splice(0,1)}else ee.data.forEach(xe)}(),function(){if(!ee||!R.header&&!R.dynamicTyping&&!R.transform)return ee;function xe(Re,ct){var pe,gt=R.header?{}:[];for(pe=0;pe<Re.length;pe++){var ze=pe,Ve=Re[pe];R.header&&(ze=pe>=Se.length?"__parsed_extra":Se[pe]),R.transform&&(Ve=R.transform(Ve,ze)),Ve=Je(ze,Ve),ze==="__parsed_extra"?(gt[ze]=gt[ze]||[],gt[ze].push(Ve)):gt[ze]=Ve}return R.header&&(pe>Se.length?De("FieldMismatch","TooManyFields","Too many fields: expected "+Se.length+" fields but parsed "+pe,re+ct):pe<Se.length&&De("FieldMismatch","TooFewFields","Too few fields: expected "+Se.length+" fields but parsed "+pe,re+ct)),gt}var Le=1;return!ee.data.length||Array.isArray(ee.data[0])?(ee.data=ee.data.map(xe),Le=ee.data.length):ee.data=xe(ee.data,0),R.header&&ee.meta&&(ee.meta.fields=Se),re+=Le,ee}()}function le(){return R.header&&Se.length===0}function Je(xe,Le){return Re=xe,R.dynamicTypingFunction&&R.dynamicTyping[Re]===void 0&&(R.dynamicTyping[Re]=R.dynamicTypingFunction(Re)),(R.dynamicTyping[Re]||R.dynamicTyping)===!0?Le==="true"||Le==="TRUE"||Le!=="false"&&Le!=="FALSE"&&(function(ct){if(me.test(ct)){var pe=parseFloat(ct);if(ae<pe&&pe<Y)return!0}return!1}(Le)?parseFloat(Le):V.test(Le)?new Date(Le):Le===""?null:Le):Le;var Re}function De(xe,Le,Re,ct){var pe={type:xe,code:Le,message:Re};ct!==void 0&&(pe.row=ct),ee.errors.push(pe)}this.parse=function(xe,Le,Re){var ct=R.quoteChar||'"';if(R.newline||(R.newline=function(ze,Ve){ze=ze.substring(0,1048576);var Ke=new RegExp(X(Ve)+"([^]*?)"+X(Ve),"gm"),Oe=(ze=ze.replace(Ke,"")).split("\r"),_e=ze.split(`
`),an=1<_e.length&&_e[0].length<Oe[0].length;if(Oe.length===1||an)return`
`;for(var ue=0,Qe=0;Qe<Oe.length;Qe++)Oe[Qe][0]===`
`&&ue++;return ue>=Oe.length/2?`\r
`:"\r"}(xe,ct)),oe=!1,R.delimiter)F(R.delimiter)&&(R.delimiter=R.delimiter(xe),ee.meta.delimiter=R.delimiter);else{var pe=function(ze,Ve,Ke,Oe,_e){var an,ue,Qe,pt;_e=_e||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var zt=0;zt<_e.length;zt++){var He=_e[zt],Mt=0,Rn=0,$t=0;Qe=void 0;for(var ht=new D({comments:Oe,delimiter:He,newline:Ve,preview:10}).parse(ze),Vn=0;Vn<ht.data.length;Vn++)if(Ke&&Ie(ht.data[Vn]))$t++;else{var vn=ht.data[Vn].length;Rn+=vn,Qe!==void 0?0<vn&&(Mt+=Math.abs(vn-Qe),Qe=vn):Qe=vn}0<ht.data.length&&(Rn/=ht.data.length-$t),(ue===void 0||Mt<=ue)&&(pt===void 0||pt<Rn)&&1.99<Rn&&(ue=Mt,an=He,pt=Rn)}return{successful:!!(R.delimiter=an),bestDelimiter:an}}(xe,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess);pe.successful?R.delimiter=pe.bestDelimiter:(oe=!0,R.delimiter=p.DefaultDelimiter),ee.meta.delimiter=R.delimiter}var gt=J(R);return R.preview&&R.header&&gt.preview++,b=xe,G=new D(gt),ee=G.parse(b,Le,Re),Ye(),Q?{meta:{paused:!0}}:ee||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,G.abort(),b=F(R.chunk)?"":b.substring(G.getCharIndex())},this.resume=function(){Ce.streamer._halted?(Q=!1,Ce.streamer.parseChunk(b,!0)):setTimeout(Ce.resume,3)},this.aborted=function(){return ge},this.abort=function(){ge=!0,G.abort(),ee.meta.aborted=!0,F(R.complete)&&R.complete(ee),b=""}}function X(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(R){var b,G=(R=R||{}).delimiter,oe=R.newline,Y=R.comments,ae=R.step,me=R.preview,V=R.fastMode,Ce=b=R.quoteChar===void 0||R.quoteChar===null?'"':R.quoteChar;if(R.escapeChar!==void 0&&(Ce=R.escapeChar),(typeof G!="string"||-1<p.BAD_DELIMITERS.indexOf(G))&&(G=","),Y===G)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<p.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),oe!==`
`&&oe!=="\r"&&oe!==`\r
`&&(oe=`
`);var K=0,re=!1;this.parse=function(Q,ge,Se){if(typeof Q!="string")throw new Error("Input must be a string");var ee=Q.length,ke=G.length,Ie=oe.length,Ye=Y.length,le=F(ae),Je=[],De=[],xe=[],Le=K=0;if(!Q)return ln();if(R.header&&!ge){var Re=Q.split(oe)[0].split(G),ct=[],pe={},gt=!1;for(var ze in Re){var Ve=Re[ze];F(R.transformHeader)&&(Ve=R.transformHeader(Ve,ze));var Ke=Ve,Oe=pe[Ve]||0;for(0<Oe&&(gt=!0,Ke=Ve+"_"+Oe),pe[Ve]=Oe+1;ct.includes(Ke);)Ke=Ke+"_"+Oe;ct.push(Ke)}if(gt){var _e=Q.split(oe);_e[0]=ct.join(G),Q=_e.join(oe)}}if(V||V!==!1&&Q.indexOf(b)===-1){for(var an=Q.split(oe),ue=0;ue<an.length;ue++){if(xe=an[ue],K+=xe.length,ue!==an.length-1)K+=oe.length;else if(Se)return ln();if(!Y||xe.substring(0,Ye)!==Y){if(le){if(Je=[],$t(xe.split(G)),st(),re)return ln()}else $t(xe.split(G));if(me&&me<=ue)return Je=Je.slice(0,me),ln(!0)}}return ln()}for(var Qe=Q.indexOf(G,K),pt=Q.indexOf(oe,K),zt=new RegExp(X(Ce)+X(b),"g"),He=Q.indexOf(b,K);;)if(Q[K]!==b)if(Y&&xe.length===0&&Q.substring(K,K+Ye)===Y){if(pt===-1)return ln();K=pt+Ie,pt=Q.indexOf(oe,K),Qe=Q.indexOf(G,K)}else if(Qe!==-1&&(Qe<pt||pt===-1))xe.push(Q.substring(K,Qe)),K=Qe+ke,Qe=Q.indexOf(G,K);else{if(pt===-1)break;if(xe.push(Q.substring(K,pt)),vn(pt+Ie),le&&(st(),re))return ln();if(me&&Je.length>=me)return ln(!0)}else for(He=K,K++;;){if((He=Q.indexOf(b,He+1))===-1)return Se||De.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Je.length,index:K}),Vn();if(He===ee-1)return Vn(Q.substring(K,He).replace(zt,b));if(b!==Ce||Q[He+1]!==Ce){if(b===Ce||He===0||Q[He-1]!==Ce){Qe!==-1&&Qe<He+1&&(Qe=Q.indexOf(G,He+1)),pt!==-1&&pt<He+1&&(pt=Q.indexOf(oe,He+1));var Mt=ht(pt===-1?Qe:Math.min(Qe,pt));if(Q.substr(He+1+Mt,ke)===G){xe.push(Q.substring(K,He).replace(zt,b)),Q[K=He+1+Mt+ke]!==b&&(He=Q.indexOf(b,K)),Qe=Q.indexOf(G,K),pt=Q.indexOf(oe,K);break}var Rn=ht(pt);if(Q.substring(He+1+Rn,He+1+Rn+Ie)===oe){if(xe.push(Q.substring(K,He).replace(zt,b)),vn(He+1+Rn+Ie),Qe=Q.indexOf(G,K),He=Q.indexOf(b,K),le&&(st(),re))return ln();if(me&&Je.length>=me)return ln(!0);break}De.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Je.length,index:K}),He++}}else He++}return Vn();function $t(te){Je.push(te),Le=K}function ht(te){var Et=0;if(te!==-1){var We=Q.substring(He+1,te);We&&We.trim()===""&&(Et=We.length)}return Et}function Vn(te){return Se||(te===void 0&&(te=Q.substring(K)),xe.push(te),K=ee,$t(xe),le&&st()),ln()}function vn(te){K=te,$t(xe),xe=[],pt=Q.indexOf(oe,K)}function ln(te){return{data:Je,errors:De,meta:{delimiter:G,linebreak:oe,aborted:re,truncated:!!te,cursor:Le+(ge||0)}}}function st(){ae(ln()),Je=[],De=[]}},this.abort=function(){re=!0},this.getCharIndex=function(){return K}}function N(R){var b=R.data,G=d[b.workerId],oe=!1;if(b.error)G.userError(b.error,b.file);else if(b.results&&b.results.data){var Y={abort:function(){oe=!0,O(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(F(G.userStep)){for(var ae=0;ae<b.results.data.length&&(G.userStep({data:b.results.data[ae],errors:b.results.errors,meta:b.results.meta},Y),!oe);ae++);delete b.results}else F(G.userChunk)&&(G.userChunk(b.results,Y,b.file),delete b.results)}b.finished&&!oe&&O(b.workerId,b.results)}function O(R,b){var G=d[R];F(G.userComplete)&&G.userComplete(b),G.terminate(),delete d[R]}function U(){throw new Error("Not implemented.")}function J(R){if(typeof R!="object"||R===null)return R;var b=Array.isArray(R)?[]:{};for(var G in R)b[G]=J(R[G]);return b}function q(R,b){return function(){R.apply(b,arguments)}}function F(R){return typeof R=="function"}return h&&(o.onmessage=function(R){var b=R.data;if(p.WORKER_ID===void 0&&b&&(p.WORKER_ID=b.workerId),typeof b.input=="string")o.postMessage({workerId:p.WORKER_ID,results:p.parse(b.input,b.config),finished:!0});else if(o.File&&b.input instanceof File||b.input instanceof Object){var G=p.parse(b.input,b.config);G&&o.postMessage({workerId:p.WORKER_ID,results:G,finished:!0})}}),(v.prototype=Object.create(y.prototype)).constructor=v,(S.prototype=Object.create(y.prototype)).constructor=S,(k.prototype=Object.create(k.prototype)).constructor=k,(B.prototype=Object.create(y.prototype)).constructor=B,p})})(Nd);var ex=Nd.exports;const tx=hc(ex);function nx({onImport:t}){const e=bt.useRef(null),r=o=>{var h;const u=(h=o.target.files)==null?void 0:h[0];u&&tx.parse(u,{header:!0,complete:d=>{const w=d.data.filter(p=>p.name&&p.email).map(p=>({name:p.name,email:p.email}));t(w)}})};return ce.jsxs("div",{children:[ce.jsx("input",{type:"file",ref:e,onChange:r,accept:".csv",className:"hidden"}),ce.jsxs("button",{onClick:()=>{var o;return(o=e.current)==null?void 0:o.click()},className:"flex items-center gap-2 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700",children:[ce.jsx(Sm,{className:"w-5 h-5"}),"Import CSV"]})]})}const rx="modulepreload",ix=function(t){return"/%3CJoshTest%3E/"+t},K0={},ds=function(e,r,o){let u=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),w=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));u=Promise.allSettled(r.map(p=>{if(p=ix(p),p in K0)return;K0[p]=!0;const m=p.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":rx,m||(v.as="script"),v.crossOrigin="",v.href=p,w&&v.setAttribute("nonce",w),document.head.appendChild(v),m)return new Promise((S,k)=>{v.addEventListener("load",S),v.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function h(d){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=d,window.dispatchEvent(w),!w.defaultPrevented)throw d}return u.then(d=>{for(const w of d||[])w.status==="rejected"&&h(w.reason);return e().catch(h)})},sx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ds(async()=>{const{default:o}=await Promise.resolve().then(()=>ws);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)};class ah extends Error{constructor(e,r="FunctionsError",o){super(e),this.name=r,this.context=o}}class ox extends ah{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ax extends ah{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lx extends ah{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ic||(ic={}));var ux=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};class cx{constructor(e,{headers:r={},customFetch:o,region:u=ic.Any}={}){this.url=e,this.headers=r,this.region=u,this.fetch=sx(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var o;return ux(this,void 0,void 0,function*(){try{const{headers:u,method:h,body:d}=r;let w={},{region:p}=r;p||(p=this.region),p&&p!=="any"&&(w["x-region"]=p);let m;d&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",m=d):typeof d=="string"?(w["Content-Type"]="text/plain",m=d):typeof FormData<"u"&&d instanceof FormData?m=d:(w["Content-Type"]="application/json",m=JSON.stringify(d)));const y=yield this.fetch(`${this.url}/${e}`,{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),u),body:m}).catch(B=>{throw new ox(B)}),v=y.headers.get("x-relay-error");if(v&&v==="true")throw new ax(y);if(!y.ok)throw new lx(y);let S=((o=y.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield y.json():S==="application/octet-stream"?k=yield y.blob():S==="text/event-stream"?k=y:S==="multipart/form-data"?k=yield y.formData():k=yield y.text(),{data:k,error:null}}catch(u){return{data:null,error:u}}})}}var mn={},lh={},ll={},Io={},ul={},cl={},hx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gs=hx();const fx=gs.fetch,Rd=gs.fetch.bind(gs),kd=gs.Headers,dx=gs.Request,gx=gs.Response,ws=Object.freeze(Object.defineProperty({__proto__:null,Headers:kd,Request:dx,Response:gx,default:Rd,fetch:fx},Symbol.toStringTag,{value:"Module"})),px=Rg(ws);var hl={};Object.defineProperty(hl,"__esModule",{value:!0});let mx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};hl.default=mx;var Dd=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cl,"__esModule",{value:!0});const xx=Dd(px),wx=Dd(hl);let yx=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=xx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var d,w,p;let m=null,y=null,v=null,S=h.status,k=h.statusText;if(h.ok){if(this.method!=="HEAD"){const D=await h.text();D===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=D:y=JSON.parse(D))}const L=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),X=(w=h.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");L&&X&&X.length>1&&(v=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,S=406,k="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const L=await h.text();try{m=JSON.parse(L),Array.isArray(m)&&h.status===404&&(y=[],m=null,S=200,k="OK")}catch{h.status===404&&L===""?(S=204,k="No Content"):m={message:L}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,S=200,k="OK"),m&&this.shouldThrowOnError)throw new wx.default(m)}return{error:m,data:y,count:v,status:S,statusText:k}});return this.shouldThrowOnError||(u=u.catch(h=>{var d,w,p;return{error:{message:`${(d=h==null?void 0:h.name)!==null&&d!==void 0?d:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(w=h==null?void 0:h.stack)!==null&&w!==void 0?w:""}`,hint:"",code:`${(p=h==null?void 0:h.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),u.then(e,r)}};cl.default=yx;var Ex=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ul,"__esModule",{value:!0});const vx=Ex(cl);let Cx=class extends vx.default{select(e){let r=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!r?"":(u==='"'&&(r=!r),u)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:o,foreignTable:u,referencedTable:h=u}={}){const d=h?`${h}.order`:"order",w=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${w?`${w},`:""}${e}.${r?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:o=r}={}){const u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${e}`),this}range(e,r,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"offset":`${u}.offset`,d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${e}`),this.url.searchParams.set(d,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:o=!1,buffers:u=!1,wal:h=!1,format:d="text"}={}){var w;const p=[e?"analyze":null,r?"verbose":null,o?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),m=(w=this.headers.Accept)!==null&&w!==void 0?w:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${m}"; options=${p};`,d==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ul.default=Cx;var _x=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Io,"__esModule",{value:!0});const Ax=_x(ul);let Sx=class extends Ax.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const o=Array.from(new Set(r)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(e,`in.(${o})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:o,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(e,`${h}fts${d}.${r}`),this}match(e){return Object.entries(e).forEach(([r,o])=>{this.url.searchParams.append(r,`eq.${o}`)}),this}not(e,r,o){return this.url.searchParams.append(e,`not.${r}.${o}`),this}or(e,{foreignTable:r,referencedTable:o=r}={}){const u=o?`${o}.or`:"or";return this.url.searchParams.append(u,`(${e})`),this}filter(e,r,o){return this.url.searchParams.append(e,`${r}.${o}`),this}};Io.default=Sx;var Ix=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});const Bs=Ix(Io);let Tx=class{constructor(e,{headers:r={},schema:o,fetch:u}){this.url=e,this.headers=r,this.schema=o,this.fetch=u}select(e,{head:r=!1,count:o}={}){const u=r?"HEAD":"GET";let h=!1;const d=(e??"*").split("").map(w=>/\s/.test(w)&&!h?"":(w==='"'&&(h=!h),w)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new Bs.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:o=!0}={}){const u="POST",h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),r&&h.push(`count=${r}`),o||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const d=e.reduce((w,p)=>w.concat(Object.keys(p)),[]);if(d.length>0){const w=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",w.join(","))}}return new Bs.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:o=!1,count:u,defaultToNull:h=!0}={}){const d="POST",w=[`resolution=${o?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&w.push(this.headers.Prefer),u&&w.push(`count=${u}`),h||w.push("missing=default"),this.headers.Prefer=w.join(","),Array.isArray(e)){const p=e.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",m.join(","))}}return new Bs.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const o="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),r&&u.push(`count=${r}`),this.headers.Prefer=u.join(","),new Bs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",o=[];return e&&o.push(`count=${e}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Bs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ll.default=Tx;var fl={},dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.version=void 0;dl.version="0.0.0-automated";Object.defineProperty(fl,"__esModule",{value:!0});fl.DEFAULT_HEADERS=void 0;const bx=dl;fl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${bx.version}`};var Md=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lh,"__esModule",{value:!0});const Ox=Md(ll),Nx=Md(Io),Rx=fl;let kx=class Pd{constructor(e,{headers:r={},schema:o,fetch:u}={}){this.url=e,this.headers=Object.assign(Object.assign({},Rx.DEFAULT_HEADERS),r),this.schemaName=o,this.fetch=u}from(e){const r=new URL(`${this.url}/${e}`);return new Ox.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Pd(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:o=!1,get:u=!1,count:h}={}){let d;const w=new URL(`${this.url}/rpc/${e}`);let p;o||u?(d=o?"HEAD":"GET",Object.entries(r).filter(([y,v])=>v!==void 0).map(([y,v])=>[y,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([y,v])=>{w.searchParams.append(y,v)})):(d="POST",p=r);const m=Object.assign({},this.headers);return h&&(m.Prefer=`count=${h}`),new Nx.default({method:d,url:w,headers:m,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}};lh.default=kx;var ys=Ut&&Ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mn,"__esModule",{value:!0});mn.PostgrestError=mn.PostgrestBuilder=mn.PostgrestTransformBuilder=mn.PostgrestFilterBuilder=mn.PostgrestQueryBuilder=mn.PostgrestClient=void 0;const Ld=ys(lh);mn.PostgrestClient=Ld.default;const Bd=ys(ll);mn.PostgrestQueryBuilder=Bd.default;const Fd=ys(Io);mn.PostgrestFilterBuilder=Fd.default;const Ud=ys(ul);mn.PostgrestTransformBuilder=Ud.default;const jd=ys(cl);mn.PostgrestBuilder=jd.default;const zd=ys(hl);mn.PostgrestError=zd.default;var Dx=mn.default={PostgrestClient:Ld.default,PostgrestQueryBuilder:Bd.default,PostgrestFilterBuilder:Fd.default,PostgrestTransformBuilder:Ud.default,PostgrestBuilder:jd.default,PostgrestError:zd.default};const{PostgrestClient:Mx,PostgrestQueryBuilder:yy,PostgrestFilterBuilder:Ey,PostgrestTransformBuilder:vy,PostgrestBuilder:Cy,PostgrestError:_y}=Dx,Px="2.11.2",Lx={"X-Client-Info":`realtime-js/${Px}`},Bx="1.0.0",Vd=1e4,Fx=1e3;var ss;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ss||(ss={}));var An;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(An||(An={}));var $n;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($n||($n={}));var sc;(function(t){t.websocket="websocket"})(sc||(sc={}));var ci;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ci||(ci={}));class Ux{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,r,o)}_decodeBroadcast(e,r,o){const u=r.getUint8(1),h=r.getUint8(2);let d=this.HEADER_LENGTH+2;const w=o.decode(e.slice(d,d+u));d=d+u;const p=o.decode(e.slice(d,d+h));d=d+h;const m=JSON.parse(o.decode(e.slice(d,e.byteLength)));return{ref:null,topic:w,event:p,payload:m}}}class Hd{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const Z0=(t,e,r={})=>{var o;const u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(e).reduce((h,d)=>(h[d]=jx(d,t,e,u),h),{})},jx=(t,e,r,o)=>{const u=e.find(w=>w.name===t),h=u==null?void 0:u.type,d=r[t];return h&&!o.includes(h)?Wd(h,d):oc(d)},Wd=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Wx(e,r)}switch(t){case rt.bool:return zx(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return Vx(e);case rt.json:case rt.jsonb:return Hx(e);case rt.timestamp:return Gx(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return oc(e);default:return oc(e)}},oc=t=>t,zx=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Vx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Hx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Wx=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,o=t[r];if(t[0]==="{"&&o==="}"){let h;const d=t.slice(1,r);try{h=JSON.parse("["+d+"]")}catch{h=d?d.split(","):[]}return h.map(w=>Wd(e,w))}return t},Gx=t=>typeof t=="string"?t.replace(" ","T"):t,Gd=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ou{constructor(e,r,o={},u=Vd){this.channel=e,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var o;return this._hasReceived(e)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Q0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Q0||(Q0={}));class eo{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:h,onLeave:d,onSync:w}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eo.syncState(this.state,u,h,d),this.pendingDiffs.forEach(p=>{this.state=eo.syncDiff(this.state,p,h,d)}),this.pendingDiffs=[],w()}),this.channel._on(o.diff,{},u=>{const{onJoin:h,onLeave:d,onSync:w}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=eo.syncDiff(this.state,u,h,d),w())}),this.onJoin((u,h,d)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:d})}),this.onLeave((u,h,d)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,o,u){const h=this.cloneDeep(e),d=this.transformState(r),w={},p={};return this.map(h,(m,y)=>{d[m]||(p[m]=y)}),this.map(d,(m,y)=>{const v=h[m];if(v){const S=y.map(X=>X.presence_ref),k=v.map(X=>X.presence_ref),B=y.filter(X=>k.indexOf(X.presence_ref)<0),L=v.filter(X=>S.indexOf(X.presence_ref)<0);B.length>0&&(w[m]=B),L.length>0&&(p[m]=L)}else w[m]=y}),this.syncDiff(h,{joins:w,leaves:p},o,u)}static syncDiff(e,r,o,u){const{joins:h,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(h,(w,p)=>{var m;const y=(m=e[w])!==null&&m!==void 0?m:[];if(e[w]=this.cloneDeep(p),y.length>0){const v=e[w].map(k=>k.presence_ref),S=y.filter(k=>v.indexOf(k.presence_ref)<0);e[w].unshift(...S)}o(w,y,p)}),this.map(d,(w,p)=>{let m=e[w];if(!m)return;const y=p.map(v=>v.presence_ref);m=m.filter(v=>y.indexOf(v.presence_ref)<0),e[w]=m,u(w,m,p),m.length===0&&delete e[w]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(o=>r(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,o)=>{const u=e[o];return"metas"in u?r[o]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[o]=u,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(q0||(q0={}));var J0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(J0||(J0={}));var dr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class uh{constructor(e,r={config:{}},o){this.topic=e,this.params=r,this.socket=o,this.bindings={},this.state=An.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ou(this,$n.join,this.params,this.timeout),this.rejoinTimer=new Hd(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=An.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=An.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this._on($n.reply,{},(u,h)=>{this._trigger(this._replyEventName(h),u)}),this.presence=new eo(this),this.broadcastEndpointURL=Gd(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var o,u;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:h,presence:d,private:w}}=this.params;this._onError(y=>e==null?void 0:e(dr.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(dr.CLOSED));const p={},m={broadcast:h,presence:d,postgres_changes:(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(y=>y.filter))!==null&&u!==void 0?u:[],private:w};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var v;if(this.socket.setAuth(),y===void 0){e==null||e(dr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,k=(v=S==null?void 0:S.length)!==null&&v!==void 0?v:0,B=[];for(let L=0;L<k;L++){const X=S[L],{filter:{event:D,schema:N,table:O,filter:U}}=X,J=y&&y[L];if(J&&J.event===D&&J.schema===N&&J.table===O&&J.filter===U)B.push(Object.assign(Object.assign({},X),{id:J.id}));else{this.unsubscribe(),e==null||e(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=B,e&&e(dr.SUBSCRIBED);return}}).receive("error",y=>{e==null||e(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,o){return this._on(e,r,o)}async send(e,r={}){var o,u;if(!this._canPush()&&e.type==="broadcast"){const{event:h,payload:d}=e,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=m.body)===null||u===void 0?void 0:u.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var d,w,p;const m=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(w=(d=this.params)===null||d===void 0?void 0:d.config)===null||w===void 0?void 0:w.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),m.receive("ok",()=>h("ok")),m.receive("error",()=>h("error")),m.receive("timeout",()=>h("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=An.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(o=>{const u=new ou(this,$n.leave,{},e);u.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),u.send(),this._canPush()||u.trigger("ok",{})})}async _fetchWithTimeout(e,r,o){const u=new AbortController,h=setTimeout(()=>u.abort(),o),d=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(h),d}_push(e,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new ou(this,e,r,o);return this._canPush()?u.send():(u.startTimeout(),this.pushBuffer.push(u)),u}_onMessage(e,r,o){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,o){var u,h;const d=e.toLocaleLowerCase(),{close:w,error:p,leave:m,join:y}=$n;if(o&&[w,p,m,y].indexOf(d)>=0&&o!==this._joinRef())return;let S=this._onMessage(d,r,o);if(r&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(k=>{var B,L,X;return((B=k.filter)===null||B===void 0?void 0:B.event)==="*"||((X=(L=k.filter)===null||L===void 0?void 0:L.event)===null||X===void 0?void 0:X.toLocaleLowerCase())===d}).map(k=>k.callback(S,o)):(h=this.bindings[d])===null||h===void 0||h.filter(k=>{var B,L,X,D,N,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in k){const U=k.id,J=(B=k.filter)===null||B===void 0?void 0:B.event;return U&&((L=r.ids)===null||L===void 0?void 0:L.includes(U))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((X=r.data)===null||X===void 0?void 0:X.type.toLocaleLowerCase()))}else{const U=(N=(D=k==null?void 0:k.filter)===null||D===void 0?void 0:D.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return U==="*"||U===((O=r==null?void 0:r.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===d}).map(k=>{if(typeof S=="object"&&"ids"in S){const B=S.data,{schema:L,table:X,commit_timestamp:D,type:N,errors:O}=B;S=Object.assign(Object.assign({},{schema:L,table:X,commit_timestamp:D,eventType:N,new:{},old:{},errors:O}),this._getPayloadRecords(B))}k.callback(S,o)})}_isClosed(){return this.state===An.closed}_isJoined(){return this.state===An.joined}_isJoining(){return this.state===An.joining}_isLeaving(){return this.state===An.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,o){const u=e.toLocaleLowerCase(),h={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(e,r){const o=e.toLocaleLowerCase();return this.bindings[o]=this.bindings[o].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&uh.isEqual(u.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const o in e)if(e[o]!==r[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($n.close,{},e)}_onError(e){this._on($n.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=An.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Z0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Z0(e.columns,e.old_record)),r}}const Xx=()=>{},Yx=typeof WebSocket<"u",$x=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kx{constructor(e,r){var o;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Lx,this.params={},this.timeout=Vd,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Xx,this.conn=null,this.sendBuffer=[],this.serializer=new Ux,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=h=>{let d;return h?d=h:typeof fetch>"u"?d=(...w)=>ds(async()=>{const{default:p}=await Promise.resolve().then(()=>ws);return{default:p}},void 0).then(({default:p})=>p(...w)):d=fetch,(...w)=>d(...w)},this.endPoint=`${e}/${sc.websocket}`,this.httpEndpoint=Gd(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const u=(o=r==null?void 0:r.params)===null||o===void 0?void 0:o.apikey;if(u&&(this.accessTokenValue=u,this.apiKey=u),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:h=>[1e3,2e3,5e3,1e4][h-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(h,d)=>d(JSON.stringify(h)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hd(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Yx){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Zx(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ds(async()=>{const{default:e}=await import("./browser-Cd7wX0uG.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bx}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,o){this.logger(e,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case ss.connecting:return ci.Connecting;case ss.open:return ci.Open;case ss.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}channel(e,r={config:{}}){const o=new uh(`realtime:${e}`,r,this);return this.channels.push(o),o}push(e){const{topic:r,event:o,payload:u,ref:h}=e,d=()=>{this.encode(e,w=>{var p;(p=this.conn)===null||p===void 0||p.send(w)})};this.log("push",`${r} ${o} (${h})`,u),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let o=null;try{o=JSON.parse(atob(r.split(".")[1]))}catch{}if(o&&o.exp&&!(Math.floor(Date.now()/1e3)-o.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${o.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${o.exp}`);this.accessTokenValue=r,this.channels.forEach(u=>{r&&u.updateJoinPayload({access_token:r}),u.joinedOnce&&u._isJoined()&&u._push($n.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Fx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:o,event:u,payload:h,ref:d}=r;d&&d===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${h.status||""} ${o} ${u} ${d&&"("+d+")"||""}`,h),this.channels.filter(w=>w._isMember(o)).forEach(w=>w._trigger(u,h,d)),this.stateChangeCallbacks.message.forEach(w=>w(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($n.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const o=e.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${e}${o}${u}`}_workerObjectUrl(e){let r;if(e)r=e;else{const o=new Blob([$x],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}}class Zx{constructor(e,r,o){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ss.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=o.close}}class ch extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Qx extends ch{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ac extends ch{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var qx=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};const Xd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ds(async()=>{const{default:o}=await Promise.resolve().then(()=>ws);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},Jx=()=>qx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ds(()=>Promise.resolve().then(()=>ws),void 0)).Response:Response}),lc=t=>{if(Array.isArray(t))return t.map(r=>lc(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,o])=>{const u=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));e[u]=lc(o)}),e};var Si=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};const au=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ew=(t,e,r)=>Si(void 0,void 0,void 0,function*(){const o=yield Jx();t instanceof o&&!(r!=null&&r.noResolveJson)?t.json().then(u=>{e(new Qx(au(u),t.status||500))}).catch(u=>{e(new ac(au(u),u))}):e(new ac(au(t),t))}),tw=(t,e,r,o)=>{const u={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o&&(u.body=JSON.stringify(o)),Object.assign(Object.assign({},u),r))};function To(t,e,r,o,u,h){return Si(this,void 0,void 0,function*(){return new Promise((d,w)=>{t(r,tw(e,o,u,h)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>ew(p,w,o))})})}function Ga(t,e,r,o){return Si(this,void 0,void 0,function*(){return To(t,"GET",e,r,o)})}function Pr(t,e,r,o,u){return Si(this,void 0,void 0,function*(){return To(t,"POST",e,o,u,r)})}function nw(t,e,r,o,u){return Si(this,void 0,void 0,function*(){return To(t,"PUT",e,o,u,r)})}function rw(t,e,r,o){return Si(this,void 0,void 0,function*(){return To(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),o)})}function Yd(t,e,r,o,u){return Si(this,void 0,void 0,function*(){return To(t,"DELETE",e,o,u,r)})}var gn=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};const iw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sw{constructor(e,r={},o,u){this.url=e,this.headers=r,this.bucketId=o,this.fetch=Xd(u)}uploadOrUpdate(e,r,o,u){return gn(this,void 0,void 0,function*(){try{let h;const d=Object.assign(Object.assign({},e1),u);let w=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&o instanceof Blob?(h=new FormData,h.append("cacheControl",d.cacheControl),p&&h.append("metadata",this.encodeMetadata(p)),h.append("",o)):typeof FormData<"u"&&o instanceof FormData?(h=o,h.append("cacheControl",d.cacheControl),p&&h.append("metadata",this.encodeMetadata(p))):(h=o,w["cache-control"]=`max-age=${d.cacheControl}`,w["content-type"]=d.contentType,p&&(w["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),u!=null&&u.headers&&(w=Object.assign(Object.assign({},w),u.headers));const m=this._removeEmptyFolders(r),y=this._getFinalPath(m),v=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:e,body:h,headers:w},d!=null&&d.duplex?{duplex:d.duplex}:{})),S=yield v.json();return v.ok?{data:{path:m,id:S.Id,fullPath:S.Key},error:null}:{data:null,error:S}}catch(h){if(Bt(h))return{data:null,error:h};throw h}})}upload(e,r,o){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,o)})}uploadToSignedUrl(e,r,o,u){return gn(this,void 0,void 0,function*(){const h=this._removeEmptyFolders(e),d=this._getFinalPath(h),w=new URL(this.url+`/object/upload/sign/${d}`);w.searchParams.set("token",r);try{let p;const m=Object.assign({upsert:e1.upsert},u),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",m.cacheControl)):(p=o,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType);const v=yield this.fetch(w.toString(),{method:"PUT",body:p,headers:y}),S=yield v.json();return v.ok?{data:{path:h,fullPath:S.Key},error:null}:{data:null,error:S}}catch(p){if(Bt(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(e,r){return gn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const u=Object.assign({},this.headers);r!=null&&r.upsert&&(u["x-upsert"]="true");const h=yield Pr(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:u}),d=new URL(this.url+h.url),w=d.searchParams.get("token");if(!w)throw new ch("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:w},error:null}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}update(e,r,o){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,o)})}move(e,r,o){return gn(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}copy(e,r,o){return gn(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}createSignedUrl(e,r,o){return gn(this,void 0,void 0,function*(){try{let u=this._getFinalPath(e),h=yield Pr(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:r},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return h={signedUrl:encodeURI(`${this.url}${h.signedURL}${d}`)},{data:h,error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}createSignedUrls(e,r,o){return gn(this,void 0,void 0,function*(){try{const u=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),h=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:u.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${h}`):null})),error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}download(e,r){return gn(this,void 0,void 0,function*(){const u=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),d=h?`?${h}`:"";try{const w=this._getFinalPath(e);return{data:yield(yield Ga(this.fetch,`${this.url}/${u}/${w}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(w){if(Bt(w))return{data:null,error:w};throw w}})}info(e){return gn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const o=yield Ga(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:lc(o),error:null}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}exists(e){return gn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield rw(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(Bt(o)&&o instanceof ac){const u=o.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,r){const o=this._getFinalPath(e),u=[],h=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";h!==""&&u.push(h);const w=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});p!==""&&u.push(p);let m=u.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${w}/public/${o}${m}`)}}}remove(e){return gn(this,void 0,void 0,function*(){try{return{data:yield Yd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}list(e,r,o){return gn(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},iw),r),{prefix:e||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},o),error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const ow="2.7.1",aw={"X-Client-Info":`storage-js/${ow}`};var Bi=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};class lw{constructor(e,r={},o){this.url=e,this.headers=Object.assign(Object.assign({},aw),r),this.fetch=Xd(o)}listBuckets(){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Bt(e))return{data:null,error:e};throw e}})}getBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Bi(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}updateBucket(e,r){return Bi(this,void 0,void 0,function*(){try{return{data:yield nw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}emptyBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Yd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}}class uw extends lw{constructor(e,r={},o){super(e,r,o)}from(e){return new sw(this.url,this.headers,e,this.fetch)}}const cw="2.47.12";let Ws="";typeof Deno<"u"?Ws="deno":typeof document<"u"?Ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ws="react-native":Ws="node";const hw={"X-Client-Info":`supabase-js-${Ws}/${cw}`},fw={headers:hw},dw={schema:"public"},gw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pw={};var mw=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};const xw=t=>{let e;return t?e=t:typeof fetch>"u"?e=Rd:e=fetch,(...r)=>e(...r)},ww=()=>typeof Headers>"u"?kd:Headers,yw=(t,e,r)=>{const o=xw(r),u=ww();return(h,d)=>mw(void 0,void 0,void 0,function*(){var w;const p=(w=yield e())!==null&&w!==void 0?w:t;let m=new u(d==null?void 0:d.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),o(h,Object.assign(Object.assign({},d),{headers:m}))})};var Ew=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};function vw(t){return t.replace(/\/$/,"")}function Cw(t,e){const{db:r,auth:o,realtime:u,global:h}=t,{db:d,auth:w,realtime:p,global:m}=e,y={db:Object.assign(Object.assign({},d),r),auth:Object.assign(Object.assign({},w),o),realtime:Object.assign(Object.assign({},p),u),global:Object.assign(Object.assign({},m),h),accessToken:()=>Ew(this,void 0,void 0,function*(){return""})};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}const $d="2.67.3",_w="http://localhost:9999",Aw="supabase.auth.token",Sw={"X-Client-Info":`gotrue-js/${$d}`},t1=10,uc="X-Supabase-Api-Version",Kd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Iw(t){return Math.round(Date.now()/1e3)+t}function Tw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const or=()=>typeof window<"u"&&typeof document<"u",oi={tested:!1,writable:!1},to=()=>{if(!or())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oi.tested)return oi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),oi.tested=!0,oi.writable=!0}catch{oi.tested=!0,oi.writable=!1}return oi.writable};function bw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,h)=>{e[h]=u})}catch{}return r.searchParams.forEach((o,u)=>{e[u]=o}),e}const Zd=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ds(async()=>{const{default:o}=await Promise.resolve().then(()=>ws);return{default:o}},void 0).then(({default:o})=>o(...r)):e=fetch,(...r)=>e(...r)},Ow=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Qd=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},ta=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},na=async(t,e)=>{await t.removeItem(e)};function Nw(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",o,u,h,d,w,p,m,y=0;for(t=t.replace("-","+").replace("_","/");y<t.length;)d=e.indexOf(t.charAt(y++)),w=e.indexOf(t.charAt(y++)),p=e.indexOf(t.charAt(y++)),m=e.indexOf(t.charAt(y++)),o=d<<2|w>>4,u=(w&15)<<4|p>>2,h=(p&3)<<6|m,r=r+String.fromCharCode(o),p!=64&&u!=0&&(r=r+String.fromCharCode(u)),m!=64&&h!=0&&(r=r+String.fromCharCode(h));return r}class gl{constructor(){this.promise=new gl.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}gl.promiseConstructor=Promise;function n1(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=t.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const o=r[1];return JSON.parse(Nw(o))}async function Rw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function kw(t,e){return new Promise((o,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const d=await t(h);if(!e(h,null,d)){o(d);return}}catch(d){if(!e(h,d)){u(d);return}}})()})}function Dw(t){return("0"+t.toString(16)).substr(-2)}function Mw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let u="";for(let h=0;h<56;h++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(e),Array.from(e,Dw).join("")}async function Pw(t){const r=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}function Lw(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Pw(t);return Lw(r)}async function Fi(t,e,r=!1){const o=Mw();let u=o;r&&(u+="/PASSWORD_RECOVERY"),await Qd(t,`${e}-code-verifier`,u);const h=await Bw(o);return[h,o===h?"plain":"s256"]}const Fw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Uw(t){const e=t.headers.get(uc);if(!e||!e.match(Fw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class hh extends Error{constructor(e,r,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function be(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jw extends hh{constructor(e,r,o){super(e,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function zw(t){return be(t)&&t.name==="AuthApiError"}class qd extends hh{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Ii extends hh{constructor(e,r,o,u){super(e,o,u),this.name=r,this.status=o}}class Rr extends Ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vw(t){return be(t)&&t.name==="AuthSessionMissingError"}class lu extends Ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ra extends Ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ia extends Ii{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Hw(t){return be(t)&&t.name==="AuthImplicitGrantRedirectError"}class r1 extends Ii{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cc extends Ii{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function uu(t){return be(t)&&t.name==="AuthRetryableFetchError"}class i1 extends Ii{constructor(e,r,o){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}var Ww=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(r[o[u]]=t[o[u]]);return r};const ui=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gw=[502,503,504];async function s1(t){var e;if(!Ow(t))throw new cc(ui(t),0);if(Gw.includes(t.status))throw new cc(ui(t),t.status);let r;try{r=await t.json()}catch(h){throw new qd(ui(h),h)}let o;const u=Uw(t);if(u&&u.getTime()>=Kd["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new i1(ui(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Rr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,d)=>h&&typeof d=="string",!0))throw new i1(ui(r),t.status,r.weak_password.reasons);throw new jw(ui(r),t.status||500,o)}const Xw=(t,e,r,o)=>{const u={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function Fe(t,e,r,o){var u;const h=Object.assign({},o==null?void 0:o.headers);h[uc]||(h[uc]=Kd["2024-01-01"].name),o!=null&&o.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const d=(u=o==null?void 0:o.query)!==null&&u!==void 0?u:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const w=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await Yw(t,e,r+w,{headers:h,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function Yw(t,e,r,o,u,h){const d=Xw(e,o,u,h);let w;try{w=await t(r,Object.assign({},d))}catch(p){throw console.error(p),new cc(ui(p),0)}if(w.ok||await s1(w),o!=null&&o.noResolveJson)return w;try{return await w.json()}catch(p){await s1(p)}}function kr(t){var e;let r=null;Qw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Iw(t.expires_in)));const o=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:o},error:null}}function o1(t){const e=kr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Fr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function $w(t){return{data:t,error:null}}function Kw(t){const{action_link:e,email_otp:r,hashed_token:o,redirect_to:u,verification_type:h}=t,d=Ww(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),w={action_link:e,email_otp:r,hashed_token:o,redirect_to:u,verification_type:h},p=Object.assign({},d);return{data:{properties:w,user:p},error:null}}function Zw(t){return t}function Qw(t){return t.access_token&&t.refresh_token&&t.expires_in}var qw=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(t);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(t,o[u])&&(r[o[u]]=t[o[u]]);return r};class Jw{constructor({url:e="",headers:r={},fetch:o}){this.url=e,this.headers=r,this.fetch=Zd(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(be(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,r={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fr})}catch(o){if(be(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:r}=e,o=qw(e,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o==null?void 0:o.newEmail,delete u.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Kw,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fr})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,o,u,h,d,w,p;try{const m={nextPage:null,lastPage:0,total:0},y=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=e==null?void 0:e.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Zw});if(y.error)throw y.error;const v=await y.json(),S=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,k=(p=(w=y.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&p!==void 0?p:[];return k.length>0&&(k.forEach(B=>{const L=parseInt(B.split(";")[0].split("=")[1].substring(0,1)),X=JSON.parse(B.split(";")[1].split("=")[1]);m[`${X}Page`]=L}),m.total=parseInt(S)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(be(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fr})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Fr})}catch(o){if(be(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,r=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fr})}catch(o){if(be(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){try{const{data:r,error:o}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}const ey={getItem:t=>to()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{to()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{to()&&globalThis.localStorage.removeItem(t)}};function a1(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function ty(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ui={debug:!!(globalThis&&to()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ny extends Jd{}async function ry(t,e,r){Ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Ui.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){Ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,u.name);try{return await r()}finally{Ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,u.name)}}else{if(e===0)throw Ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ny(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ui.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}ty();const iy={url:_w,storageKey:Aw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Sw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Fs=30*1e3,l1=3;async function u1(t,e,r){return await r()}class Eo{constructor(e){var r,o;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Eo.nextInstanceID,Eo.nextInstanceID+=1,this.instanceID>0&&or()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},iy),e);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Jw({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Zd(u.fetch),this.lock=u.lock||u1,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:or()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ry:this.lock=u1,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?u.storage?this.storage=u.storage:to()?this.storage=ey:(this.memoryStorage={},this.storage=a1(this.memoryStorage)):(this.memoryStorage={},this.storage=a1(this.memoryStorage)),or()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$d}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=bw(window.location.href);let o="none";if(this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce"),or()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:h}=await this._getSessionFromURL(r,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),Hw(h)){const p=(e=h.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:h}}return await this._removeSession(),{error:h}}const{session:d,redirectType:w}=u;return this._debug("#_initialize()","detected session in URL",d,"redirect type",w),await this._saveSession(d),setTimeout(async()=>{w==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?{error:r}:{error:new qd("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,o,u;try{const h=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=e==null?void 0:e.options)===null||u===void 0?void 0:u.captchaToken}},xform:kr}),{data:d,error:w}=h;if(w||!d)return{data:{user:null,session:null},error:w};const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(h){if(be(h))return{data:{user:null,session:null},error:h};throw h}}async signUp(e){var r,o,u;try{let h;if("email"in e){const{email:y,password:v,options:S}=e;let k=null,B=null;this.flowType==="pkce"&&([k,B]=await Fi(this.storage,this.storageKey)),h=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:y,password:v,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:k,code_challenge_method:B},xform:kr})}else if("phone"in e){const{phone:y,password:v,options:S}=e;h=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(o=S==null?void 0:S.data)!==null&&o!==void 0?o:{},channel:(u=S==null?void 0:S.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:kr})}else throw new ra("You must provide either an email or phone number and a password");const{data:d,error:w}=h;if(w||!d)return{data:{user:null,session:null},error:w};const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(h){if(be(h))return{data:{user:null,session:null},error:h};throw h}}async signInWithPassword(e){try{let r;if("email"in e){const{email:h,password:d,options:w}=e;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:d,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:o1})}else if("phone"in e){const{phone:h,password:d,options:w}=e;r=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:d,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:o1})}else throw new ra("You must provide either an email or phone number and a password");const{data:o,error:u}=r;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new lu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,o,u,h;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=e.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await ta(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/");try{const{data:h,error:d}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:kr});if(await na(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!h||!h.session||!h.user?{data:{user:null,session:null,redirectType:null},error:new lu}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:d})}catch(h){if(be(h))return{data:{user:null,session:null,redirectType:null},error:h};throw h}}async signInWithIdToken(e){try{const{options:r,provider:o,token:u,access_token:h,nonce:d}=e,w=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:h,nonce:d,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kr}),{data:p,error:m}=w;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new lu}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:p,error:m})}catch(r){if(be(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,o,u,h,d;try{if("email"in e){const{email:w,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Fi(this.storage,this.storageKey));const{error:v}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:w,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:w,options:p}=e,{data:m,error:y}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:w,data:(u=p==null?void 0:p.data)!==null&&u!==void 0?u:{},create_user:(h=p==null?void 0:p.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:y}}throw new ra("You must provide either an email or phone number.")}catch(w){if(be(w))return{data:{user:null,session:null},error:w};throw w}}async verifyOtp(e){var r,o;try{let u,h;"options"in e&&(u=(r=e.options)===null||r===void 0?void 0:r.redirectTo,h=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:w}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:kr});if(w)throw w;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,m=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),{data:{user:m,session:p},error:null}}catch(u){if(be(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(e){var r,o,u;try{let h=null,d=null;return this.flowType==="pkce"&&([h,d]=await Fi(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=e==null?void 0:e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:$w})}catch(h){if(be(h))return{data:null,error:h};throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:o}=e;if(o)throw o;if(!r)throw new Rr;const{error:u}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:u}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:o,type:u,options:h}=e,{error:d}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:o,type:u,options:h}=e,{data:d,error:w}=await Fe(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:w}}throw new ra("You must provide either an email or phone number and a type")}catch(r){if(be(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await ta(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.storage.isServer){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(p,m,y)=>(!d&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(p,m,y))})}return{data:{session:e},error:null}}const{session:u,error:h}=await this._callRefreshToken(e.refresh_token);return h?{data:{session:null},error:h}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fr}):await this._useSession(async r=>{var o,u,h;const{data:d,error:w}=r;if(w)throw w;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rr}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:Fr})})}catch(r){if(be(r))return Vw(r)&&(await this._removeSession(),await na(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async o=>{const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new Rr;const d=u.session;let w=null,p=null;this.flowType==="pkce"&&e.email!=null&&([w,p]=await Fi(this.storage,this.storageKey));const{data:m,error:y}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:w,code_challenge_method:p}),jwt:d.access_token,xform:Fr});if(y)throw y;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(be(o))return{data:{user:null},error:o};throw o}}_decodeJWT(e){return n1(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rr;const r=Date.now()/1e3;let o=r,u=!0,h=null;const d=n1(e.access_token);if(d.exp&&(o=d.exp,u=o<=r),u){const{session:w,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return{data:{user:null,session:null},error:p};if(!w)return{data:{user:null,session:null},error:null};h=w}else{const{data:w,error:p}=await this._getUser(e.access_token);if(p)throw p;h={access_token:e.access_token,refresh_token:e.refresh_token,user:w.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return{data:{user:h.user,session:h},error:null}}catch(r){if(be(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var o;if(!e){const{data:d,error:w}=r;if(w)throw w;e=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new Rr;const{session:u,error:h}=await this._callRefreshToken(e.refresh_token);return h?{data:{user:null,session:null},error:h}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(be(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!or())throw new ia("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ia(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new r1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ia("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new r1("No code detected.");const{data:N,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:h,refresh_token:d,expires_in:w,expires_at:p,token_type:m}=e;if(!h||!w||!d||!m)throw new ia("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(w);let S=y+v;p&&(S=parseInt(p));const k=S-y;k*1e3<=Fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${v}s`);const B=S-v;y-B>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",B,S,y):y-B<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",B,S,y);const{data:L,error:X}=await this._getUser(h);if(X)throw X;const D={provider_token:o,provider_refresh_token:u,access_token:h,expires_in:v,expires_at:S,refresh_token:d,token_type:m,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(o){if(be(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await ta(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:u,error:h}=r;if(h)return{error:h};const d=(o=u.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:w}=await this.admin.signOut(d,e);if(w&&!(zw(w)&&(w.status===404||w.status===401||w.status===403)))return{error:w}}return e!=="others"&&(await this._removeSession(),await na(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=Tw(),o={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async r=>{var o,u;try{const{data:{session:h},error:d}=r;if(d)throw d;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",e,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(e))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",h),console.error(h)}})}async resetPasswordForEmail(e,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await Fi(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(be(h))return{data:null,error:h};throw h}}async getUserIdentities(){var e;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:o,error:u}=await this._useSession(async h=>{var d,w,p,m,y;const{data:v,error:S}=h;if(S)throw S;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(w=e.options)===null||w===void 0?void 0:w.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",k,{headers:this.headers,jwt:(y=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(u)throw u;return or()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),{data:{provider:e.provider,url:o==null?void 0:o.url},error:null}}catch(o){if(be(o))return{data:{provider:e.provider,url:null},error:o};throw o}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var o,u;const{data:h,error:d}=r;if(d)throw d;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await kw(async u=>(u>0&&await Rw(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kr})),(u,h)=>{const d=200*Math.pow(2,u);return h&&uu(h)&&Date.now()+d-o<Fs})}catch(o){if(this._debug(r,"error",o),be(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",o),or()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await ta(this.storage,this.storageKey);if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const u=Math.round(Date.now()/1e3),h=((e=o.expires_at)!==null&&e!==void 0?e:1/0)<u+t1;if(this._debug(r,`session has${h?"":" not"} expired with margin of ${t1}s`),h){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),uu(d)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,o;if(!e)throw new Rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new gl;const{data:h,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!h.session)throw new Rr;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const w={session:h.session,error:null};return this.refreshingDeferred.resolve(w),w}catch(h){if(this._debug(u,"error",h),be(h)){const d={session:null,error:h};return uu(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(e,r,o=!0){const u=`#_notifyAllSubscribers(${e})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:r});const h=[],d=Array.from(this.stateChangeEmitters.values()).map(async w=>{try{await w.callback(e,r)}catch(p){h.push(p)}});if(await Promise.all(d),h.length>0){for(let w=0;w<h.length;w+=1)console.error(h[w]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Qd(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await na(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&or()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-e)/Fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Fs}ms, refresh threshold is ${l1} ticks`),u<=l1&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!or()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,o){const u=[`provider=${encodeURIComponent(r)}`];if(o!=null&&o.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,d]=await Fi(this.storage,this.storageKey),w=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(d)}`});u.push(w.toString())}if(o!=null&&o.queryParams){const h=new URLSearchParams(o.queryParams);u.push(h.toString())}return o!=null&&o.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${u.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;return h?{data:null,error:h}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var o,u;const{data:h,error:d}=r;if(d)return{data:null,error:d};const w=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:p,error:m}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:w,headers:this.headers,jwt:(o=h==null?void 0:h.session)===null||o===void 0?void 0:o.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((u=p==null?void 0:p.totp)===null||u===void 0)&&u.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),{data:p,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;if(h)return{data:null,error:h};const{data:d,error:w}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return w?{data:null,error:w}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:w})})}catch(r){if(be(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;return h?{data:null,error:h}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(be(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:o}=await this._challenge({factorId:e.factorId});return o?{data:null,error:o}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const o=(e==null?void 0:e.factors)||[],u=o.filter(d=>d.factor_type==="totp"&&d.status==="verified"),h=o.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:o,totp:u,phone:h},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,o;const{data:{session:u},error:h}=e;if(h)return{data:null,error:h};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const d=this._decodeJWT(u.access_token);let w=null;d.aal&&(w=d.aal);let p=w;((o=(r=u.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const y=d.amr||[];return{data:{currentLevel:w,nextLevel:p,currentAuthenticationMethods:y},error:null}}))}}Eo.nextInstanceID=0;const sy=Eo;class oy extends sy{constructor(e){super(e)}}var ay=function(t,e,r,o){function u(h){return h instanceof r?h:new r(function(d){d(h)})}return new(r||(r=Promise))(function(h,d){function w(y){try{m(o.next(y))}catch(v){d(v)}}function p(y){try{m(o.throw(y))}catch(v){d(v)}}function m(y){y.done?h(y.value):u(y.value).then(w,p)}m((o=o.apply(t,e||[])).next())})};class ly{constructor(e,r,o){var u,h,d;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const w=vw(e);this.realtimeUrl=`${w}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${w}/auth/v1`,this.storageUrl=`${w}/storage/v1`,this.functionsUrl=`${w}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:dw,realtime:pw,auth:Object.assign(Object.assign({},gw),{storageKey:p}),global:fw},y=Cw(o??{},m);this.storageKey=(u=y.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(h=y.global.headers)!==null&&h!==void 0?h:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=y.auth)!==null&&d!==void 0?d:{},this.headers,y.global.fetch),this.fetch=yw(r,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new Mx(`${w}/rest/v1`,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),y.accessToken||this._listenForAuthEvents()}get functions(){return new cx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new uw(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},o={}){return this.rest.rpc(e,r,o)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return ay(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(r=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:u,storageKey:h,flowType:d,lock:w,debug:p},m,y){var v;const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oy({url:this.authUrl,headers:Object.assign(Object.assign({},S),m),storageKey:h,autoRefreshToken:e,persistSession:r,detectSessionInUrl:o,storage:u,flowType:d,lock:w,debug:p,fetch:y,hasCustomAuthorizationHeader:(v="Authorization"in this.headers)!==null&&v!==void 0?v:!1})}_initRealtimeClient(e){return new Kx(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,o)=>{this._handleTokenChanged(r,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,r,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uy=(t,e,r)=>new ly(t,e,r),cy="https://pntrgokskrzopvplanca.supabase.co",hy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBudHJnb2tza3J6b3B2cGxhbmNhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYyNzM2MjgsImV4cCI6MjA1MTg0OTYyOH0.hyh2kc5brp7K2i4EEQcI4eTHAMrKGmqBN31vQk68s14",gr=uy(cy,hy);function fy(){const[t,e]=bt.useState(!1),[r,o]=bt.useState(""),[u,h]=bt.useState(""),d=async p=>{p.preventDefault();try{e(!0);const{error:m}=await gr.auth.signInWithPassword({email:r,password:u});if(m)throw m}catch(m){alert(m.message)}finally{e(!1)}},w=async p=>{p.preventDefault();try{e(!0);const{error:m}=await gr.auth.signUp({email:r,password:u});if(m)throw m;alert("Check your email for the confirmation link!")}catch(m){alert(m.message)}finally{e(!1)}};return ce.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ce.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md",children:[ce.jsxs("div",{className:"flex items-center justify-center mb-8",children:[ce.jsx(vm,{className:"w-8 h-8 text-blue-600"}),ce.jsx("h1",{className:"text-2xl font-bold ml-2",children:"Event Manager Login"})]}),ce.jsxs("form",{onSubmit:d,className:"space-y-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),ce.jsx("input",{type:"email",value:r,onChange:p=>o(p.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),ce.jsx("input",{type:"password",value:u,onChange:p=>h(p.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),ce.jsxs("div",{className:"flex gap-4",children:[ce.jsx("button",{type:"submit",disabled:t,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50",children:t?"Loading...":"Sign In"}),ce.jsx("button",{onClick:w,disabled:t,className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 disabled:opacity-50",children:"Sign Up"})]})]})]})})}function dy(){const[t,e]=bt.useState([]),[r,o]=bt.useState(!1),[u,h]=bt.useState(null),[d,w]=bt.useState([]);bt.useEffect(()=>{gr.auth.getSession().then(({data:{session:X}})=>{h(X),X&&p()});const{data:{subscription:L}}=gr.auth.onAuthStateChange((X,D)=>{h(D),D&&p()});return()=>L.unsubscribe()},[]);const p=async()=>{const{data:L,error:X}=await gr.from("employees").select("*").order("created_at",{ascending:!1});X?console.error("Error loading employees:",X):e(L.map(D=>({...D,remainingScans:D.remaining_scans}))||[])},m=async L=>{const X={name:L.name,email:L.email,count:L.count,remaining_scans:L.remainingScans,user_id:u.user.id},{data:D,error:N}=await gr.from("employees").insert([X]).select().single();if(N)console.error("Error adding employee:",N),alert("Failed to add employee. Please try again.");else{const O={...D,remainingScans:D.remaining_scans};e([O,...t])}},y=async L=>{if(!/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L)){alert("Invalid QR code format");return}const D=t.find(O=>O.id===L);if(!D){alert("Invalid QR code - Employee not found");return}if(D.remainingScans===0){alert("You have reached your scan limit for this QR code");return}const{error:N}=await gr.from("employees").update({remaining_scans:D.remainingScans-1}).eq("id",L);N?alert("Error updating scan count. Please try again."):(e(O=>O.map(U=>U.id===L?{...U,remainingScans:U.remainingScans-1}:U)),alert(`Scan successful! ${D.remainingScans-1} scans remaining`))},v=async()=>{await gr.auth.signOut(),e([])},S=()=>{const L=t.map(U=>({name:U.name,email:U.email,remainingScans:U.remainingScans,totalScans:U.count})),X=Papa.unparse(L),D=new Blob([X],{type:"text/csv"}),N=window.URL.createObjectURL(D),O=document.createElement("a");O.href=N,O.download="employees.csv",O.click(),window.URL.revokeObjectURL(N)},k=L=>{w(L)},B=async()=>{if(d.length===0)return;const L=d.map(N=>({name:N.name,email:N.email,user_id:u.user.id,count:2,remaining_scans:2})),{data:X,error:D}=await gr.from("employees").insert(L).select();if(D)console.error("Error adding employees:",D),alert("Failed to import employees. Please try again.");else{const N=X.map(O=>({...O,remainingScans:O.remaining_scans}));e([...N,...t]),w([])}};return u?ce.jsx("div",{className:"min-h-screen bg-gray-100 p-8",children:ce.jsxs("div",{className:"max-w-4xl mx-auto",children:[ce.jsxs("div",{className:"flex justify-between items-center mb-8",children:[ce.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Event Manager"}),ce.jsxs("div",{className:"flex gap-4",children:[ce.jsxs("button",{onClick:S,className:"flex items-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:[ce.jsx(Em,{className:"w-5 h-5"}),"Export CSV"]}),ce.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700",children:[ce.jsx(Cm,{className:"w-5 h-5"}),"Logout"]})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ce.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[ce.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ce.jsx(Im,{className:"w-6 h-6 text-blue-600"}),ce.jsx("h2",{className:"text-xl font-semibold",children:"Add Employee"})]}),ce.jsx(Tm,{onSubmit:m}),ce.jsxs("div",{className:"mt-4",children:[ce.jsx(nx,{onImport:k}),d.length>0&&ce.jsxs("div",{className:"mt-4",children:[ce.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[d.length," employees ready to import"]}),ce.jsx("button",{onClick:B,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700",children:"Create QR Codes"})]})]})]}),ce.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[ce.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[ce.jsx(_m,{className:"w-6 h-6 text-blue-600"}),ce.jsx("h2",{className:"text-xl font-semibold",children:"QR Scanner"})]}),ce.jsxs("button",{onClick:()=>o(!r),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 flex items-center justify-center gap-2",children:[ce.jsx(Am,{className:"w-5 h-5"}),r?"Hide Scanner":"Show Scanner"]}),r&&ce.jsx(Jm,{onScan:y})]})]}),ce.jsxs("div",{className:"mt-8 bg-white p-6 rounded-lg shadow-md",children:[ce.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Employee QR Codes"}),ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(L=>ce.jsxs("div",{className:"border p-4 rounded-lg",children:[ce.jsx("p",{className:"font-semibold",children:L.name}),ce.jsx("p",{className:"text-sm text-gray-600",children:L.email}),ce.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Remaining Scans: ",L.remainingScans,"/",L.count]}),ce.jsx(xm,{value:L.id,size:128})]},L.id))})]})]})}):ce.jsx(fy,{})}_d(document.getElementById("root")).render(ce.jsx(bt.StrictMode,{children:ce.jsx(dy,{})}));export{hc as g};
